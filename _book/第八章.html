
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>第八章智能合約 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="第九章.html" />
    
    
    <link rel="prev" href="第七章.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="前言.html">
            
                <a href="前言.html">
            
                    
                    前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="術語.html">
            
                <a href="術語.html">
            
                    
                    術語
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="第一章.html">
            
                <a href="第一章.html">
            
                    
                    第一章 什麼是以太坊
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="第二章.html">
            
                <a href="第二章.html">
            
                    
                    第二章以太坊基礎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="第三章.html">
            
                <a href="第三章.html">
            
                    
                    第三章以太坊客戶端
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="第四章.html">
            
                <a href="第四章.html">
            
                    
                    第四章以太坊測試網（Testnets）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="第五章.html">
            
                <a href="第五章.html">
            
                    
                    第五章密鑰，地址
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="第六章.html">
            
                <a href="第六章.html">
            
                    
                    第六章錢包
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="第七章.html">
            
                <a href="第七章.html">
            
                    
                    第七章交易
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11" data-path="第八章.html">
            
                <a href="第八章.html">
            
                    
                    第八章智能合約
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="第九章.html">
            
                <a href="第九章.html">
            
                    
                    第九章開發工具，框架和庫
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="第十章.html">
            
                <a href="第十章.html">
            
                    
                    第十章Tokens
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="第十一章.html">
            
                <a href="第十一章.html">
            
                    
                    第十一章去中心化應用 (DApps)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="第十二章.html">
            
                <a href="第十二章.html">
            
                    
                    第十二章Oracles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="第十三章.html">
            
                <a href="第十三章.html">
            
                    
                    第十三章gas（Gas）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="第十四章.html">
            
                <a href="第十四章.html">
            
                    
                    第十四章以太坊虛擬機
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="第十五章.html">
            
                <a href="第十五章.html">
            
                    
                    第十五章共識
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="第十六章.html">
            
                <a href="第十六章.html">
            
                    
                    第十六章Vyper: 面向合約的程式語言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="第十七章.html">
            
                <a href="第十七章.html">
            
                    
                    第十七章節點間的通信 —— 一個簡單的視角
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="第十八章.html">
            
                <a href="第十八章.html">
            
                    
                    第十八章以太坊標準
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="第十九章.html">
            
                <a href="第十九章.html">
            
                    
                    第十九章以太坊分叉歷史
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >第八章智能合約</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div class="paragraph">
<p>&lt;&lt;&#x7B2C;&#x4E03;&#x7AE0;#,&#x4E0A;&#x4E00;&#x7AE0;&#xFF1A;&#x4EA4;&#x6613;&gt;&gt;</p>
</div>
<div class="sect1">
<h2 id="smart_contracts_chapter">&#x667A;&#x80FD;&#x5408;&#x7D04;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>&#x6211;&#x5011;&#x5728; <a href="#intro">[intro]</a> &#x4E2D;&#x767C;&#x73FE;&#xFF0C;&#x4EE5;&#x592A;&#x574A;&#x6709;&#x5169;&#x7A2E;&#x4E0D;&#x540C;&#x985E;&#x578B;&#x7684;&#x5E33;&#x6236;&#xFF1A;&#x5916;&#x90E8;&#x64C1;&#x6709;&#x5E33;&#x6236;&#xFF08;EOAs&#xFF09;&#x548C;&#x5408;&#x7D04;&#x5E33;&#x6236;&#x3002;EOAs&#x7531;&#x4EE5;&#x592A;&#x574A;&#x4EE5;&#x5916;&#x7684;&#x8EDF;&#x9AD4;&#xFF08;&#x5982;&#x9322;&#x5305;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#xFF09;&#x63A7;&#x5236;&#x3002;&#x5408;&#x7D04;&#x5E33;&#x6236;&#x7531;&#x5728;&#x4EE5;&#x592A;&#x574A;&#x865B;&#x64EC;&#x6A5F;&#xFF08;EVM&#xFF09;&#x5167;&#x904B;&#x884C;&#x7684;&#x8EDF;&#x9AD4;&#x63A7;&#x5236;&#x3002;&#x5169;&#x7A2E;&#x985E;&#x578B;&#x7684;&#x5E33;&#x6236;&#x90FD;&#x901A;&#x904E;&#x4EE5;&#x592A;&#x574A;&#x5730;&#x5740;&#x6A19;&#x8B58;&#x3002;&#x5728;&#x672C;&#x7BC0;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x8A0E;&#x8AD6;&#x7B2C;&#x4E8C;&#x7A2E;&#x985E;&#x578B;&#xFF0C;&#x5408;&#x7D04;&#x5E33;&#x6236;&#x548C;&#x63A7;&#x5236;&#x5B83;&#x5011;&#x7684;&#x8EDF;&#x9AD4;&#xFF1A;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x3002;</p>
</div>
<div class="sect2">
<h3 id="smart_contracts_definition">&#x4EC0;&#x9EBC;&#x662F;&#x667A;&#x80FD;&#x5408;&#x7D04;&#xFF1F;</h3>
<div class="paragraph">
<p>&#x8853;&#x8A9E;<em>smart contract</em>&#x5DF2;&#x88AB;&#x7528;&#x65BC;&#x63CF;&#x8FF0;&#x5404;&#x7A2E;&#x4E0D;&#x540C;&#x7684;&#x4E8B;&#x7269;&#x3002;&#x5728;&#x4E8C;&#x5341;&#x4E16;&#x7D00;&#x4E5D;&#x5341;&#x5E74;&#x4EE3;&#xFF0C;&#x5BC6;&#x78BC;&#x5B78;&#x5BB6;Nick Szabo&#x63D0;&#x51FA;&#x4E86;&#x9019;&#x500B;&#x8853;&#x8A9E;&#xFF0C;&#x4E26;&#x5C07;&#x5176;&#x5B9A;&#x7FA9;&#x70BA;&#x201C;&#x4E00;&#x7D44;&#x4EE5;&#x6578;&#x5B57;&#x5F62;&#x5F0F;&#x898F;&#x5B9A;&#x7684;&#x627F;&#x8AFE;&#xFF0C;&#x5305;&#x62EC;&#x5404;&#x65B9;&#x5728;&#x5176;&#x4ED6;&#x627F;&#x8AFE;&#x4E2D;&#x5C65;&#x884C;&#x7684;&#x5354;&#x8B70;&#x201D;&#x3002;&#x81EA;&#x90A3;&#x6642;&#x4EE5;&#x4F86;&#xFF0C;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x6982;&#x5FF5;&#x5F97;&#x5230;&#x4E86;&#x767C;&#x5C55;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;2009&#x5E74;&#x6BD4;&#x7279;&#x5E63;&#x767C;&#x660E;&#x5F15;&#x5165;&#x4E86;&#x53BB;&#x4E2D;&#x5FC3;&#x5316;&#x5340;&#x584A;&#x93C8;&#x4E4B;&#x5F8C;&#x3002;&#x5728;&#x672C;&#x66F8;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x4F7F;&#x7528;&#x8853;&#x8A9E;&#x201C;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x201D;&#x4F86;&#x6307;&#x4EE3;&#x5728;Ethereum&#x865B;&#x64EC;&#x6A5F;&#x74B0;&#x5883;&#x4E2D;&#x78BA;&#x5B9A;&#x6027;&#x7684;&#x904B;&#x884C;&#x7684;&#x4E0D;&#x53EF;&#x8B8A;&#x7684;&#x8A08;&#x7B97;&#x6A5F;&#x7A0B;&#x5F0F;&#xFF0C;&#x8A72;&#x865B;&#x64EC;&#x6A5F;&#x4F5C;&#x70BA;&#x4E00;&#x500B;&#x53BB;&#x4E2D;&#x5FC3;&#x5316;&#x7684;&#x4E16;&#x754C;&#x8A08;&#x7B97;&#x6A5F;&#x800C;&#x904B;&#x8F49;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x62C6;&#x89E3;&#x9019;&#x500B;&#x5B9A;&#x7FA9;&#xFF1A;</p>
</div>
<div class="paragraph">
<p>&#x8A08;&#x7B97;&#x6A5F;&#x7A0B;&#x5F0F;&#xFF1A;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x53EA;&#x662F;&#x8A08;&#x7B97;&#x6A5F;&#x7A0B;&#x5F0F;&#x3002;&#x5408;&#x7D04;&#x9019;&#x500B;&#x8A5E;&#x5728;&#x9019;&#x65B9;&#x9762;&#x6C92;&#x6709;&#x6CD5;&#x5F8B;&#x610F;&#x7FA9;&#x3002;
&#x4E0D;&#x53EF;&#x8B8A;&#x7684;&#xFF1A;&#x4E00;&#x65E6;&#x90E8;&#x7F72;&#xFF0C;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x4E0D;&#x80FD;&#x6539;&#x8B8A;&#x3002;&#x8207;&#x50B3;&#x7D71;&#x8EDF;&#x9AD4;&#x4E0D;&#x540C;&#xFF0C;&#x4FEE;&#x6539;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x552F;&#x4E00;&#x65B9;&#x6CD5;&#x662F;&#x90E8;&#x7F72;&#x65B0;&#x5BE6;&#x4F8B;&#x3002;
&#x78BA;&#x5B9A;&#x6027;&#x7684;&#xFF1A;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x7D50;&#x679C;&#x5C0D;&#x65BC;&#x904B;&#x884C;&#x5B83;&#x7684;&#x6BCF;&#x500B;&#x4EBA;&#x4F86;&#x8AAA;&#x90FD;&#x662F;&#x4E00;&#x6A23;&#x7684;&#xFF0C;&#x5305;&#x62EC;&#x8ABF;&#x7528;&#x5B83;&#x5011;&#x7684;&#x4EA4;&#x6613;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x4EE5;&#x53CA;&#x57F7;&#x884C;&#x6642;&#x4EE5;&#x592A;&#x574A;&#x5340;&#x584A;&#x93C8;&#x7684;&#x72C0;&#x614B;&#x3002;
EVM&#x4E0A;&#x4E0B;&#x6587;&#xFF1A;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x4EE5;&#x975E;&#x5E38;&#x6709;&#x9650;&#x7684;&#x57F7;&#x884C;&#x4E0A;&#x4E0B;&#x6587;&#x904B;&#x884C;&#x3002;&#x4ED6;&#x5011;&#x53EF;&#x4EE5;&#x8A2A;&#x554F;&#x81EA;&#x5DF1;&#x7684;&#x72C0;&#x614B;&#xFF0C;&#x8ABF;&#x7528;&#x5B83;&#x5011;&#x7684;&#x4EA4;&#x6613;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4EE5;&#x53CA;&#x6709;&#x95DC;&#x6700;&#x65B0;&#x584A;&#x7684;&#x4E00;&#x4E9B;&#x8CC7;&#x8A0A;&#x3002;
&#x53BB;&#x4E2D;&#x5FC3;&#x5316;&#x7684;&#x4E16;&#x754C;&#x8A08;&#x7B97;&#x6A5F;&#xFF1A;EVM&#x5728;&#x6BCF;&#x500B;&#x4EE5;&#x592A;&#x574A;&#x7BC0;&#x9EDE;&#x4E0A;&#x4F5C;&#x70BA;&#x672C;&#x5730;&#x5BE6;&#x4F8B;&#x904B;&#x884C;&#xFF0C;&#x4F46;&#x7531;&#x65BC;EVM&#x7684;&#x6240;&#x6709;&#x5BE6;&#x4F8B;&#x90FD;&#x5728;&#x76F8;&#x540C;&#x7684;&#x521D;&#x59CB;&#x72C0;&#x614B;&#x4E0B;&#x904B;&#x884C;&#x4F75;&#x7522;&#x751F;&#x76F8;&#x540C;&#x7684;&#x6700;&#x7D42;&#x72C0;&#x614B;&#xFF0C;&#x56E0;&#x6B64;&#x6574;&#x500B;&#x7CFB;&#x7D71;&#x4F5C;&#x70BA;&#x55AE;&#x81FA;&#x4E16;&#x754C;&#x8A08;&#x7B97;&#x6A5F;&#x904B;&#x884C;&#x3002;</p>
</div>
</div>
<div class="sect2">
<h3 id="smart_contract_lifecycle">&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x751F;&#x547D;&#x9031;&#x671F;</h3>
<div class="paragraph">
<p>&#x667A;&#x80FD;&#x5408;&#x7D04;&#x901A;&#x5E38;&#x4EE5;&#x9AD8;&#x968E;&#x8A9E;&#x8A00;&#x7DE8;&#x5BEB;&#xFF0C;&#x4F8B;&#x5982;Solidity&#x3002;&#x4F46;&#x70BA;&#x4E86;&#x904B;&#x884C;&#xFF0C;&#x5FC5;&#x9808;&#x5C07;&#x5B83;&#x5011;&#x7DE8;&#x8B6F;&#x70BA;EVM&#x4E2D;&#x904B;&#x884C;&#x7684;&#x4F4E;&#x7D1A; Bytecode &#xFF08;&#x8ACB;&#x53C3;&#x898B; <a href="#evm">[evm]</a>&#xFF09;&#x3002;&#x4E00;&#x65E6;&#x7DE8;&#x8B6F;&#x5B8C;&#x6210;&#xFF0C;&#x5B83;&#x5011;&#x5C31;&#x6703;&#x96A8;&#x8457;&#x8F49;&#x79FB;&#x5230;&#x7279;&#x6B8A;&#x7684;&#x5408;&#x7D04;&#x5275;&#x5EFA;&#x5730;&#x5740;&#x7684;&#x4EA4;&#x6613;&#x88AB;&#x90E8;&#x7F72;&#x5230;&#x4EE5;&#x592A;&#x574A;&#x5340;&#x584A;&#x93C8;&#x4E2D;&#x3002;&#x6BCF;&#x500B;&#x5408;&#x7D04;&#x90FD;&#x7531;&#x4EE5;&#x592A;&#x574A;&#x5730;&#x5740;&#x6A19;&#x8B58;&#xFF0C;&#x8A72;&#x5730;&#x5740;&#x6E90;&#x65BC;&#x4F5C;&#x70BA;&#x767C;&#x8D77;&#x5E33;&#x6236;&#x548C;&#x96A8;&#x6A5F;&#x6578;&#x7684;&#x51FD;&#x6578;&#x7684;&#x5408;&#x7D04;&#x5275;&#x5EFA;&#x4EA4;&#x6613;&#x3002;&#x5408;&#x7D04;&#x7684;&#x4EE5;&#x592A;&#x574A;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x5728;&#x4EA4;&#x6613;&#x4E2D;&#x7528;&#x4F5C;&#x63A5;&#x6536;&#x8005;&#xFF0C;&#x53EF;&#x5C07;&#x8CC7;&#x91D1;&#x767C;&#x9001;&#x5230;&#x5408;&#x7D04;&#x6216;&#x8ABF;&#x7528;&#x5408;&#x7D04;&#x7684;&#x67D0;&#x500B;&#x529F;&#x80FD;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x91CD;&#x8981;&#x7684;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x5408;&#x7D04;&#x53EA;&#x6709;&#x88AB;&#x4EA4;&#x6613;&#x8ABF;&#x7528;&#x6642;&#x624D;&#x6703;&#x904B;&#x884C;&#x3002;&#x4EE5;&#x592A;&#x574A;&#x7684;&#x6240;&#x6709;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x5747;&#x7531;EOA&#x767C;&#x8D77;&#x7684;&#x4EA4;&#x6613;&#x57F7;&#x884C;&#x3002;&#x5408;&#x7D04;&#x53EF;&#x4EE5;&#x8ABF;&#x7528;&#x53E6;&#x4E00;&#x500B;&#x5408;&#x7D04;&#xFF0C;&#x5176;&#x4E2D;&#x53C8;&#x53EF;&#x4EE5;&#x8ABF;&#x7528;&#x53E6;&#x4E00;&#x500B;&#x5408;&#x7D04;&#xFF0C;&#x7B49;&#x7B49;&#x3002;&#x4F46;&#x662F;&#x9019;&#x7A2E;&#x57F7;&#x884C;&#x93C8;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x500B;&#x5408;&#x7D04;&#x5FC5;&#x9808;&#x59CB;&#x7D42;&#x7531;EOA&#x7684;&#x4EA4;&#x6613;&#x8ABF;&#x7528;&#x3002;&#x5408;&#x7D04;&#x6C38;&#x9060;&#x4E0D;&#x6703;&#x201C;&#x81EA;&#x884C;&#x201D;&#x904B;&#x884C;&#xFF0C;&#x6216;&#x201C;&#x5728;&#x5F8C;&#x81FA;&#x904B;&#x884C;&#x201D;&#x3002;&#x5728;&#x4EA4;&#x6613;&#x89F8;&#x767C;&#x57F7;&#x884C;&#xFF0C;&#x76F4;&#x63A5;&#x6216;&#x9593;&#x63A5;&#x5730;&#x4F5C;&#x70BA;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x93C8;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x4E4B;&#x524D;&#xFF0C;&#x5408;&#x7D04;&#x5728;&#x5340;&#x584A;&#x93C8;&#x4E0A;&#x5BE6;&#x969B;&#x4E0A;&#x662F;&#x201C;&#x4F11;&#x7720;&#x201D;&#x7684;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4EA4;&#x6613;&#x662F; <em>&#x539F;&#x5B50;&#x6027;&#x7684;</em> <em>atomic</em>&#xFF0C;&#x7121;&#x8AD6;&#x4ED6;&#x5011;&#x8ABF;&#x7528;&#x591A;&#x5C11;&#x5408;&#x7D04;&#x6216;&#x9019;&#x4E9B;&#x5408;&#x7D04;&#x5728;&#x88AB;&#x8ABF;&#x7528;&#x6642;&#x57F7;&#x884C;&#x7684;&#x662F;&#x4EC0;&#x9EBC;&#x3002;&#x4EA4;&#x6613;&#x5B8C;&#x5168;&#x57F7;&#x884C;&#xFF0C;&#x50C5;&#x5728;&#x4EA4;&#x6613;&#x6210;&#x529F;&#x7D42;&#x6B62;&#x6642;&#x8A18;&#x9304;&#x5168;&#x5C40;&#x72C0;&#x614B;&#xFF08;&#x5408;&#x7D04;&#xFF0C;&#x5E33;&#x6236;&#x7B49;&#xFF09;&#x7684;&#x4EFB;&#x4F55;&#x66F4;&#x6539;&#x3002;&#x6210;&#x529F;&#x7D42;&#x6B62;&#x610F;&#x5473;&#x8457;&#x7A0B;&#x5F0F;&#x57F7;&#x884C;&#x6642;&#x6C92;&#x6709;&#x932F;&#x8AA4;&#x4E26;&#x4E14;&#x9054;&#x5230;&#x57F7;&#x884C;&#x7D50;&#x675F;&#x3002;&#x5982;&#x679C;&#x4EA4;&#x6613;&#x7531;&#x65BC;&#x932F;&#x8AA4;&#x800C;&#x5931;&#x6557;&#xFF0C;&#x5247;&#x5176;&#x6240;&#x6709;&#x6548;&#x679C;&#xFF08;&#x72C0;&#x614B;&#x8B8A;&#x5316;&#xFF09;&#x90FD;&#x6703;&#x201C;&#x56DE;&#x6EFE;&#x201D;&#xFF0C;&#x5C31;&#x597D;&#x50CF;&#x4EA4;&#x6613;&#x5F9E;&#x672A;&#x904B;&#x884C;&#x4E00;&#x6A23;&#x3002;&#x5931;&#x6557;&#x7684;&#x4EA4;&#x6613;&#x4ECD;&#x5132;&#x5B58;&#x5728;&#x5340;&#x584A;&#x93C8;&#x4E2D;&#xFF0C;&#x4E26;&#x5F9E;&#x539F;&#x59CB;&#x5E33;&#x6236;&#x6263;&#x9664;gas&#x6210;&#x672C;&#xFF0C;&#x4F46;&#x5C0D;&#x5408;&#x7D04;&#x6216;&#x5E33;&#x6236;&#x72C0;&#x614B;&#x6C92;&#x6709;&#x5176;&#x4ED6;&#x5F71;&#x97FF;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5408;&#x7D04;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x4E0D;&#x80FD;&#x66F4;&#x6539;&#x3002;&#x7136;&#x800C;&#x5408;&#x7D04;&#x53EF;&#x4EE5;&#x88AB;&#x201C;&#x522A;&#x9664;&#x201D;&#xFF0C;&#x5F9E;&#x5340;&#x584A;&#x93C8;&#x4E0A;&#x522A;&#x9664;&#x7A0B;&#x5F0F;&#x78BC;&#x548C;&#x5B83;&#x7684;&#x5167;&#x90E8;&#x72C0;&#x614B;&#xFF08;&#x8B8A;&#x6578;&#xFF09;&#x3002;&#x8981;&#x522A;&#x9664;&#x5408;&#x7D04;&#xFF0C;&#x4F60;&#x9700;&#x8981;&#x57F7;&#x884C;&#x7A31;&#x70BA; SELFDESTRUCT&#xFF08;&#x4EE5;&#x524D;&#x7A31;&#x70BA; SUICIDE &#xFF09;&#x7684;EVM&#x64CD;&#x4F5C;&#x78BC;&#xFF0C;&#x8A72;&#x64CD;&#x4F5C;&#x78BC;&#x5C07;&#x5340;&#x584A;&#x93C8;&#x4E2D;&#x7684;&#x5408;&#x7D04;&#x79FB;&#x9664;&#x3002;&#x8A72;&#x64CD;&#x4F5C;&#x82B1;&#x8CBB;&#x201C;&#x8CA0;&#x7684;gas&#x201D;&#xFF0C;&#x5F9E;&#x800C;&#x6FC0;&#x52F5;&#x5132;&#x5B58;&#x72C0;&#x614B;&#x7684;&#x91CB;&#x653E;&#x3002;&#x4EE5;&#x9019;&#x7A2E;&#x65B9;&#x5F0F;&#x522A;&#x9664;&#x5408;&#x7D04;&#x4E0D;&#x6703;&#x522A;&#x9664;&#x5408;&#x7D04;&#x7684;&#x4EA4;&#x6613;&#x6B77;&#x53F2;&#xFF08;&#x904E;&#x53BB;&#xFF09;&#xFF0C;&#x56E0;&#x70BA;&#x5340;&#x584A;&#x93C8;&#x672C;&#x8EAB;&#x662F;&#x4E0D;&#x53EF;&#x8B8A;&#x7684;&#x3002;&#x4F46;&#x5B83;&#x78BA;&#x5BE6;&#x6703;&#x5F9E;&#x6240;&#x6709;&#x672A;&#x4F86;&#x7684;&#x5340;&#x584A;&#x4E2D;&#x79FB;&#x9664;&#x5408;&#x7D04;&#x72C0;&#x614B;&#x3002;</p>
</div>
</div>
<div class="sect2">
<h3 id="high_level_languages">&#x4EE5;&#x592A;&#x574A;&#x9AD8;&#x968E;&#x8A9E;&#x8A00;&#x7C21;&#x4ECB;</h3>
<div class="paragraph">
<p>EVM&#x662F;&#x4E00;&#x81FA;&#x865B;&#x64EC;&#x8A08;&#x7B97;&#x6A5F;&#xFF0C;&#x904B;&#x884C;&#x4E00;&#x7A2E;&#x7279;&#x6B8A;&#x5F62;&#x5F0F;&#x7684; <em>&#x6A5F;&#x5668;&#x7A0B;&#x5F0F;&#x78BC;</em> &#xFF0C;&#x7A31;&#x70BA;_EVM  Bytecode _&#xFF0C;&#x5C31;&#x50CF;&#x4F60;&#x7684;&#x8A08;&#x7B97;&#x6A5F;CPU&#x904B;&#x884C;&#x6A5F;&#x5668;&#x7A0B;&#x5F0F;&#x78BC;x86_64&#x4E00;&#x6A23;&#x3002;&#x6211;&#x5011;&#x5C07;&#x5728; <a href="#evm">[evm]</a> &#x4E2D;&#x66F4;&#x8A73;&#x7D30;&#x5730;&#x6AA2;&#x67E5;EVM&#x7684;&#x64CD;&#x4F5C;&#x548C;&#x8A9E;&#x8A00;&#x3002;&#x5728;&#x672C;&#x7BC0;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x4ECB;&#x7D39;&#x5982;&#x4F55;&#x7DE8;&#x5BEB;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x4EE5;&#x5728;EVM&#x4E0A;&#x904B;&#x884C;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x96D6;&#x7136;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x5728; Bytecode &#x4E2D;&#x7DE8;&#x5BEB;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x3002;EVM Bytecode &#x975E;&#x5E38;&#x7B28;&#x91CD;&#xFF0C;&#x958B;&#x767C;&#x8005;&#x96E3;&#x4EE5;&#x95B1;&#x8B80;&#x548C;&#x7406;&#x89E3;&#x3002;&#x76F8;&#x53CD;&#xFF0C;&#x5927;&#x591A;&#x6578;&#x4EE5;&#x592A;&#x574A;&#x958B;&#x767C;&#x4EBA;&#x54E1;&#x4F7F;&#x7528;&#x9AD8;&#x7D1A;&#x7B26;&#x865F;&#x8A9E;&#x8A00;&#x7DE8;&#x5BEB;&#x7A0B;&#x5F0F;&#x548C;&#x7DE8;&#x8B6F;&#x5668;&#xFF0C;&#x5C07;&#x5B83;&#x5011;&#x8F49;&#x63DB;&#x70BA; Bytecode &#x3002;</p>
</div>
<div class="paragraph">
<p>&#x96D6;&#x7136;&#x4EFB;&#x4F55;&#x9AD8;&#x968E;&#x8A9E;&#x8A00;&#x90FD;&#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x7DE8;&#x5BEB;&#x667A;&#x80FD;&#x5408;&#x7D04;&#xFF0C;&#x4F46;&#x9019;&#x662F;&#x4E00;&#x9805;&#x975E;&#x5E38;&#x7E41;&#x7463;&#x7684;&#x5DE5;&#x4F5C;&#x3002;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x5728;&#x9AD8;&#x5EA6;&#x7D04;&#x675F;&#x548C;&#x7C21;&#x7D04;&#x7684;&#x57F7;&#x884C;&#x74B0;&#x5883;&#xFF08;EVM&#xFF09;&#x4E2D;&#x904B;&#x884C;&#xFF0C;&#x5E7E;&#x4E4E;&#x6240;&#x6709;&#x901A;&#x5E38;&#x7684;&#x7528;&#x6236;&#x754C;&#x9762;&#xFF0C;&#x4F5C;&#x696D;&#x7CFB;&#x7D71;&#x754C;&#x9762;&#x548C;&#x786C;&#x9AD4;&#x754C;&#x9762;&#x90FD;&#x662F;&#x7F3A;&#x5931;&#x7684;&#x3002;&#x5F9E;&#x982D;&#x958B;&#x59CB;&#x69CB;&#x5EFA;&#x4E00;&#x500B;&#x7C21;&#x7D04;&#x7684;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x8A9E;&#x8A00;&#x8981;&#x6BD4;&#x9650;&#x5236;&#x901A;&#x7528;&#x8A9E;&#x8A00;&#x4E26;&#x4F7F;&#x5176;&#x9069;&#x7528;&#x65BC;&#x7DE8;&#x5BEB;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x66F4;&#x5BB9;&#x6613;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x70BA;&#x7DE8;&#x7A0B;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x51FA;&#x73FE;&#x4E86;&#x4E00;&#x4E9B;&#x5C08;&#x7528;&#x8A9E;&#x8A00;&#x3002;&#x4EE5;&#x592A;&#x574A;&#x6709;&#x5E7E;&#x7A2E;&#x9019;&#x6A23;&#x7684;&#x8A9E;&#x8A00;&#xFF0C;&#x4EE5;&#x53CA;&#x7522;&#x751F;EVM&#x53EF;&#x57F7;&#x884C; Bytecode &#x6240;&#x9700;&#x7684;&#x7DE8;&#x8B6F;&#x5668;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4E00;&#x822C;&#x4F86;&#x8AAA;&#xFF0C;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x53EF;&#x4EE5;&#x5206;&#x70BA;&#x5169;&#x7A2E;&#x5EE3;&#x6CDB;&#x7684;&#x7DE8;&#x7A0B;&#x7BC4;&#x5F0F;&#xFF1A;&#x5206;&#x5225;&#x662F;&#x5BA3;&#x544A;&#x5F0F;&#x548C;&#x547D;&#x4EE4;&#x5F0F;&#xFF0C;&#x4E5F;&#x5206;&#x5225;&#x7A31;&#x70BA;&#x201C;&#x51FD;&#x6578;&#x5F0F;&#x201D;&#x548C;&#x201C;&#x904E;&#x7A0B;&#x5F0F;&#x201D;&#x3002;&#x5728;&#x5BA3;&#x544A;&#x5F0F;&#x7DE8;&#x7A0B;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x7DE8;&#x5BEB;&#x7684;&#x51FD;&#x6578;&#x8868;&#x793A;&#x7A0B;&#x5F0F;&#x7684; <em>&#x908F;&#x8F2F;</em> <em>logic</em>&#xFF0C;&#x800C;&#x4E0D;&#x662F; <em>&#x6D41;&#x7A0B;</em> <em>flow</em>&#x3002;&#x5BA3;&#x544A;&#x5F0F;&#x7DE8;&#x7A0B;&#x7528;&#x65BC;&#x5275;&#x5EFA;&#x6C92;&#x6709; <em>&#x526F;&#x4F5C;&#x7528;</em> <em>side effects</em> &#x7684;&#x7A0B;&#x5F0F;&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x5728;&#x51FD;&#x6578;&#x4E4B;&#x5916;&#x6C92;&#x6709;&#x72C0;&#x614B;&#x8B8A;&#x5316;&#x3002;&#x5BA3;&#x544A;&#x5F0F;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x5305;&#x62EC;Haskell&#xFF0C;SQL&#x548C;HTML&#x7B49;&#x3002;&#x76F8;&#x53CD;&#xFF0C;&#x547D;&#x4EE4;&#x5F0F;&#x7DE8;&#x7A0B;&#x5C31;&#x662F;&#x958B;&#x767C;&#x8005;&#x7DE8;&#x5BEB;&#x4E00;&#x5957;&#x7A0B;&#x5F0F;&#x7684;&#x908F;&#x8F2F;&#x548C;&#x6D41;&#x7A0B;&#x7D50;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x7A0B;&#x5F0F;&#x3002;&#x547D;&#x4EE4;&#x5F0F;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x5305;&#x62EC;&#x4F8B;&#x5982;BASIC&#xFF0C;C&#xFF0C;C++&#x548C;Java&#x3002;&#x6709;&#x4E9B;&#x8A9E;&#x8A00;&#x662F;&#x201C;&#x6DF7;&#x5408;&#x201D;&#x7684;&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x4ED6;&#x5011;&#x9F13;&#x52F5;&#x5BA3;&#x544A;&#x5F0F;&#x7DE8;&#x7A0B;&#xFF0C;&#x4F46;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x8868;&#x9054;&#x4E00;&#x500B;&#x5FC5;&#x8981;&#x7684;&#x7DE8;&#x7A0B;&#x7BC4;&#x5F0F;&#x3002;&#x9019;&#x6A23;&#x7684;&#x6DF7;&#x5408;&#x9AD4;&#x5305;&#x62EC;Lisp&#xFF0C;Erlang&#xFF0C;Prolog&#xFF0C;JavaScript&#x548C;Python&#x3002;&#x4E00;&#x822C;&#x4F86;&#x8AAA;&#xFF0C;&#x4EFB;&#x4F55;&#x547D;&#x4EE4;&#x5F0F;&#x8A9E;&#x8A00;&#x90FD;&#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x5728;&#x5BA3;&#x544A;&#x5F0F;&#x7684;&#x7BC4;&#x5F0F;&#x4E2D;&#x7DE8;&#x5BEB;&#xFF0C;&#x4F46;&#x5B83;&#x901A;&#x5E38;&#x6703;&#x5C0E;&#x81F4;&#x4E0D;&#x96C5;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x3002;&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;&#xFF0C;&#x7D14;&#x7CB9;&#x7684;&#x5BA3;&#x544A;&#x5F0F;&#x8A9E;&#x8A00;&#x4E0D;&#x80FD;&#x7528;&#x4F86;&#x5BEB;&#x5165;&#x4E00;&#x500B;&#x547D;&#x4EE4;&#x5F0F;&#x7684;&#x7BC4;&#x4F8B;&#x3002;&#x5728;&#x7D14;&#x7CB9;&#x7684;&#x5BA3;&#x544A;&#x5F0F;&#x8A9E;&#x8A00;&#x4E2D;&#xFF0C;<em>&#x6C92;&#x6709;&#x201C;&#x8B8A;&#x6578;&#x201D;</em>&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x96D6;&#x7136;&#x547D;&#x4EE4;&#x5F0F;&#x7DE8;&#x7A0B;&#x66F4;&#x6613;&#x65BC;&#x7DE8;&#x5BEB;&#x548C;&#x8B80;&#x53D6;&#xFF0C;&#x4E26;&#x4E14;&#x958B;&#x767C;&#x8005;&#x66F4;&#x5E38;&#x7528;&#xFF0C;&#x4F46;&#x7DE8;&#x5BEB;&#x6309;&#x9810;&#x671F;&#x65B9;&#x5F0F; <em>&#x6E96;&#x78BA;</em> &#x57F7;&#x884C;&#x7684;&#x7A0B;&#x5F0F;&#x53EF;&#x80FD;&#x975E;&#x5E38;&#x56F0;&#x96E3;&#x3002;&#x7A0B;&#x5F0F;&#x7684;&#x4EFB;&#x4F55;&#x90E8;&#x5206;&#x6539;&#x8B8A;&#x72C0;&#x614B;&#x7684;&#x80FD;&#x529B;&#x4F7F;&#x5F97;&#x5F88;&#x96E3;&#x63A8;&#x65B7;&#x7A0B;&#x5F0F;&#x7684;&#x57F7;&#x884C;&#xFF0C;&#x4E26;&#x5F15;&#x5165;&#x8A31;&#x591A;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x526F;&#x4F5C;&#x7528;&#x548C;&#x932F;&#x8AA4;&#x3002;&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;&#xFF0C;&#x5BA3;&#x544A;&#x5F0F;&#x7DE8;&#x7A0B;&#x66F4;&#x96E3;&#x4EE5;&#x7DE8;&#x5BEB;&#xFF0C;&#x4F46;&#x907F;&#x514D;&#x4E86;&#x526F;&#x4F5C;&#x7528;&#xFF0C;&#x4F7F;&#x5F97;&#x66F4;&#x5BB9;&#x6613;&#x7406;&#x89E3;&#x7A0B;&#x5F0F;&#x7684;&#x884C;&#x70BA;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7D66;&#x958B;&#x767C;&#x8005;&#x5E36;&#x4F86;&#x4E86;&#x5F88;&#x5927;&#x7684;&#x8CA0;&#x64D4;&#xFF1A;&#x932F;&#x8AA4;&#x6703;&#x82B1;&#x8CBB;&#x91D1;&#x9322;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x7DE8;&#x5BEB;&#x4E0D;&#x6703;&#x7522;&#x751F;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x5F71;&#x97FF;&#x7684;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x81F3;&#x95DC;&#x91CD;&#x8981;&#x3002;&#x8981;&#x505A;&#x5230;&#x9019;&#x4E00;&#x9EDE;&#xFF0C;&#x4F60;&#x5FC5;&#x9808;&#x80FD;&#x5920;&#x6E05;&#x695A;&#x5730;&#x63A8;&#x65B7;&#x7A0B;&#x5F0F;&#x7684;&#x9810;&#x671F;&#x884C;&#x70BA;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5BA3;&#x544A;&#x5F0F;&#x8A9E;&#x8A00;&#x5728;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x4E2D;&#x6BD4;&#x5728;&#x901A;&#x7528;&#x8EDF;&#x9AD4;&#x4E2D;&#x626E;&#x6F14;&#x66F4;&#x91CD;&#x8981;&#x7684;&#x89D2;&#x8272;&#x3002;&#x4E0D;&#x904E;&#xFF0C;&#x6B63;&#x5982;&#x4F60;&#x5C07;&#x5728;&#x4E0B;&#x9762;&#x770B;&#x5230;&#x7684;&#x90A3;&#x6A23;&#xFF0C;&#x6700;&#x8C50;&#x5BCC;&#x7684;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x8A9E;&#x8A00;&#x662F;&#x547D;&#x4EE4;&#x5F0F;&#x7684;&#xFF08;Solidity&#xFF09;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x9AD8;&#x7D1A;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x5305;&#x62EC;&#xFF08;&#x6309;&#x5927;&#x6982;&#x7684;&#x5E74;&#x9F61;&#x6392;&#x5E8F;&#xFF09;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">LLL</dt>
<dd>
<p>&#x4E00;&#x7A2E;&#x51FD;&#x6578;&#x5F0F;&#xFF08;&#x5BA3;&#x544A;&#x5F0F;&#xFF09;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#xFF0C;&#x5177;&#x6709;&#x985E;&#x4F3C;Lisp&#x7684;&#x8A9E;&#x6CD5;&#x3002;&#x9019;&#x662F;&#x4EE5;&#x592A;&#x574A;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x7B2C;&#x4E00;&#x500B;&#x9AD8;&#x968E;&#x8A9E;&#x8A00;&#xFF0C;&#x4F46;&#x4ECA;&#x5929;&#x5F88;&#x5C11;&#x4F7F;&#x7528;&#x3002;</p>
</dd>
<dt class="hdlist1">Serpent</dt>
<dd>
<p>&#x4E00;&#x7A2E;&#x904E;&#x7A0B;&#x5F0F;&#xFF08;&#x547D;&#x4EE4;&#x5F0F;&#xFF09;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#xFF0C;&#x5176;&#x8A9E;&#x6CD5;&#x985E;&#x4F3C;&#x65BC;Python&#x3002;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x7DE8;&#x5BEB;&#x51FD;&#x6578;&#x5F0F;&#xFF08;&#x5BA3;&#x544A;&#x5F0F;&#xFF09;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0C;&#x5118;&#x7BA1;&#x5B83;&#x4E26;&#x4E0D;&#x5B8C;&#x5168;&#x6C92;&#x6709;&#x526F;&#x4F5C;&#x7528;&#x3002;&#x5F88;&#x5C11;&#x88AB;&#x4F7F;&#x7528;&#x3002;&#x6700;&#x65E9;&#x7531;Vitalik Buterin&#x5275;&#x5EFA;&#x3002;</p>
</dd>
<dt class="hdlist1">Solidity</dt>
<dd>
<p>&#x5177;&#x6709;&#x985E;&#x4F3C;&#x65BC;JavaScript&#xFF0C;C ++&#x6216;Java&#x8A9E;&#x6CD5;&#x7684;&#x904E;&#x7A0B;&#x5F0F;&#xFF08;&#x547D;&#x4EE4;&#x5F0F;&#xFF09;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x3002;&#x4EE5;&#x592A;&#x574A;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x4E2D;&#x6700;&#x6D41;&#x884C;&#x548C;&#x6700;&#x5E38;&#x7528;&#x7684;&#x8A9E;&#x8A00;&#x3002;&#x6700;&#x521D;&#x7531;Gavin Wood&#xFF08;&#x672C;&#x66F8;&#x7684;&#x5408;&#x8457;&#x8005;&#xFF09;&#x5275;&#x4F5C;&#x3002;</p>
</dd>
<dt class="hdlist1">Vyper</dt>
<dd>
<p>&#x6700;&#x8FD1;&#x958B;&#x767C;&#x7684;&#x8A9E;&#x8A00;&#xFF0C;&#x985E;&#x4F3C;&#x65BC;Serpent&#xFF0C;&#x4E26;&#x4E14;&#x5177;&#x6709;&#x985E;&#x4F3C;Python&#x7684;&#x8A9E;&#x6CD5;&#x3002;&#x65E8;&#x5728;&#x6210;&#x70BA;&#x6BD4;Serpent&#x66F4;&#x63A5;&#x8FD1;&#x7D14;&#x7CB9;&#x51FD;&#x6578;&#x5F0F;&#x7684;&#x985E;Python&#x8A9E;&#x8A00;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x53D6;&#x4EE3;Serpent&#x3002;&#x6700;&#x65E9;&#x7531;Vitalik Buterin&#x5275;&#x5EFA;&#x3002;</p>
</dd>
<dt class="hdlist1">Bamboo</dt>
<dd>
<p>&#x4E00;&#x7A2E;&#x65B0;&#x958B;&#x767C;&#x7684;&#x8A9E;&#x8A00;&#xFF0C;&#x53D7;Erlang&#x5F71;&#x97FF;&#xFF0C;&#x5177;&#x6709;&#x660E;&#x78BA;&#x7684;&#x72C0;&#x614B;&#x8F49;&#x63DB;&#x4E26;&#x4E14;&#x6C92;&#x6709;&#x8FED;&#x4EE3;&#x6D41;&#xFF08;&#x8FF4;&#x5708;&#xFF09;&#x3002;&#x65E8;&#x5728;&#x6E1B;&#x5C11;&#x526F;&#x4F5C;&#x7528;&#x4E26;&#x63D0;&#x9AD8;&#x53EF;&#x5BE9;&#x8A08;&#x6027;&#x3002;&#x975E;&#x5E38;&#x65B0;&#xFF0C;&#x5F88;&#x5C11;&#x4F7F;&#x7528;&#x3002;</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>&#x5982;&#x4F60;&#x6240;&#x898B;&#xFF0C;&#x6709;&#x5F88;&#x591A;&#x8A9E;&#x8A00;&#x53EF;&#x4F9B;&#x9078;&#x64C7;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5728;&#x6240;&#x6709;&#x9019;&#x4E9B;&#x4E2D;&#xFF0C;Solidity&#x662F;&#x8FC4;&#x4ECA;&#x70BA;&#x6B62;&#x6700;&#x53D7;&#x6B61;&#x8FCE;&#x7684;&#xFF0C;&#x4EE5;&#x81F3;&#x65BC;&#x6210;&#x70BA;&#x4E86;&#x4EE5;&#x592A;&#x574A;&#x751A;&#x81F3;&#x662F;&#x5176;&#x4ED6;&#x985E;&#x4F3C;EVM&#x7684;&#x5340;&#x584A;&#x93C8;&#x7684;&#x4E8B;&#x5BE6;&#x4E0A;&#x7684;&#x9AD8;&#x968E;&#x8A9E;&#x8A00;&#x3002;&#x6211;&#x5011;&#x5C07;&#x82B1;&#x5927;&#x90E8;&#x5206;&#x6642;&#x9593;&#x4F7F;&#x7528;Solidity&#xFF0C;&#x4F46;&#x4E5F;&#x6703;&#x63A2;&#x7D22;&#x5176;&#x4ED6;&#x9AD8;&#x968E;&#x8A9E;&#x8A00;&#x7684;&#x4E00;&#x4E9B;&#x4F8B;&#x5B50;&#xFF0C;&#x4EE5;&#x77AD;&#x89E3;&#x5176;&#x4E0D;&#x540C;&#x7684;&#x54F2;&#x5B78;&#x3002;</p>
</div>
</div>
<div class="sect2">
<h3 id="building_a_smart_contract_sec">&#x7528;Solidity&#x69CB;&#x5EFA;&#x667A;&#x80FD;&#x5408;&#x7D04;</h3>
<div class="paragraph">
<p>&#x4F86;&#x81EA;&#x7DAD;&#x57FA;&#x767E;&#x79D1;&#xFF1A;</p>
</div>
<div class="quoteblock">
<blockquote>
Solidity&#x662F;&#x7DE8;&#x5BEB;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x201C;&#x9762;&#x5411;&#x5408;&#x7D04;&#x7684;&#x201D;&#x7A0B;&#x5F0F;&#x8A9E;&#x8A00;&#x3002;&#x5B83;&#x7528;&#x65BC;&#x5728;&#x5404;&#x7A2E;&#x5340;&#x584A;&#x93C8;&#x5E73;&#x81FA;&#x4E0A;&#x5BE6;&#x65BD;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x3002;&#x5B83;&#x7531;Gavin Wood&#xFF0C;Christian Reitwiessner&#xFF0C;Alex Beregszaszi&#xFF0C;Liana Husikyan&#xFF0C;Yoichi Hirai&#x548C;&#x5E7E;&#x4F4D;&#x4EE5;&#x524D;&#x7684;&#x4EE5;&#x592A;&#x574A;&#x6838;&#x5FC3;&#x8CA2;&#x737B;&#x8005;&#x958B;&#x767C;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x5340;&#x584A;&#x93C8;&#x5E73;&#x81FA;&#xFF08;&#x5982;&#x4EE5;&#x592A;&#x574A;&#xFF09;&#x4E0A;&#x7DE8;&#x5BEB;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x3002;
</blockquote>
<div class="attribution">
&#x2014; Wikipedia entry for Solidity
</div>
</div>
<div class="paragraph">
<p>Solidity&#x7531;GitHub&#x4E0A;&#x7684;Solidity&#x9805;&#x76EE;&#x958B;&#x767C;&#x5718;&#x968A;&#x958B;&#x767C;&#x4E26;&#x7DAD;&#x8B77;&#xFF1A;</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/ethereum/solidity" class="bare" target="_blank">https://github.com/ethereum/solidity</a></p>
</div>
<div class="paragraph">
<p>Solidity&#x9805;&#x76EE;&#x7684;&#x4E3B;&#x8981;&#x201C;&#x7522;&#x54C1;&#x201D;&#x662F;<em>Solidity Compiler&#xFF08;solc&#xFF09;</em>&#xFF0C;&#x5B83;&#x5C07;&#x7528;Solidity&#x8A9E;&#x8A00;&#x7DE8;&#x5BEB;&#x7684;&#x7A0B;&#x5F0F;&#x8F49;&#x63DB;&#x70BA;EVM Bytecode &#xFF0C;&#x4E26;&#x751F;&#x6210;&#x5176;&#x4ED6;&#x88FD;&#x54C1;&#xFF0C;&#x5982;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x4E8C;&#x9032;&#x5236;&#x63A5;&#x53E3;&#xFF08;ABI&#xFF09;&#x3002;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x7684;&#x6BCF;&#x500B;&#x7248;&#x672C;&#x90FD;&#x5C0D;&#x61C9;&#x65BC;&#x4E26;&#x7DE8;&#x8B6F;Solidity&#x8A9E;&#x8A00;&#x7684;&#x7279;&#x5B9A;&#x7248;&#x672C;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8981;&#x958B;&#x59CB;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x4E0B;&#x8F09;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x7684;&#x4E8C;&#x9032;&#x5236;&#x53EF;&#x57F7;&#x884C;&#x6A94;&#x6848;&#x3002;&#x7136;&#x5F8C;&#x6211;&#x5011;&#x6703;&#x7DE8;&#x5BEB;&#x4E00;&#x500B;&#x7C21;&#x55AE;&#x7684;&#x5408;&#x7D04;&#x3002;</p>
</div>
<div class="sect3">
<h4 id="__solidity">&#x9078;&#x64C7;&#x4E00;&#x500B;Solidity&#x7248;&#x672C;</h4>
<div class="paragraph">
<p>Solidity&#x9075;&#x5FAA;&#x4E00;&#x500B;&#x7A31;&#x70BA;<em>semantic versioning</em>&#xFF08;https://semver.org/&#xFF09;&#x7684;&#x7248;&#x672C;&#x6A21;&#x578B;&#xFF0C;&#x8A72;&#x6A21;&#x578B;&#x6307;&#x5B9A;&#x7248;&#x672C;&#x865F;&#x7D50;&#x69CB;&#x70BA;&#x7531;&#x9EDE;&#x5206;&#x9694;&#x7684;&#x4E09;&#x500B;&#x6578;&#x5B57;&#xFF1A;MAJOR.MINOR.PATCH&#x3002;&quot;major&quot;&#x7528;&#x65BC;&#x5C0D;&#x4E3B;&#x8981;&#x7684;&#x548C;&#x201C;&#x5411;&#x524D;&#x4E0D;&#x517C;&#x5BB9;&#x201D;&#x7684;&#x66F4;&#x6539;&#x7684;&#x905E;&#x589E;&#xFF0C;&#x201C;minor&#x201D;&#x5728;&#x4E3B;&#x8981;&#x7248;&#x672C;&#x4E4B;&#x9593;&#x6DFB;&#x52A0;&#x201C;&#x5411;&#x524D;&#x517C;&#x5BB9;&#x529F;&#x80FD;&#x201C;&#x6642;&#x905E;&#x589E;&#xFF0C;&#x201C;patch&#x201D;&#x8868;&#x793A;&#x932F;&#x8AA4;&#x4FEE;&#x5FA9;&#x548C;&#x5B89;&#x5168;&#x76F8;&#x95DC;&#x7684;&#x66F4;&#x6539;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x76EE;&#x524D;&#xFF0C;Solidity&#x7684;&#x7248;&#x672C;&#x662F;0.4.21&#xFF0C;&#x5176;&#x4E2D;0.4&#x662F;&#x4E3B;&#x8981;&#x7248;&#x672C;&#xFF0C;21&#x662F;&#x6B21;&#x8981;&#x7248;&#x672C;&#xFF0C;&#x4E4B;&#x5F8C;&#x6307;&#x5B9A;&#x7684;&#x4EFB;&#x4F55;&#x5167;&#x5BB9;&#x90FD;&#x662F;&#x88DC;&#x4E01;&#x7248;&#x672C;&#x3002;Solidity&#x7684;0.5&#x7248;&#x672C;&#x4E3B;&#x8981;&#x7248;&#x672C;&#x5373;&#x5C07;&#x63A8;&#x51FA;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6B63;&#x5982;&#x6211;&#x5011;&#x5728;<a href="#intro">[intro]</a>&#x4E2D;&#x770B;&#x5230;&#x7684;&#x90A3;&#x6A23;&#xFF0C;&#x4F60;&#x7684;Solidity&#x7A0B;&#x5F0F;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4E00;&#x500B;pragma&#x6307;&#x4EE4;&#xFF0C;&#x7528;&#x65BC;&#x6307;&#x5B9A;&#x8207;&#x4E4B;&#x517C;&#x5BB9;&#x7684;Solidity&#x7684;&#x6700;&#x5C0F;&#x548C;&#x6700;&#x5927;&#x7248;&#x672C;&#xFF0C;&#x4E26;&#x4E14;&#x53EF;&#x7528;&#x65BC;&#x7DE8;&#x8B6F;&#x4F60;&#x7684;&#x5408;&#x7D04;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x7531;&#x65BC;Solidity&#x6B63;&#x5728;&#x5FEB;&#x901F;&#x767C;&#x5C55;&#xFF0C;&#x6700;&#x597D;&#x59CB;&#x7D42;&#x4F7F;&#x7528;&#x6700;&#x65B0;&#x7248;&#x672C;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="__">&#x4E0B;&#x8F09;/&#x5B89;&#x88DD;</h4>
<div class="paragraph">
<p>&#x6709;&#x8A31;&#x591A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x4E0B;&#x8F09;&#x548C;&#x5B89;&#x88DD;Solidity&#xFF0C;&#x7121;&#x8AD6;&#x662F;&#x4F5C;&#x70BA;&#x4E8C;&#x9032;&#x5236;&#x767C;&#x884C;&#x7248;&#x9084;&#x662F;&#x5F9E;&#x6E90;&#x7A0B;&#x5F0F;&#x78BC;&#x7DE8;&#x8B6F;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5728;Solidity&#x6587;&#x4EF6;&#x4E2D;&#x627E;&#x5230;&#x8A73;&#x7D30;&#x7684;&#x8AAA;&#x660E;&#xFF1A;</p>
</div>
<div class="paragraph">
<p><a href="https://solidity.readthedocs.io/en/latest/installing-solidity.html" class="bare" target="_blank">https://solidity.readthedocs.io/en/latest/installing-solidity.html</a></p>
</div>
<div class="paragraph">
<p>&#x5728;<a href="#install_solidity_ubuntu">Installing solc on Ubuntu/Debian with apt package manager</a>&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x4F7F;&#x7528; apt package manager &#x5728;Ubuntu/Debian&#x4F5C;&#x696D;&#x7CFB;&#x7D71;&#x4E0A;&#x5B89;&#x88DD;Solidity&#x7684;&#x6700;&#x65B0;&#x4E8C;&#x9032;&#x5236;&#x7248;&#x672C;&#xFF1A;</p>
</div>
<div id="install_solidity_ubuntu" class="listingblock">
<div class="title">Installing solc on Ubuntu/Debian with apt package manager</div>
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">$ sudo add-apt-repository ppa:ethereum/ethereum
$ sudo apt update
$ sudo apt install solc</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x4E00;&#x65E6;&#x4F60;&#x5B89;&#x88DD;&#x4E86; solc&#xFF0C;&#x904B;&#x884C;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x4F86;&#x6AA2;&#x67E5;&#x7248;&#x672C;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ solc --version
solc, the solidity compiler commandline interface
Version: 0.4.21+commit.dfe3193c.Linux.g++</pre>
</div>
</div>
<div class="paragraph">
<p>&#x6839;&#x64DA;&#x4F60;&#x7684;&#x4F5C;&#x696D;&#x7CFB;&#x7D71;&#x548C;&#x8981;&#x6C42;&#xFF0C;&#x9084;&#x6709;&#x8A31;&#x591A;&#x5176;&#x4ED6;&#x65B9;&#x5F0F;&#x53EF;&#x4EE5;&#x5B89;&#x88DD;Solidity&#xFF0C;&#x5305;&#x62EC;&#x76F4;&#x63A5;&#x5F9E;&#x6E90;&#x7A0B;&#x5F0F;&#x78BC;&#x7DE8;&#x8B6F;&#x3002;&#x6709;&#x95DC;&#x66F4;&#x591A;&#x8CC7;&#x8A0A;&#xFF0C;&#x8ACB;&#x53C3;&#x95B1;</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/ethereum/solidity" class="bare" target="_blank">https://github.com/ethereum/solidity</a></p>
</div>
</div>
<div class="sect3">
<h4 id="___2">&#x958B;&#x767C;&#x74B0;&#x5883;</h4>
<div class="paragraph">
<p>&#x8981;&#x5728;Solidity&#x4E2D;&#x958B;&#x767C;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E0A;&#x4F7F;&#x7528;&#x4EFB;&#x4F55;&#x6587;&#x5B57;&#x7DE8;&#x8F2F;&#x5668;&#x548C;solc&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x4F60;&#x53EF;&#x80FD;&#x6703;&#x767C;&#x73FE;&#x70BA;&#x958B;&#x767C;&#x800C;&#x8A2D;&#x8A08;&#x7684;&#x4E00;&#x4E9B;&#x6587;&#x5B57;&#x7DE8;&#x8F2F;&#x5668;&#xFF08;&#x4F8B;&#x5982;Atom&#xFF09;&#x63D0;&#x4F9B;&#x4E86;&#x9644;&#x52A0;&#x529F;&#x80FD;&#xFF0C;&#x5982;&#x8A9E;&#x6CD5;&#x7A81;&#x51FA;&#x986F;&#x793A;&#x548C;&#x5B8F;&#xFF0C;&#x9019;&#x4E9B;&#x529F;&#x80FD;&#x4F7F;Solidity&#x958B;&#x767C;&#x8B8A;&#x5F97;&#x66F4;&#x52A0;&#x7C21;&#x55AE;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x9084;&#x6709;&#x57FA;&#x65BC;Web&#x7684;&#x958B;&#x767C;&#x74B0;&#x5883;&#xFF0C;&#x5982;Remix IDE&#xFF08;https://remix.ethereum.org/&#xFF09;&#x548C;EthFiddle&#xFF08;https://ethfiddle.com/&#xFF09;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4F7F;&#x7528;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x751F;&#x7522;&#x529B;&#x7684;&#x5DE5;&#x5177;&#x3002;&#x6700;&#x5F8C;&#xFF0C;Solidity&#x7A0B;&#x5F0F;&#x53EA;&#x662F;&#x7D14;&#x6587;&#x5B57;&#x6A94;&#x6848;&#x3002;&#x96D6;&#x7136;&#x82B1;&#x54E8;&#x7684;&#x7DE8;&#x8F2F;&#x5668;&#x548C;&#x958B;&#x767C;&#x74B0;&#x5883;&#x53EF;&#x4EE5;&#x8B93;&#x4E8B;&#x60C5;&#x8B8A;&#x5F97;&#x66F4;&#x5BB9;&#x6613;&#xFF0C;&#x4F46;&#x9664;&#x4E86;&#x7C21;&#x55AE;&#x7684;&#x6587;&#x5B57;&#x7DE8;&#x8F2F;&#x5668;&#xFF08;&#x5982;vim&#xFF08;Linux / Unix&#xFF09;&#xFF0C;TextEdit&#xFF08;MacOS&#xFF09;&#x751A;&#x81F3;NotePad&#xFF08;Windows&#xFF09;&#xFF09;&#xFF0C;&#x4F60;&#x7121;&#x9700;&#x4EFB;&#x4F55;&#x5176;&#x4ED6;&#x6771;&#x897F;&#x3002;&#x53EA;&#x9700;&#x5C07;&#x7A0B;&#x5F0F;&#x6E90;&#x7A0B;&#x5F0F;&#x78BC;&#x4FDD;&#x5B58;&#x70BA;.sol&#x64F4;&#x5C55;&#x540D;&#x5373;&#x53EF;&#xFF0C;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x5C07;&#x5176;&#x8B58;&#x5225;&#x70BA;Solidity&#x7A0B;&#x5F0F;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="_writing_a_simple_solidity_program">Writing a simple Solidity program</h4>
<div class="paragraph">
<p>&#x5728;<a href="#intro">[intro]</a>&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x7DE8;&#x5BEB;&#x4E86;&#x6211;&#x5011;&#x7684;&#x7B2C;&#x4E00;&#x500B;Solidity&#x7A0B;&#x5F0F;&#xFF0C;&#x540D;&#x70BA;Faucet&#x3002;&#x7576;&#x6211;&#x5011;&#x7B2C;&#x4E00;&#x6B21;&#x69CB;&#x5EFA;Faucet&#x6642;&#xFF0C;&#x6211;&#x5011;&#x4F7F;&#x7528;Remix IDE&#x4F86;&#x7DE8;&#x8B6F;&#x548C;&#x90E8;&#x7F72;&#x5408;&#x7D04;&#x3002;&#x5728;&#x672C;&#x7BC0;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x91CD;&#x65B0;&#x67E5;&#x770B;&#xFF0C;&#x6539;&#x9032;&#x548C;&#x4FEE;&#x98FE;Faucet&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x7684;&#x7B2C;&#x4E00;&#x6B21;&#x5617;&#x8A66;&#x662F;&#x9019;&#x6A23;&#x7684;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="title">Faucet.sol : A Solidity contract implementing a faucet</div>
<div class="content">
<pre class="highlight"><code class="language-solidity" data-lang="solidity">// Our first contract is a faucet!
contract Faucet {

    // Give out ether to anyone who asks
    function withdraw(uint withdraw_amount) public {

        // Limit withdrawal amount
        require(withdraw_amount &lt;= 100000000000000000);

        // Send the amount to the address that requested it
        msg.sender.transfer(withdraw_amount);
    }

    // Accept any incoming amount
    function () public payable {}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x5F9E; <a href="#make_it_better">[make_it_better]</a> &#x958B;&#x59CB;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x5728;&#x7B2C;&#x4E00;&#x500B;&#x7BC4;&#x4F8B;&#x7684;&#x57FA;&#x790E;&#x4E0A;&#x69CB;&#x5EFA;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="__solidity_solc">&#x7528;Solidity&#x7DE8;&#x8B6F;&#x5668;&#xFF08;solc&#xFF09;&#x7DE8;&#x8B6F;</h4>
<div class="paragraph">
<p>&#x73FE;&#x5728;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x4F7F;&#x7528;&#x547D;&#x4EE4;&#x884C;&#x4E0A;&#x7684;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x76F4;&#x63A5;&#x7DE8;&#x8B6F;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x3002;Solidity&#x7DE8;&#x8B6F;&#x5668;solc&#x63D0;&#x4F9B;&#x4E86;&#x591A;&#x7A2E;&#x9078;&#x9805;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x901A;&#x904E;--help&#x53C3;&#x6578;&#x4F86;&#x67E5;&#x770B;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x4F7F;&#x7528;solc&#x7684; --bin &#x548C; --optimize &#x53C3;&#x6578;&#x4F86;&#x751F;&#x6210;&#x6211;&#x5011;&#x7BC4;&#x4F8B;&#x5408;&#x7D04;&#x7684;&#x512A;&#x5316;&#x4E8C;&#x9032;&#x5236;&#x6A94;&#x6848;&#xFF1A;</p>
</div>
<div id="compile_Faucet_with_solc" class="listingblock">
<div class="title">Compiling Faucet.sol with solc</div>
<div class="content">
<pre>$ solc --optimize --bin Faucet.sol
======= Faucet.sol:Faucet =======
Binary:
6060604052341561000f57600080fd5b60cf8061001d6000396000f300606060405260043610603e5763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416632e1a7d4d81146040575b005b3415604a57600080fd5b603e60043567016345785d8a0000811115606357600080fd5b73ffffffffffffffffffffffffffffffffffffffff331681156108fc0282604051600060405180830381858888f19350505050151560a057600080fd5b505600a165627a7a723058203556d79355f2da19e773a9551e95f1ca7457f2b5fbbf4eacf7748ab59d2532130029</pre>
</div>
</div>
<div class="paragraph">
<p>solc&#x7522;&#x751F;&#x7684;&#x7D50;&#x679C;&#x662F;&#x4E00;&#x500B;&#x53EF;&#x4EE5;&#x63D0;&#x4EA4;&#x7D66;&#x4EE5;&#x592A;&#x574A;&#x5340;&#x584A;&#x93C8;&#x7684;&#x5341;&#x516D;&#x9032;&#x5236;&#x5E8F;&#x5217;&#x5316;&#x4E8C;&#x9032;&#x5236;&#x6A94;&#x6848;&#x3002;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="eth_contract_abi_sec">&#x4EE5;&#x592A;&#x574A;&#x5408;&#x7D04;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x4E8C;&#x9032;&#x5236;&#x63A5;&#x53E3;&#xFF08;ABI&#xFF09;</h3>
<div class="paragraph">
<p>&#x5728;&#x8A08;&#x7B97;&#x6A5F;&#x8EDF;&#x9AD4;&#x4E2D;&#xFF0C;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x4E8C;&#x9032;&#x5236;&#x63A5;&#x53E3;&#xFF08;ABI&#xFF09;&#x662F;&#x5169;&#x500B;&#x7A0B;&#x5F0F;&#x6A21;&#x584A;&#x4E4B;&#x9593;&#x7684;&#x63A5;&#x53E3;&#xFF1B;&#x901A;&#x5E38;&#xFF0C;&#x4E00;&#x500B;&#x5728;&#x6A5F;&#x5668;&#x7A0B;&#x5F0F;&#x78BC;&#x7D1A;&#x5225;&#xFF0C;&#x53E6;&#x4E00;&#x500B;&#x5728;&#x7528;&#x6236;&#x904B;&#x884C;&#x7684;&#x7A0B;&#x5F0F;&#x7D1A;&#x5225;&#x3002;ABI&#x5B9A;&#x7FA9;&#x4E86;&#x5982;&#x4F55;&#x5728;<strong>&#x6A5F;&#x5668;&#x78BC;</strong>&#x4E2D;&#x8A2A;&#x554F;&#x8CC7;&#x6599;&#x7D50;&#x69CB;&#x548C;&#x529F;&#x80FD;&#xFF1B;&#x4E0D;&#x8981;&#x8207;API&#x6DF7;&#x6DC6;&#xFF0C;API&#x4EE5;&#x9AD8;&#x7D1A;&#x7684;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x4EBA;&#x985E;&#x53EF;&#x8B80;&#x7684;&#x683C;&#x5F0F;&#x5C07;&#x8A2A;&#x554F;&#x5B9A;&#x7FA9;&#x70BA;<strong>&#x6E90;&#x7A0B;&#x5F0F;&#x78BC;</strong>&#x3002;&#x56E0;&#x6B64;&#xFF0C;ABI&#x662F;&#x5C07;&#x6578;&#x64DA;&#x7DE8;&#x78BC;&#x5230;&#x6A5F;&#x5668;&#x78BC;&#xFF0C;&#x548C;&#x5F9E;&#x6A5F;&#x5668;&#x78BC;&#x89E3;&#x78BC;&#x6578;&#x64DA;&#x7684;&#x4E3B;&#x8981;&#x65B9;&#x5F0F;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;&#x4EE5;&#x592A;&#x574A;&#x4E2D;&#xFF0C;ABI&#x7528;&#x65BC;&#x7DE8;&#x78BC;EVM&#x7684;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#xFF0C;&#x4E26;&#x5F9E;&#x4EA4;&#x6613;&#x4E2D;&#x8B80;&#x53D6;&#x6578;&#x64DA;&#x3002;ABI&#x7684;&#x76EE;&#x7684;&#x662F;&#x5B9A;&#x7FA9;&#x5408;&#x7D04;&#x4E2D;&#x7684;&#x54EA;&#x4E9B;&#x51FD;&#x6578;&#x53EF;&#x4EE5;&#x88AB;&#x8ABF;&#x7528;&#xFF0C;&#x4E26;&#x63CF;&#x8FF0;&#x51FD;&#x6578;&#x5982;&#x4F55;&#x63A5;&#x53D7;&#x53C3;&#x6578;&#x4E26;&#x8FD4;&#x56DE;&#x6578;&#x64DA;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5408;&#x7D04;ABI&#x7684;JSON&#x683C;&#x5F0F;&#x7531;&#x4E00;&#x7CFB;&#x5217;&#x51FD;&#x6578;&#x63CF;&#x8FF0;&#xFF08;&#x53C3;&#x898B;<a href="#solidity_functions">[solidity_functions]</a>&#xFF09;&#x548C;&#x4E8B;&#x4EF6;&#xFF08;&#x53C3;&#x898B;<a href="#solidity_events">[solidity_events]</a>&#xFF09;&#x7684;&#x9663;&#x5217;&#x7D66;&#x51FA;&#x3002;&#x51FD;&#x6578;&#x63CF;&#x8FF0;&#x662F;&#x4E00;&#x500B;JSON&#x7269;&#x4EF6;&#xFF0C;&#x5B83;&#x5305;&#x542B;<code>type</code>&#xFF0C;<code>name</code>&#xFF0C;<code>inputs</code>&#xFF0C;<code>outputs</code>&#xFF0C;<code>constant</code>&#x548C;<code>payable</code>&#x6B04;&#x4F4D;&#x3002;&#x4E8B;&#x4EF6;&#x63CF;&#x8FF0;&#x7269;&#x4EF6;&#x5177;&#x6709;<code>type</code>&#xFF0C;<code>name</code>&#xFF0C;<code>inputs</code>&#x548C;<code>anonymous</code>&#x7684;&#x6B04;&#x4F4D;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x4F7F;&#x7528;solc&#x547D;&#x4EE4;&#x884C;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x70BA;&#x6211;&#x5011;&#x7684;Faucet.sol&#x7BC4;&#x4F8B;&#x5408;&#x7D04;&#x751F;&#x6210;ABI&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>solc --abi Faucet.sol
======= Faucet.sol:Faucet =======
Contract JSON ABI
[{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;withdraw_amount&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;withdraw&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;payable&quot;:true,&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;fallback&quot;}]</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5982;&#x4F60;&#x6240;&#x898B;&#xFF0C;&#x7DE8;&#x8B6F;&#x5668;&#x6703;&#x751F;&#x6210;&#x4E00;&#x500B;&#x63CF;&#x8FF0;&#x7531; Faucet.sol &#x5B9A;&#x7FA9;&#x7684;&#x5169;&#x500B;&#x51FD;&#x6578;&#x7684;JSON&#x7269;&#x4EF6;&#x3002;&#x9019;&#x500B;JSON&#x7269;&#x4EF6;&#x53EF;&#x4EE5;&#x88AB;&#x4EFB;&#x4F55;&#x5E0C;&#x671B;&#x5728;&#x90E8;&#x7F72;&#x6642;&#x8A2A;&#x554F; Faucet &#x5408;&#x7D04;&#x7684;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x4F7F;&#x7528;&#x3002;&#x4F7F;&#x7528;ABI&#xFF0C;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#xFF08;&#x5982;&#x9322;&#x5305;&#x6216;DApp&#x700F;&#x89BD;&#x5668;&#xFF09;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x6B63;&#x78BA;&#x7684;&#x53C3;&#x6578;&#x548C;&#x53C3;&#x6578;&#x985E;&#x578B;&#x69CB;&#x9020;&#x8ABF;&#x7528; Faucet &#x4E2D;&#x7684;&#x51FD;&#x6578;&#x7684;&#x4EA4;&#x6613;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x9322;&#x5305;&#x6703;&#x77E5;&#x9053;&#x8981;&#x8ABF;&#x7528;&#x51FD;&#x6578;withdraw&#xFF0C;&#x5B83;&#x5FC5;&#x9808;&#x63D0;&#x4F9B;&#x540D;&#x70BA; withdraw_amount &#x7684; uint256 &#x53C3;&#x6578;&#x3002;&#x9322;&#x5305;&#x53EF;&#x4EE5;&#x63D0;&#x793A;&#x7528;&#x6236;&#x63D0;&#x4F9B;&#x8A72;&#x503C;&#xFF0C;&#x7136;&#x5F8C;&#x5275;&#x5EFA;&#x4E00;&#x500B;&#x7DE8;&#x78BC;&#x5B83;&#x4E26;&#x57F7;&#x884C;withdraw&#x529F;&#x80FD;&#x7684;&#x4EA4;&#x6613;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x8207;&#x5408;&#x7D04;&#x9032;&#x884C;&#x4EA4;&#x4E92;&#x6240;&#x9700;&#x7684;&#x5168;&#x90E8;&#x5167;&#x5BB9;&#x662F;ABI&#x4EE5;&#x53CA;&#x5408;&#x7D04;&#x7684;&#x90E8;&#x7F72;&#x5730;&#x5740;&#x3002;</p>
</div>
<div class="sect3">
<h4 id="solidity_pragma">&#x9078;&#x64C7;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x548C;&#x8A9E;&#x8A00;&#x7248;&#x672C;</h4>
<div class="paragraph">
<p>&#x6B63;&#x5982;&#x6211;&#x5011;&#x5728; <a href="#compile_Faucet_with_solc">Compiling Faucet.sol with solc</a> &#x4E2D;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x6211;&#x5011;&#x7684; Faucet &#x5408;&#x7D04;&#x5728;Solidity 0.4.21&#x7248;&#x672C;&#x4E2D;&#x6210;&#x529F;&#x7DE8;&#x8B6F;&#x3002;&#x4F46;&#x662F;&#x5982;&#x679C;&#x6211;&#x5011;&#x4F7F;&#x7528;&#x4E86;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x7684;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x5462;&#xFF1F;&#x8A9E;&#x8A00;&#x4ECD;&#x7136;&#x4E0D;&#x65B7;&#x8B8A;&#x5316;&#xFF0C;&#x4E8B;&#x60C5;&#x53EF;&#x80FD;&#x6703;&#x4EE5;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x65B9;&#x5F0F;&#x767C;&#x751F;&#x8B8A;&#x5316;&#x3002;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x975E;&#x5E38;&#x7C21;&#x55AE;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x6211;&#x5011;&#x7684;&#x7A0B;&#x5F0F;&#x4F7F;&#x7528;&#x4E86;&#x50C5;&#x6DFB;&#x52A0;&#x5230;Solidity&#x7248;&#x672C;0.4.19&#x4E2D;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x4E26;&#x4E14;&#x6211;&#x5011;&#x5617;&#x8A66;&#x4F7F;&#x7528;0.4.18&#x9032;&#x884C;&#x7DE8;&#x8B6F;&#xFF0C;&#x8A72;&#x600E;&#x9EBC;&#x8FA6;&#xFF1F;</p>
</div>
<div class="paragraph">
<p>&#x70BA;&#x4E86;&#x89E3;&#x6C7A;&#x9019;&#x4E9B;&#x554F;&#x984C;&#xFF0C;Solidity&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x500B;<em>compiler&#x6307;&#x4EE4;</em>&#xFF0C;&#x7A31;&#x70BA;<em>version pragma</em>&#xFF0C;&#x6307;&#x793A;&#x7DE8;&#x8B6F;&#x5668;&#x7A0B;&#x5F0F;&#x9700;&#x8981;&#x7279;&#x5B9A;&#x7684;&#x7DE8;&#x8B6F;&#x5668;&#xFF08;&#x548C;&#x8A9E;&#x8A00;&#xFF09;&#x7248;&#x672C;&#x3002;&#x6211;&#x5011;&#x4F86;&#x770B;&#x4E00;&#x500B;&#x4F8B;&#x5B50;&#xFF1A;</p>
</div>
<div id="compiler_version" class="listingblock">
<div class="content">
<pre>pragma solidity ^0.4.19;</pre>
</div>
</div>
<div class="paragraph">
<p>Solidity&#x7DE8;&#x8B6F;&#x5668;&#x8B80;&#x53D6;&#x7248;&#x672C;&#x7DE8;&#x8B6F;&#x6307;&#x793A;&#xFF0C;&#x5982;&#x679C;&#x7DE8;&#x8B6F;&#x5668;&#x7248;&#x672C;&#x8207;&#x7248;&#x672C;&#x7DE8;&#x8B6F;&#x6307;&#x793A;&#x4E0D;&#x517C;&#x5BB9;&#xFF0C;&#x5C07;&#x6703;&#x7522;&#x751F;&#x932F;&#x8AA4;&#x3002;&#x5728;&#x9019;&#x7A2E;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x6211;&#x5011;&#x7684;&#x7248;&#x672C;&#x7DE8;&#x8B6F;&#x6307;&#x51FA;&#xFF0C;&#x9019;&#x500B;&#x7A0B;&#x5F0F;&#x53EF;&#x4EE5;&#x7531;Solidity&#x7DE8;&#x8B6F;&#x5668;&#x7DE8;&#x8B6F;&#xFF0C;&#x6700;&#x4F4E;&#x7248;&#x672C;&#x70BA;0.4.19&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x7B26;&#x865F;^&#x8868;&#x793A;&#x6211;&#x5011;&#x5141;&#x8A31;&#x7DE8;&#x8B6F;&#x4EFB;&#x4F55;<em>minor&#x4FEE;&#x8A02;&#x7248;</em>&#x5728;0.4.19&#x4E4B;&#x4E0A;&#x7684;&#xFF0C;&#x4F8B;&#x5982;0.4.20&#xFF0C;&#x4F46;&#x4E0D;&#x662F;0.5.0&#xFF08;&#x9019;&#x662F;&#x4E00;&#x500B;&#x4E3B;&#x8981;&#x7248;&#x672C;&#xFF0C;&#x4E0D;&#x662F;&#x5C0F;&#x4FEE;&#x8A02;&#x7248;&#xFF09; &#x3002;Pragma&#x6307;&#x4EE4;&#x4E0D;&#x6703;&#x7DE8;&#x8B6F;&#x70BA;EVM Bytecode &#x3002;&#x5B83;&#x5011;&#x50C5;&#x7531;&#x7DE8;&#x8B6F;&#x5668;&#x7528;&#x4F86;&#x6AA2;&#x67E5;&#x517C;&#x5BB9;&#x6027;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x5728;&#x6211;&#x5011;&#x7684; Faucet &#x5408;&#x7D04;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x689D;&#x7DE8;&#x8B6F;&#x6307;&#x793A;&#x3002;&#x6211;&#x5011;&#x5C07;&#x547D;&#x540D;&#x65B0;&#x6A94;&#x6848; Faucet2.sol&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x6211;&#x5011;&#x7E7C;&#x7E8C;&#x8655;&#x7406;&#x9019;&#x4E9B;&#x7BC4;&#x4F8B;&#x6642;&#x8DDF;&#x8E64;&#x6211;&#x5011;&#x7684;&#x66F4;&#x6539;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="title">Faucet2.sol : Adding the version pragma to Faucet</div>
<div class="content">
<pre class="highlight"><code class="language-solidity" data-lang="solidity">// Version of Solidity compiler this program was written for
pragma solidity ^0.4.19;

// Our first contract is a faucet!
contract Faucet {

    // Give out ether to anyone who asks
    function withdraw(uint withdraw_amount) public {

        // Limit withdrawal amount
        require(withdraw_amount &lt;= 100000000000000000);

        // Send the amount to the address that requested it
        msg.sender.transfer(withdraw_amount);
    }

    // Accept any incoming amount
    function () public payable {}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x6DFB;&#x52A0;&#x7248;&#x672C; pragma &#x662F;&#x6700;&#x4F73;&#x5BE6;&#x8E10;&#xFF0C;&#x56E0;&#x70BA;&#x5B83;&#x907F;&#x514D;&#x4E86;&#x7DE8;&#x8B6F;&#x5668;&#x548C;&#x8A9E;&#x8A00;&#x7248;&#x672C;&#x4E0D;&#x5339;&#x914D;&#x7684;&#x554F;&#x984C;&#x3002;&#x6211;&#x5011;&#x5C07;&#x63A2;&#x7D22;&#x5176;&#x4ED6;&#x6700;&#x4F73;&#x5BE6;&#x8E10;&#xFF0C;&#x4E26;&#x5728;&#x672C;&#x7AE0;&#x4E2D;&#x7E7C;&#x7E8C;&#x6539;&#x9032;Faucet&#x5408;&#x7D04;&#x3002;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="__solidity_2">&#x4F7F;&#x7528;Solidity&#x7DE8;&#x7A0B;</h3>
<div class="paragraph">
<p>&#x5728;&#x672C;&#x7BC0;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x770B;&#x770B;Solidity&#x8A9E;&#x8A00;&#x7684;&#x4E00;&#x4E9B;&#x529F;&#x80FD;&#x3002;&#x6B63;&#x5982;&#x6211;&#x5011;&#x5728; <a href="#intro">[intro]</a> &#x4E2D;&#x63D0;&#x5230;&#x7684;&#xFF0C;&#x6211;&#x5011;&#x7684;&#x7B2C;&#x4E00;&#x4EFD;&#x5408;&#x7D04;&#x7BC4;&#x4F8B;&#x975E;&#x5E38;&#x7C21;&#x55AE;&#xFF0C;&#x4E26;&#x4E14;&#x5728;&#x8A31;&#x591A;&#x65B9;&#x9762;&#x4E5F;&#x5B58;&#x5728;&#x7F3A;&#x9677;&#x3002;&#x6211;&#x5011;&#x5C07;&#x9010;&#x6F38;&#x6539;&#x9032;&#x9019;&#x500B;&#x4F8B;&#x5B50;&#xFF0C;&#x540C;&#x6642;&#x5B78;&#x7FD2;&#x5982;&#x4F55;&#x4F7F;&#x7528;Solidity&#x3002;&#x7136;&#x800C;&#xFF0C;&#x9019;&#x4E0D;&#x6703;&#x662F;&#x4E00;&#x500B;&#x5168;&#x9762;&#x7684;Solidity&#x6559;&#x7A0B;&#xFF0C;&#x56E0;&#x70BA;Solidity&#x76F8;&#x7576;&#x8907;&#x96DC;&#x4E14;&#x5FEB;&#x901F;&#x767C;&#x5C55;&#x3002;&#x6211;&#x5011;&#x5C07;&#x4ECB;&#x7D39;&#x57FA;&#x790E;&#x77E5;&#x8B58;&#xFF0C;&#x4F75;&#x70BA;&#x4F60;&#x63D0;&#x4F9B;&#x8DB3;&#x5920;&#x7684;&#x57FA;&#x790E;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x5920;&#x81EA;&#x884C;&#x63A2;&#x7D22;&#x5176;&#x9918;&#x90E8;&#x5206;&#x3002;Solidity&#x7684;&#x5B8C;&#x6574;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x5728;&#x4EE5;&#x4E0B;&#x7DB2;&#x5740;&#x627E;&#x5230;&#xFF1A;</p>
</div>
<div class="paragraph">
<p><a href="https://solidity.readthedocs.io/en/latest/" class="bare" target="_blank">https://solidity.readthedocs.io/en/latest/</a></p>
</div>
<div class="sect3">
<h4 id="___3">&#x6578;&#x64DA;&#x985E;&#x578B;</h4>
<div class="paragraph">
<p>&#x9996;&#x5148;&#xFF0C;&#x6211;&#x5011;&#x4F86;&#x770B;&#x770B;Solidity&#x4E2D;&#x63D0;&#x4F9B;&#x7684;&#x4E00;&#x4E9B;&#x57FA;&#x672C;&#x6578;&#x64DA;&#x985E;&#x578B;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">boolean (bool)</dt>
<dd>
<p>&#x5E03;&#x6797;&#x503C;, true &#x6216; false, &#x4EE5;&#x53CA;&#x908F;&#x8F2F;&#x64CD;&#x4F5C;&#x7B26; ! (not), &amp;&amp; (and), || (or), == (equal), != (not equal).</p>
</dd>
<dt class="hdlist1">&#x6574;&#x6578; (int/uint)</dt>
<dd>
<p>&#x6709;&#x7B26;&#x865F; (int) &#x548C; &#x7121;&#x7B26;&#x865F; (uint) &#x6574;&#x6578;&#xFF0C;&#x5F9E; u/int8 &#x5230; u/int256&#x4EE5; 8 bits &#x905E;&#x589E;&#xFF0C;&#x6C92;&#x6709;&#x5927;&#x5C0F;&#x5F8C;&#x7DB4;&#x7684;&#x8A71;&#xFF0C;&#x8868;&#x793A;256 bits&#x3002;</p>
</dd>
<dt class="hdlist1">&#x5B9A;&#x9EDE;&#x6578; (fixed/ufixed)</dt>
<dd>
<p>&#x5B9A;&#x9EDE;&#x6578;, &#x5B9A;&#x7FA9;&#x70BA; u/fixedMxN&#xFF0C;&#x5176;&#x4E2D; M &#x662F;&#x4F4D;&#x5927;&#x5C0F;&#xFF08;&#x4EE5;8&#x905E;&#x589E;&#xFF09;&#xFF0C;N &#x662F;&#x5C0F;&#x6578;&#x9EDE;&#x5F8C;&#x7684;&#x5341;&#x9032;&#x5236;&#x6578;&#x7684;&#x500B;&#x6578;&#x3002;</p>
</dd>
<dt class="hdlist1">&#x5730;&#x5740;</dt>
<dd>
<p>20&#x5B57;&#x7BC0;&#x7684;&#x4EE5;&#x592A;&#x574A;&#x5730;&#x5740;&#x3002;address &#x7269;&#x4EF6;&#x6709; balance (&#x8FD4;&#x56DE;&#x5E33;&#x6236;&#x7684;&#x9918;&#x984D;) &#x548C; transfer (&#x8F49;&#x79FB; ether &#x5230;&#x8A72;&#x5E33;&#x6236;) &#x6210;&#x54E1;&#x65B9;&#x6CD5;&#x3002;</p>
</dd>
<dt class="hdlist1">&#x5B57;&#x7BC0;&#x9663;&#x5217;&#xFF08;&#x5B9A;&#x9577;&#xFF09;</dt>
<dd>
<p>&#x56FA;&#x5B9A;&#x5927;&#x5C0F;&#x7684;&#x5B57;&#x7BC0;&#x9663;&#x5217;&#xFF0C;&#x5B9A;&#x7FA9;&#x70BA;bytes1&#x5230;bytes32&#x3002;</p>
</dd>
<dt class="hdlist1">&#x5B57;&#x7BC0;&#x9663;&#x5217; (&#x52D5;&#x614B;)</dt>
<dd>
<p>&#x52D5;&#x614B;&#x5927;&#x5C0F;&#x7684;&#x5B57;&#x7BC0;&#x9663;&#x5217;&#xFF0C;&#x5B9A;&#x7FA9;&#x70BA;bytes&#x6216;string&#x3002;</p>
</dd>
<dt class="hdlist1">enum</dt>
<dd>
<p>&#x679A;&#x8209;&#x96E2;&#x6563;&#x503C;&#x7684;&#x7528;&#x6236;&#x5B9A;&#x7FA9;&#x985E;&#x578B;&#x3002;</p>
</dd>
<dt class="hdlist1">struct</dt>
<dd>
<p>&#x5305;&#x542B;&#x4E00;&#x7D44;&#x8B8A;&#x6578;&#x7684;&#x7528;&#x6236;&#x5B9A;&#x7FA9;&#x7684;&#x6578;&#x64DA;&#x5BB9;&#x5668;&#x3002;</p>
</dd>
<dt class="hdlist1">mapping</dt>
<dd>
<p>key =&gt; value&#x5C0D;&#x7684;&#x96DC;&#x6E4A;&#x67E5;&#x627E;&#x8868;&#x3002;</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>&#x9664;&#x4E0A;&#x8FF0;&#x6578;&#x64DA;&#x985E;&#x578B;&#x5916;&#xFF0C;Solidity&#x9084;&#x63D0;&#x4F9B;&#x4E86;&#x591A;&#x7A2E;&#x53EF;&#x7528;&#x65BC;&#x8A08;&#x7B97;&#x4E0D;&#x540C;&#x55AE;&#x4F4D;&#x7684;&#x5B57;&#x9762;&#x503C;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&#x6642;&#x9593;&#x55AE;&#x4F4D;</dt>
<dd>
<p>seconds, minutes, hours, &#x548C; days &#x53EF;&#x7528;&#x4F5C;&#x5F8C;&#x7DB4;&#xFF0C;&#x8F49;&#x63DB;&#x70BA;&#x57FA;&#x672C;&#x55AE;&#x4F4D; seconds &#x7684;&#x500D;&#x6578;&#x3002;</p>
</dd>
<dt class="hdlist1">&#x4EE5;&#x592A;&#x7684;&#x55AE;&#x4F4D;</dt>
<dd>
<p>wei, finney, szabo, &#x548C; ether &#x53EF;&#x7528;&#x4F5C;&#x5F8C;&#x7DB4;, &#x8F49;&#x63DB;&#x70BA;&#x57FA;&#x672C;&#x55AE;&#x4F4D; wei &#x7684;&#x500D;&#x6578;&#x3002;</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>&#x5230;&#x76EE;&#x524D;&#x70BA;&#x6B62;&#xFF0C;&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x5408;&#x7D04;&#x7BC4;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x4F7F;&#x7528;uint&#xFF08;&#x9019;&#x662F;uint256&#x7684;&#x5225;&#x540D;&#xFF09;&#xFF0C;&#x7528;&#x65BC;withdraw_amount&#x8B8A;&#x6578;&#x3002;&#x6211;&#x5011;&#x9084;&#x9593;&#x63A5;&#x4F7F;&#x7528;&#x4E86;address&#x8B8A;&#x6578;&#xFF0C;&#x5B83;&#x662F;+ msg.sender+&#x3002;&#x5728;&#x672C;&#x7AE0;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x5728;&#x7BC4;&#x4F8B;&#x4E2D;&#x4F7F;&#x7528;&#x66F4;&#x591A;&#x6578;&#x64DA;&#x985E;&#x578B;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x4F7F;&#x7528;&#x55AE;&#x4F4D;&#x7684;&#x500D;&#x6578;&#x4E4B;&#x4E00;&#x4F86;&#x63D0;&#x9AD8;&#x7BC4;&#x4F8B;&#x5408;&#x7D04;Faucet&#x7684;&#x53EF;&#x8B80;&#x6027;&#x3002;&#x5728;withdraw&#x51FD;&#x6578;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x9650;&#x5236;&#x6700;&#x5927;&#x63D0;&#x73FE;&#x984D;&#xFF0C;&#x5C07;&#x6578;&#x91CF;&#x9650;&#x5236;&#x8868;&#x793A;&#x70BA;wei&#xFF0C;&#x4EE5;&#x592A;&#x7684;&#x57FA;&#x672C;&#x55AE;&#x4F4D;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>require(withdraw_amount &lt;= 100000000000000000);</pre>
</div>
</div>
<div class="paragraph">
<p>&#x9019;&#x4E0D;&#x662F;&#x5F88;&#x5BB9;&#x6613;&#x95B1;&#x8B80;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x4F7F;&#x7528;&#x55AE;&#x4F4D;&#x500D;&#x6578; ether &#x4F86;&#x6539;&#x9032;&#x6211;&#x5011;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0C;&#x4EE5;ether&#x800C;&#x4E0D;&#x662F;wei&#x8868;&#x793A;&#x503C;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>require(withdraw_amount &lt;= 0.1 ether);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="___4">&#x9810;&#x5B9A;&#x7FA9;&#x7684;&#x5168;&#x57DF;&#x8B8A;&#x6578;&#x548C;&#x51FD;&#x6578;</h4>
<div class="paragraph">
<p>&#x5728;EVM&#x4E2D;&#x57F7;&#x884C;&#x5408;&#x7D04;&#x6642;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x8A2A;&#x554F;&#x4E00;&#x7D44;&#x8F03;&#x5C0F;&#x7BC4;&#x570D;&#x5167;&#x7684;&#x5168;&#x5C40;&#x7269;&#x4EF6;&#x3002;&#x9019;&#x4E9B;&#x5305;&#x62EC; block&#xFF0C;msg &#x548C; tx &#x7269;&#x4EF6;&#x3002;&#x53E6;&#x5916;&#xFF0C;Solidity&#x516C;&#x958B;&#x4E86;&#x8A31;&#x591A;EVM&#x64CD;&#x4F5C;&#x78BC;&#x4F5C;&#x70BA;&#x9810;&#x5B9A;&#x7FA9;&#x7684;Solidity&#x529F;&#x80FD;&#x3002;&#x5728;&#x672C;&#x7BC0;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x6AA2;&#x67E5;&#x4F60;&#x53EF;&#x4EE5;&#x5F9E;Solidity&#x7684;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x4E2D;&#x8A2A;&#x554F;&#x7684;&#x8B8A;&#x6578;&#x548C;&#x51FD;&#x6578;&#x3002;</p>
</div>
<div class="sect4">
<h5 id="___5">&#x8ABF;&#x7528;&#x4EA4;&#x6613;/&#x6D88;&#x606F;&#x4E0A;&#x4E0B;&#x6587;</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">msg</dt>
<dd>
<p>msg&#x7269;&#x4EF6;&#x662F;&#x555F;&#x52D5;&#x5408;&#x7D04;&#x57F7;&#x884C;&#x7684;&#x4EA4;&#x6613;&#xFF08;&#x6E90;&#x81EA;EOA&#xFF09;&#x6216;&#x6D88;&#x606F;&#xFF08;&#x6E90;&#x81EA;&#x5408;&#x7D04;&#xFF09;&#x3002;&#x5B83;&#x5305;&#x542B;&#x8A31;&#x591A;&#x6709;&#x7528;&#x7684;&#x5C6C;&#x6027;&#xFF1A;</p>
</dd>
<dt class="hdlist1">msg.sender</dt>
<dd>
<p>&#x6211;&#x5011;&#x5DF2;&#x7D93;&#x4F7F;&#x7528;&#x904E;&#x9019;&#x500B;&#x3002;&#x5B83;&#x4EE3;&#x8868;&#x767C;&#x8D77;&#x6D88;&#x606F;&#x7684;&#x5730;&#x5740;&#x3002;&#x5982;&#x679C;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x662F;&#x7531;EOA&#x4EA4;&#x6613;&#x8ABF;&#x7528;&#x7684;&#xFF0C;&#x90A3;&#x9EBC;&#x9019;&#x662F;&#x7C3D;&#x7F72;&#x4EA4;&#x6613;&#x7684;&#x5730;&#x5740;&#x3002;</p>
</dd>
<dt class="hdlist1">msg.value</dt>
<dd>
<p>&#x8207;&#x6D88;&#x606F;&#x4E00;&#x8D77;&#x767C;&#x9001;&#x7684;&#x4EE5;&#x592A;&#x7DB2;&#x503C;&#x3002;</p>
</dd>
<dt class="hdlist1">msg.gas</dt>
<dd>
<p>&#x8ABF;&#x7528;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x7684;&#x6D88;&#x606F;&#x4E2D;&#x7559;&#x4E0B;&#x7684;gas&#x91CF;&#x3002;&#x5B83;&#x5DF2;&#x7D93;&#x88AB;&#x68C4;&#x7528;&#xFF0C;&#x4E26;&#x5C07;&#x88AB;&#x66FF;&#x63DB;&#x70BA;Solidity v0.4.21&#x4E2D;&#x7684;gasleft()&#x51FD;&#x6578;&#x3002;</p>
</dd>
<dt class="hdlist1">msg.data</dt>
<dd>
<p>&#x8ABF;&#x7528;&#x5408;&#x7D04;&#x7684;&#x6D88;&#x606F;&#x4E2D;&#x7684;&#x6578;&#x64DA;&#x3002;</p>
</dd>
<dt class="hdlist1">msg.sig</dt>
<dd>
<p>&#x6578;&#x64DA;&#x7684;&#x524D;&#x56DB;&#x500B;&#x5B57;&#x7BC0;&#xFF0C;&#x5B83;&#x662F;&#x51FD;&#x6578;&#x9078;&#x64C7;&#x5668;&#x3002;</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>&#x6BCF;&#x7576;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x53E6;&#x4E00;&#x500B;&#x5408;&#x7D04;&#x6642;&#xFF0C;msg&#x7684;&#x6240;&#x6709;&#x5C6C;&#x6027;&#x7684;&#x503C;&#x90FD;&#x6703;&#x767C;&#x751F;&#x8B8A;&#x5316;&#xFF0C;&#x4EE5;&#x53CD;&#x6620;&#x65B0;&#x7684;&#x8ABF;&#x7528;&#x8005;&#x7684;&#x8CC7;&#x8A0A;&#x3002;&#x552F;&#x4E00;&#x7684;&#x4F8B;&#x5916;&#x662F;&#x5728;&#x539F;&#x59CB;msg&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x904B;&#x884C;&#x53E6;&#x4E00;&#x500B;&#x5408;&#x7D04;/&#x5EAB;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x7684; delegatecall &#x51FD;&#x6578;&#x3002;</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="___6">&#x4EA4;&#x6613;&#x4E0A;&#x4E0B;&#x6587;</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">tx.gasprice</dt>
<dd>
<p>&#x767C;&#x8D77;&#x8ABF;&#x7528;&#x7684;&#x4EA4;&#x6613;&#x4E2D;&#x7684;gas&#x50F9;&#x683C;&#x3002;</p>
</dd>
<dt class="hdlist1">tx.origin</dt>
<dd>
<p>&#x6E90;&#x81EA;&#xFF08;EOA&#xFF09;&#x7684;&#x4EA4;&#x6613;&#x7684;&#x5B8C;&#x6574;&#x8ABF;&#x7528;&#x5806;&#x758A;&#x3002;</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="___7">&#x5340;&#x584A;&#x4E0A;&#x4E0B;&#x6587;</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">block</dt>
<dd>
<p>&#x5305;&#x542B;&#x6709;&#x95DC;&#x7576;&#x524D;&#x584A;&#x7684;&#x8CC7;&#x8A0A;&#x7684;&#x584A;&#x7269;&#x4EF6;&#x3002;</p>
</dd>
<dt class="hdlist1">block.blockhash(blockNumber)</dt>
<dd>
<p>&#x6307;&#x5B9A;&#x584A;&#x7DE8;&#x865F;&#x7684;&#x584A;&#x7684;&#x96DC;&#x6E4A;&#xFF0C;&#x76F4;&#x5230;&#x4E4B;&#x524D;&#x7684;256&#x500B;&#x584A;&#x3002;&#x5DF2;&#x68C4;&#x7528;&#xFF0C;&#x4E26;&#x4F7F;&#x7528;Solidity v.0.4.22&#x4E2D;&#x7684;blockhash()&#x51FD;&#x6578;&#x66FF;&#x63DB;&#x3002;</p>
</dd>
<dt class="hdlist1">block.coinbase</dt>
<dd>
<p>&#x7576;&#x524D;&#x584A;&#x7684;&#x7926;&#x5DE5;&#x5730;&#x5740;&#x3002;</p>
</dd>
<dt class="hdlist1">block.difficulty</dt>
<dd>
<p>&#x7576;&#x524D;&#x584A;&#x7684;&#x96E3;&#x5EA6;&#xFF08;Proof-of-Work&#xFF09;&#x3002;</p>
</dd>
<dt class="hdlist1">block.gaslimit</dt>
<dd>
<p>&#x7576;&#x524D;&#x584A;&#x7684;&#x5340;&#x584A;gas&#x9650;&#x5236;&#x3002;</p>
</dd>
<dt class="hdlist1">block.number</dt>
<dd>
<p>&#x7576;&#x524D;&#x584A;&#x865F;&#xFF08;&#x9AD8;&#x5EA6;&#xFF09;&#x3002;</p>
</dd>
<dt class="hdlist1">block.timestamp</dt>
<dd>
<p>&#x7926;&#x5DE5;&#x5728;&#x7576;&#x524D;&#x584A;&#x4E2D;&#x653E;&#x7F6E;&#x7684;&#x6642;&#x9593;&#x6233;&#xFF0C;&#x81EA;Unix&#x7D00;&#x5143;&#xFF08;&#x79D2;&#xFF09;&#x958B;&#x59CB;&#x3002;</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="solidity_address_object">&#x5730;&#x5740;&#x7269;&#x4EF6;</h5>
<div class="paragraph">
<p>&#x4EFB;&#x4F55;&#x5730;&#x5740;&#xFF08;&#x4F5C;&#x70BA;&#x8F38;&#x5165;&#x50B3;&#x905E;&#x6216;&#x5F9E;&#x5408;&#x7D04;&#x7269;&#x4EF6;&#x8F49;&#x63DB;&#x800C;&#x4F86;&#xFF09;&#x90FD;&#x6709;&#x4E00;&#x4E9B;&#x5C6C;&#x6027;&#x548C;&#x65B9;&#x6CD5;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">address.balance</dt>
<dd>
<p>&#x5730;&#x5740;&#x7684;&#x9918;&#x984D;&#xFF0C;&#x4EE5;wei&#x70BA;&#x55AE;&#x4F4D;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x7576;&#x524D;&#x5408;&#x7D04;&#x9918;&#x984D;&#x662F; address(this).balance&#x3002;</p>
</dd>
<dt class="hdlist1">address.transfer(amount)</dt>
<dd>
<p>&#x5C07;&#x91D1;&#x984D;&#xFF08;wei&#xFF09;&#x8F49;&#x79FB;&#x5230;&#x8A72;&#x5730;&#x5740;&#xFF0C;&#x4E26;&#x5728;&#x767C;&#x751F;&#x4EFB;&#x4F55;&#x932F;&#x8AA4;&#x6642;&#x62CB;&#x51FA;&#x7570;&#x5E38;&#x3002;&#x6211;&#x5011;&#x5728;Faucet&#x7BC4;&#x4F8B;&#x4E2D;&#x7684;msg.sender&#x5730;&#x5740;&#x4E0A;&#x4F7F;&#x7528;&#x4E86;&#x6B64;&#x51FD;&#x6578;&#xFF0C;msg.sender.transfer()&#x3002;</p>
</dd>
<dt class="hdlist1">address.send(amount)</dt>
<dd>
<p>&#x985E;&#x4F3C;&#x65BC;&#x524D;&#x9762;&#x7684;transfer, &#x4F46;&#x662F;&#x5931;&#x6557;&#x6642;&#x4E0D;&#x62CB;&#x51FA;&#x7570;&#x5E38;&#xFF0C;&#x800C;&#x662F;&#x8FD4;&#x56DE;false&#x3002;</p>
</dd>
<dt class="hdlist1">address.call()</dt>
<dd>
<p>&#x4F4E;&#x7D1A;&#x8ABF;&#x7528;&#x51FD;&#x6578;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;value&#xFF0C;data&#x69CB;&#x9020;&#x4EFB;&#x610F;&#x6D88;&#x606F;&#x3002;&#x932F;&#x8AA4;&#x6642;&#x8FD4;&#x56DE;false&#x3002;</p>
</dd>
<dt class="hdlist1">address.delegatecall()</dt>
<dd>
<p>&#x4F4E;&#x7D1A;&#x8ABF;&#x7528;&#x51FD;&#x6578;&#xFF0C;&#x4FDD;&#x6301;&#x767C;&#x8D77;&#x8ABF;&#x7528;&#x7684;&#x5408;&#x7D04;&#x7684;msg&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x932F;&#x8AA4;&#x6642;&#x8FD4;&#x56DE;false&#x3002;</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="___8">&#x5167;&#x5EFA;&#x51FD;&#x6578;</h5>
<div class="dlist">
<dl>
<dt class="hdlist1">addmod, mulmod</dt>
<dd>
<p>&#x6A21;&#x52A0;&#x6CD5;&#x548C;&#x4E58;&#x6CD5;&#x3002;&#x4F8B;&#x5982;&#xFF0C;addmod(x,y,k) &#x8A08;&#x7B97;  (x + y) % k&#x3002;</p>
</dd>
<dt class="hdlist1">keccak256, sha256, sha3, ripemd160</dt>
<dd>
<p>&#x7528;&#x5404;&#x7A2E;&#x6A19;&#x6E96;&#x96DC;&#x6E4A;&#x6F14;&#x7B97;&#x6CD5;&#x8A08;&#x7B97;&#x96DC;&#x6E4A;&#x503C;&#x7684;&#x51FD;&#x6578;&#x3002;</p>
</dd>
<dt class="hdlist1">ecrecover</dt>
<dd>
<p>&#x5F9E;&#x7C3D;&#x540D;&#x4E2D;&#x6062;&#x5FA9;&#x7528;&#x65BC;&#x7C3D;&#x7F72;&#x6D88;&#x606F;&#x7684;&#x5730;&#x5740;&#x3002;</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="___9">&#x5408;&#x7D04;&#x7684;&#x5B9A;&#x7FA9;</h4>
<div class="paragraph">
<p>Solidity&#x7684;&#x4E3B;&#x8981;&#x6578;&#x64DA;&#x985E;&#x578B;&#x662F;<em>contract</em>&#x7269;&#x4EF6;&#xFF0C;&#x5B83;&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x7684;&#x9802;&#x90E8;&#x5B9A;&#x7FA9;&#x3002;&#x8207;&#x9762;&#x56AE;&#x7269;&#x4EF6;&#x8A9E;&#x8A00;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x7269;&#x4EF6;&#x985E;&#x4F3C;&#xFF0C;&#x5408;&#x7D04;&#x662F;&#x4E00;&#x500B;&#x5305;&#x542B;&#x6578;&#x64DA;&#x548C;&#x65B9;&#x6CD5;&#x7684;&#x5BB9;&#x5668;&#x3002;</p>
</div>
<div class="paragraph">
<p>Solidity&#x63D0;&#x4F9B;&#x4E86;&#x53E6;&#x5916;&#x5169;&#x500B;&#x8207;&#x5408;&#x7D04;&#x985E;&#x4F3C;&#x7684;&#x7269;&#x4EF6;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">interface</dt>
<dd>
<p>&#x63A5;&#x53E3;&#x5B9A;&#x7FA9;&#x7684;&#x7D50;&#x69CB;&#x8207;&#x5408;&#x7D04;&#x5B8C;&#x5168;&#x4E00;&#x6A23;&#xFF0C;&#x53EA;&#x4E0D;&#x904E;&#x6C92;&#x6709;&#x5B9A;&#x7FA9;&#x51FD;&#x6578;&#xFF0C;&#x5B83;&#x5011;&#x53EA;&#x662F;&#x5BA3;&#x544A;&#x3002;&#x9019;&#x7A2E;&#x985E;&#x578B;&#x7684;&#x51FD;&#x6578;&#x5BA3;&#x544A;&#x901A;&#x5E38;&#x88AB;&#x7A31;&#x70BA; <em>&#x6A01;</em> <em>stub</em>&#xFF0C;&#x56E0;&#x70BA;&#x5B83;&#x544A;&#x8A34;&#x4F60;&#x6709;&#x95DC;&#x51FD;&#x6578;&#x7684;&#x53C3;&#x6578;&#x548C;&#x8FD4;&#x56DE;&#x503C;&#xFF0C;&#x6C92;&#x6709;&#x4EFB;&#x4F55;&#x5BE6;&#x73FE;&#x3002;&#x5B83;&#x7528;&#x4F86;&#x6307;&#x5B9A;&#x5408;&#x7D04;&#x63A5;&#x53E3;&#xFF0C;&#x5982;&#x679C;&#x7E7C;&#x627F;&#xFF0C;&#x6BCF;&#x500B;&#x51FD;&#x6578;&#x90FD;&#x5FC5;&#x9808;&#x5728;&#x5B50;&#x985E;&#x4E2D;&#x6307;&#x5B9A;&#x3002;</p>
</dd>
<dt class="hdlist1">library</dt>
<dd>
<p>&#x4E00;&#x500B;&#x5EAB;&#x5408;&#x7D04;&#x662F;&#x4E00;&#x500B;&#x53EA;&#x80FD;&#x90E8;&#x7F72;&#x4E00;&#x6B21;&#x4E26;&#x88AB;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x4F7F;&#x7528;&#x7684;&#x5408;&#x7D04;&#xFF0C;&#x4F7F;&#x7528;delegatecall&#x65B9;&#x6CD5;&#xFF08;&#x898B;<a href="#solidity_address_object">&#x5730;&#x5740;&#x7269;&#x4EF6;</a>&#xFF09;&#x3002;</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="___10">&#x51FD;&#x6578;</h4>
<div class="paragraph">
<p>&#x5728;&#x5408;&#x7D04;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5B9A;&#x7FA9;&#x4E86;&#x53EF;&#x4EE5;&#x7531;EOA&#x4EA4;&#x6613;&#x6216;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x7684;&#x51FD;&#x6578;&#x3002;&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x6709;&#x5169;&#x500B;&#x51FD;&#x6578;&#xFF1A;withdraw&#x548C;&#xFF08;&#x672A;&#x547D;&#x540D;&#x7684;&#xFF09;<em>fallback</em>&#x51FD;&#x6578;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x51FD;&#x6578;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x8A9E;&#x6CD5;&#x5B9A;&#x7FA9;&#xFF1A;</p>
</div>
<div class="paragraph">
<p><strong>function</strong>&#xA0;FunctionName([<em>parameters</em>])
{<strong>public</strong>|<strong>private</strong>|<strong>internal</strong>|<strong>external</strong>}
[<strong>pure</strong>|<strong>constant</strong>|<strong>view</strong>|<strong>payable</strong>]
[<em>modifiers</em>]
[<strong>returns</strong>&#xA0;(&lt;<em>return types</em>&gt;)]</p>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x4F86;&#x770B;&#x770B;&#x6BCF;&#x500B;&#x7D44;&#x4EF6;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">FunctionName</dt>
<dd>
<p>&#x5B9A;&#x7FA9;&#x51FD;&#x6578;&#x7684;&#x540D;&#x7A31;&#xFF0C;&#x7528;&#x65BC;&#x901A;&#x904E;&#x4EA4;&#x6613;&#xFF08;EOA&#xFF09;&#xFF0C;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x6216;&#x540C;&#x4E00;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x51FD;&#x6578;&#x3002;&#x6BCF;&#x500B;&#x5408;&#x7D04;&#x4E2D;&#x7684;&#x4E00;&#x500B;&#x529F;&#x80FD;&#x53EF;&#x4EE5;&#x5B9A;&#x7FA9;&#x70BA;&#x4E0D;&#x5E36;&#x540D;&#x7A31;&#x7684;&#xFF0C;&#x5728;&#x9019;&#x7A2E;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x5B83;&#x662F;<em>fallback</em>&#x51FD;&#x6578;&#xFF0C;&#x5728;&#x6C92;&#x6709;&#x6307;&#x5B9A;&#x5176;&#x4ED6;&#x51FD;&#x6578;&#x6642;&#x8ABF;&#x7528;&#x8A72;&#x51FD;&#x6578;&#x3002;fallback&#x51FD;&#x6578;&#x4E0D;&#x80FD;&#x6709;&#x4EFB;&#x4F55;&#x53C3;&#x6578;&#x6216;&#x8FD4;&#x56DE;&#x4EFB;&#x4F55;&#x5167;&#x5BB9;&#x3002;</p>
</dd>
<dt class="hdlist1">parameters</dt>
<dd>
<p>&#x5728;&#x540D;&#x7A31;&#x5F8C;&#x9762;&#xFF0C;&#x6211;&#x5011;&#x6307;&#x5B9A;&#x5FC5;&#x9808;&#x50B3;&#x905E;&#x7D66;&#x51FD;&#x6578;&#x7684;&#x53C3;&#x6578;&#xFF0C;&#x5305;&#x62EC;&#x540D;&#x7A31;&#x548C;&#x985E;&#x578B;&#x3002;&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;uint withdraw_amount&#x5B9A;&#x7FA9;&#x70BA;withdraw&#x51FD;&#x6578;&#x7684;&#x552F;&#x4E00;&#x53C3;&#x6578;&#x3002;</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>&#x4E0B;&#x4E00;&#x7D44;&#x95DC;&#x9375;&#x5B57; (public, private, internal, external) &#x6307;&#x5B9A;&#x4E86;&#x51FD;&#x6578;&#x7684;<em>&#x53EF;&#x898B;&#x6027;</em>&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">public</dt>
<dd>
<p>Public&#x662F;&#x9810;&#x8A2D;&#x7684;&#xFF0C;&#x9019;&#x4E9B;&#x51FD;&#x6578;&#x53EF;&#x4EE5;&#x88AB;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#xFF0C;EOA&#x4EA4;&#x6613;&#x6216;&#x5408;&#x7D04;&#x5167;&#x90E8;&#x8ABF;&#x7528;&#x3002;&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x4E2D;&#xFF0C;&#x9019;&#x5169;&#x500B;&#x51FD;&#x6578;&#x90FD;&#x88AB;&#x5B9A;&#x7FA9;&#x70BA;public&#x3002;</p>
</dd>
<dt class="hdlist1">external</dt>
<dd>
<p>&#x5916;&#x90E8;&#x51FD;&#x6578;&#x5C31;&#x50CF;public&#x4E00;&#x6A23;&#xFF0C;&#x4F46;&#x9664;&#x975E;&#x4F7F;&#x7528;&#x95DC;&#x9375;&#x5B57;this&#x4F5C;&#x70BA;&#x524D;&#x7DB4;&#xFF0C;&#x5426;&#x5247;&#x5B83;&#x5011;&#x4E0D;&#x80FD;&#x5F9E;&#x5408;&#x7D04;&#x4E2D;&#x8ABF;&#x7528;&#x3002;</p>
</dd>
<dt class="hdlist1">internal</dt>
<dd>
<p>&#x5167;&#x90E8;&#x51FD;&#x6578;&#x53EA;&#x80FD;&#x5728;&#x5408;&#x7D04;&#x5167;&#x90E8;&quot;&#x53EF;&#x898B;&quot;&#xFF0C;&#x4E0D;&#x80FD;&#x88AB;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x6216;EOA&#x4EA4;&#x6613;&#x8ABF;&#x7528;&#x3002;&#x4ED6;&#x5011;&#x53EF;&#x4EE5;&#x88AB;&#x6D3E;&#x751F;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#xFF08;&#x7E7C;&#x627F;&#x7684;&#xFF09;&#x3002;</p>
</dd>
<dt class="hdlist1">private</dt>
<dd>
<p>private&#x51FD;&#x6578;&#x8207;&#x5167;&#x90E8;&#x51FD;&#x6578;&#x985E;&#x4F3C;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x7531;&#x6D3E;&#x751F;&#x7684;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#xFF08;&#x7E7C;&#x627F;&#x7684;&#xFF09;&#x3002;</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>&#x8ACB;&#x8A18;&#x4F4F;&#xFF0C;&#x8853;&#x8A9E; internal &#x548C; private &#x6709;&#x4E9B;&#x8AA4;&#x5C0E;&#x6027;&#x3002;&#x516C;&#x5171;&#x5340;&#x584A;&#x93C8;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x51FD;&#x6578;&#x6216;&#x6578;&#x64DA;&#x7E3D;&#x662F;<em>&#x53EF;&#x898B;&#x7684;</em>&#xFF0C;&#x610F;&#x5473;&#x8457;&#x4EFB;&#x4F55;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x7A0B;&#x5F0F;&#x78BC;&#x6216;&#x6578;&#x64DA;&#x3002;&#x4EE5;&#x4E0A;&#x95DC;&#x9375;&#x5B57;&#x50C5;&#x5F71;&#x97FF;&#x51FD;&#x6578;&#x7684;&#x8ABF;&#x7528;&#x65B9;&#x5F0F;&#x548C;&#x6642;&#x6A5F;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4E0B;&#x4E00;&#x7D44;&#x95DC;&#x9375;&#x5B57;&#xFF08;pure, constant, view, payable&#xFF09;&#x6703;&#x5F71;&#x97FF;&#x51FD;&#x6578;&#x7684;&#x884C;&#x70BA;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">constant/view</dt>
<dd>
<p>&#x6A19;&#x8A18;&#x70BA;<em>view</em>&#x7684;&#x51FD;&#x6578;&#xFF0C;&#x627F;&#x8AFE;&#x4E0D;&#x4FEE;&#x6539;&#x4EFB;&#x4F55;&#x72C0;&#x614B;&#x3002;&#x8853;&#x8A9E;<em>constant</em>&#x662F;<em>view</em>&#x7684;&#x5225;&#x540D;&#xFF0C;&#x5C07;&#x88AB;&#x68C4;&#x7528;&#x3002;&#x76EE;&#x524D;&#xFF0C;&#x7DE8;&#x8B6F;&#x5668;&#x4E0D;&#x5F37;&#x5236;&#x57F7;&#x884C;<em>view</em>&#x4FEE;&#x98FE;&#x5668;&#xFF0C;&#x53EA;&#x7522;&#x751F;&#x4E00;&#x500B;&#x8B66;&#x544A;&#xFF0C;&#x4F46;&#x9019;&#x61C9;&#x8A72;&#x6210;&#x70BA;Solidity v0.5&#x4E2D;&#x7684;&#x5F37;&#x5236;&#x95DC;&#x9375;&#x5B57;&#x3002;</p>
</dd>
<dt class="hdlist1">pure</dt>
<dd>
<p>&#x7D14;(pure)&#x51FD;&#x6578;&#x4E0D;&#x8B80;&#x5BEB;&#x4EFB;&#x4F55;&#x8B8A;&#x6578;&#x3002;&#x5B83;&#x53EA;&#x80FD;&#x5C0D;&#x53C3;&#x6578;&#x9032;&#x884C;&#x64CD;&#x4F5C;&#x4E26;&#x8FD4;&#x56DE;&#x6578;&#x64DA;&#xFF0C;&#x800C;&#x4E0D;&#x6D89;&#x53CA;&#x4EFB;&#x4F55;&#x5132;&#x5B58;&#x7684;&#x6578;&#x64DA;&#x3002;&#x7D14;&#x51FD;&#x6578;&#x65E8;&#x5728;&#x9F13;&#x52F5;&#x6C92;&#x6709;&#x526F;&#x4F5C;&#x7528;&#x6216;&#x72C0;&#x614B;&#x7684;&#x5BA3;&#x544A;&#x5F0F;&#x7DE8;&#x7A0B;&#x3002;</p>
</dd>
<dt class="hdlist1">payable</dt>
<dd>
<p>payable&#x51FD;&#x6578;&#x662F;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x4ED8;&#x6B3E;&#x7684;&#x529F;&#x80FD;&#x3002;&#x6C92;&#x6709;payable&#x7684;&#x51FD;&#x6578;&#x5C07;&#x62D2;&#x7D55;&#x6536;&#x6B3E;&#xFF0C;&#x9664;&#x975E;&#x5B83;&#x5011;&#x4F86;&#x6E90;&#x65BC;coinbase&#xFF08;&#x6316;&#x7926;&#x6536;&#x5165;&#xFF09;&#x6216; &#x4F5C;&#x70BA; SELFDESTRUCT&#xFF08;&#x5408;&#x7D04;&#x7D42;&#x6B62;&#xFF09;&#x7684;&#x76EE;&#x7684;&#x5730;&#x3002;&#x5728;&#x9019;&#x4E9B;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x7531;&#x65BC;EVM&#x4E2D;&#x7684;&#x8A2D;&#x8A08;&#x6C7A;&#x7B56;&#xFF0C;&#x5408;&#x7D04;&#x7121;&#x6CD5;&#x963B;&#x6B62;&#x6536;&#x6B3E;&#x3002;</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>&#x6B63;&#x5982;&#x4F60;&#x5728;Faucet&#x7BC4;&#x4F8B;&#x4E2D;&#x770B;&#x5230;&#x7684;&#x90A3;&#x6A23;&#xFF0C;&#x6211;&#x5011;&#x6709;&#x4E00;&#x500B;payable&#x51FD;&#x6578;&#xFF08;fallback&#x51FD;&#x6578;&#xFF09;&#xFF0C;&#x5B83;&#x662F;&#x552F;&#x4E00;&#x53EF;&#x4EE5;&#x63A5;&#x6536;&#x4ED8;&#x6B3E;&#x7684;&#x51FD;&#x6578;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="___11">&#x5408;&#x7D04;&#x69CB;&#x9020;&#x548C;&#x81EA;&#x6BC0;</h4>
<div class="paragraph">
<p>&#x6709;&#x4E00;&#x500B;&#x7279;&#x6B8A;&#x51FD;&#x6578;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x4E00;&#x6B21;&#x3002;&#x5275;&#x5EFA;&#x5408;&#x7D04;&#x6642;&#xFF0C;&#x5B83;&#x9084;&#x904B;&#x884C; <em>&#x69CB;&#x9020;&#x51FD;&#x6578;</em> <em>constructor function</em>&#xFF08;&#x5982;&#x679C;&#x5B58;&#x5728;&#xFF09;&#xFF0C;&#x4EE5;&#x521D;&#x59CB;&#x5316;&#x5408;&#x7D04;&#x72C0;&#x614B;&#x3002;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x8207;&#x5275;&#x5EFA;&#x5408;&#x7D04;&#x6642;&#x5728;&#x540C;&#x4E00;&#x500B;&#x4EA4;&#x6613;&#x4E2D;&#x904B;&#x884C;&#x3002;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x662F;&#x53EF;&#x9078;&#x7684;&#x3002;&#x4E8B;&#x5BE6;&#x4E0A;&#xFF0C;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x6C92;&#x6709;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x69CB;&#x9020;&#x51FD;&#x6578;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x5169;&#x7A2E;&#x65B9;&#x5F0F;&#x6307;&#x5B9A;&#x3002;&#x5230;Solidity v.0.4.21&#xFF0C;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x662F;&#x4E00;&#x500B;&#x540D;&#x7A31;&#x8207;&#x5408;&#x7D04;&#x540D;&#x7A31;&#x76F8;&#x5339;&#x914D;&#x7684;&#x51FD;&#x6578;&#xFF1A;</p>
</div>
<div id="old_constructor_style" class="listingblock">
<div class="title">Constructor function prior to Solidity v0.4.22</div>
<div class="content">
<pre>contract MEContract {
    function MEContract() {
        // This is the constructor
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x9019;&#x7A2E;&#x683C;&#x5F0F;&#x7684;&#x96E3;&#x9EDE;&#x5728;&#x65BC;&#x5982;&#x679C;&#x5408;&#x7D04;&#x540D;&#x7A31;&#x88AB;&#x6539;&#x8B8A;&#x4E26;&#x4E14;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x540D;&#x7A31;&#x6C92;&#x6709;&#x6539;&#x8B8A;&#xFF0C;&#x5B83;&#x5C31;&#x4E0D;&#x518D;&#x662F;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x4E86;&#x3002;&#x9019;&#x53EF;&#x80FD;&#x6703;&#x5C0E;&#x81F4;&#x4E00;&#x4E9B;&#x975E;&#x5E38;&#x4EE4;&#x4EBA;&#x8A0E;&#x53AD;&#x7684;&#xFF0C;&#x610F;&#x5916;&#x7684;&#x4E26;&#x4E14;&#x5F88;&#x96E3;&#x6CE8;&#x610F;&#x5230;&#x7684;&#x932F;&#x8AA4;&#x3002;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x6B63;&#x5728;&#x70BA;&#x63A7;&#x5236;&#x76EE;&#x7684;&#x800C;&#x8A2D;&#x7F6E;&#x5408;&#x7D04;&#x7684;&#x201C;&#x6240;&#x6709;&#x8005;&#x201D;&#x3002;&#x5B83;&#x4E0D;&#x50C5;&#x53EF;&#x4EE5;&#x5728;&#x5275;&#x5EFA;&#x5408;&#x7D04;&#x6642;&#x8A2D;&#x7F6E;&#x6240;&#x6709;&#x8005;&#xFF0C;&#x9084;&#x53EF;&#x4EE5;&#x50CF;&#x6B63;&#x5E38;&#x529F;&#x80FD;&#x90A3;&#x6A23;&#x201C;&#x53EF;&#x8ABF;&#x7528;&#x201D;&#xFF0C;&#x5141;&#x8A31;&#x4EFB;&#x4F55;&#x7B2C;&#x4E09;&#x65B9;&#x5728;&#x5408;&#x7D04;&#x5275;&#x5EFA;&#x5F8C;&#x52AB;&#x6301;&#x5408;&#x7D04;&#x4F75;&#x6210;&#x70BA;&#x201C;&#x6240;&#x6709;&#x8005;&#x201D;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x70BA;&#x4E86;&#x89E3;&#x6C7A;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x7684;&#x6F5B;&#x5728;&#x554F;&#x984C;&#xFF0C;&#x5B83;&#x57FA;&#x65BC;&#x8207;&#x5408;&#x7D04;&#x540D;&#x7A31;&#x76F8;&#x540C;&#x7684;&#x540D;&#x7A31;&#xFF0C;Solidity v0.4.22&#x5F15;&#x5165;&#x4E86;&#x4E00;&#x500B;constructor&#x95DC;&#x9375;&#x5B57;&#xFF0C;&#x5B83;&#x50CF;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x4E00;&#x6A23;&#x904B;&#x884C;&#xFF0C;&#x4F46;&#x6C92;&#x6709;&#x540D;&#x7A31;&#x3002;&#x91CD;&#x547D;&#x540D;&#x5408;&#x7D04;&#x4E26;&#x4E0D;&#x6703;&#x5F71;&#x97FF;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x66F4;&#x5BB9;&#x6613;&#x78BA;&#x5B9A;&#x54EA;&#x500B;&#x51FD;&#x6578;&#x662F;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x3002;&#x770B;&#x8D77;&#x4F86;&#x50CF;&#x9019;&#x6A23;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>pragma ^0.4.22
contract MEContract {
    constructor () {
        // This is the constructor
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x7E3D;&#x800C;&#x8A00;&#x4E4B;&#xFF0C;&#x5408;&#x7D04;&#x7684;&#x751F;&#x547D;&#x9031;&#x671F;&#x59CB;&#x65BC;EOA&#x6216;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x7684;&#x5275;&#x5EFA;&#x4EA4;&#x6613;&#x3002;&#x5982;&#x679C;&#x6709;&#x4E00;&#x500B;&#x69CB;&#x9020;&#x51FD;&#x6578;&#xFF0C;&#x5B83;&#x5C07;&#x5728;&#x76F8;&#x540C;&#x7684;&#x5275;&#x5EFA;&#x4EA4;&#x6613;&#x4E2D;&#x8ABF;&#x7528;&#xFF0C;&#x4E26;&#x53EF;&#x4EE5;&#x5728;&#x5275;&#x5EFA;&#x5408;&#x7D04;&#x6642;&#x521D;&#x59CB;&#x5316;&#x5408;&#x7D04;&#x72C0;&#x614B;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5408;&#x7D04;&#x751F;&#x547D;&#x9031;&#x671F;&#x7684;&#x53E6;&#x4E00;&#x7AEF;&#x662F; <em>&#x5408;&#x7D04;&#x92B7;&#x71EC;</em> <em>contract destruction</em>&#x3002;&#x5408;&#x7D04;&#x88AB;&#x7A31;&#x70BA;SELFDESTRUCT&#x7684;&#x7279;&#x6B8A;EVM&#x64CD;&#x4F5C;&#x78BC;&#x92B7;&#x71EC;&#x3002;&#x5B83;&#x66FE;&#x7D93;&#x662F;SUICIDE&#xFF0C;&#x4F46;&#x7531;&#x65BC;&#x8A72;&#x8A5E;&#x7684;&#x8CA0;&#x9762;&#x6027;&#xFF0C;&#x8A72;&#x540D;&#x7A31;&#x5DF2;&#x88AB;&#x68C4;&#x7528;&#x3002;&#x5728;Solidity&#x4E2D;&#xFF0C;&#x6B64;&#x64CD;&#x4F5C;&#x78BC;&#x4F5C;&#x70BA;&#x9AD8;&#x7D1A;&#x5167;&#x5EFA;&#x51FD;&#x6578;selfdestruct&#x516C;&#x958B;&#xFF0C;&#x8A72;&#x51FD;&#x6578;&#x63A1;&#x7528;&#x4E00;&#x500B;&#x53C3;&#x6578;&#xFF1A;&#x5730;&#x5740;&#x4EE5;&#x63A5;&#x6536;&#x5408;&#x7D04;&#x5E33;&#x6236;&#x4E2D;&#x5269;&#x9918;&#x7684;&#x9918;&#x984D;&#x3002;&#x770B;&#x8D77;&#x4F86;&#x50CF;&#x9019;&#x6A23;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>selfdestruct(address recipient);</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__selfdestruct_faucet">&#x6DFB;&#x52A0;&#x4E00;&#x500B;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x548C;selfdestruct&#x5230;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;</h4>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x5728;<a href="#intro">[intro]</a>&#x4E2D;&#x5F15;&#x5165;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x5408;&#x7D04;&#x6C92;&#x6709;&#x4EFB;&#x4F55;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x6216;&#x81EA;&#x6BC0;&#x51FD;&#x6578;&#x3002;&#x9019;&#x662F;&#x6C38;&#x6046;&#x7684;&#x5408;&#x7D04;&#xFF0C;&#x4E0D;&#x80FD;&#x5F9E;&#x5340;&#x584A;&#x93C8;&#x4E2D;&#x522A;&#x9664;&#x3002;&#x8B93;&#x6211;&#x5011;&#x901A;&#x904E;&#x6DFB;&#x52A0;&#x4E00;&#x500B;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x548C;selfdestruct&#x51FD;&#x6578;&#x4F86;&#x6539;&#x8B8A;&#x5B83;&#x3002;&#x6211;&#x5011;&#x53EF;&#x80FD;&#x5E0C;&#x671B;&#x81EA;&#x6BC0;&#x50C5;&#x7531;&#x6700;&#x521D;&#x5275;&#x5EFA;&#x5408;&#x7D04;&#x7684;EOA&#x4F86;&#x8ABF;&#x7528;&#x3002;&#x6309;&#x7167;&#x6163;&#x4F8B;&#xFF0C;&#x9019;&#x901A;&#x5E38;&#x5132;&#x5B58;&#x5728;&#x7A31;&#x70BA;owner&#x7684;&#x5730;&#x5740;&#x8B8A;&#x6578;&#x4E2D;&#x3002;&#x6211;&#x5011;&#x7684;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x8A2D;&#x7F6E;&#x6240;&#x6709;&#x8005;&#x8B8A;&#x6578;&#xFF0C;&#x4E26;&#x4E14;selfdestruct&#x51FD;&#x6578;&#x5C07;&#x9996;&#x5148;&#x6AA2;&#x67E5;&#x662F;&#x5426;&#x662F;&#x6240;&#x6709;&#x8005;&#x8ABF;&#x7528;&#x5B83;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x9996;&#x5148;&#x662F;&#x6211;&#x5011;&#x7684;&#x69CB;&#x9020;&#x51FD;&#x6578;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Version of Solidity compiler this program was written for
pragma solidity ^0.4.22;

// Our first contract is a faucet!
contract Faucet {

    address owner;

    // Initialize Faucet contract: set owner
    constructor() {
        owner = msg.sender;
    }

[...]</pre>
</div>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x5DF2;&#x7D93;&#x66F4;&#x6539;&#x4E86;pragma&#x6307;&#x4EE4;&#xFF0C;&#x5C07;v0.4.22&#x6307;&#x5B9A;&#x70BA;&#x6B64;&#x7BC4;&#x4F8B;&#x7684;&#x6700;&#x4F4E;&#x7248;&#x672C;&#xFF0C;&#x56E0;&#x70BA;&#x6211;&#x5011;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x50C5;&#x5B58;&#x5728;&#x65BC;Solidity v.0.4.22&#x4E2D;&#x7684;constructor&#x95DC;&#x9375;&#x5B57;&#x3002;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x73FE;&#x5728;&#x6709;&#x4E00;&#x500B;&#x540D;&#x70BA;owner&#x7684;address&#x985E;&#x578B;&#x8B8A;&#x6578;&#x3002;&#x540D;&#x7A31;&#x201C;owner&#x201D;&#x4E0D;&#x662F;&#x7279;&#x6B8A;&#x7684;&#x3002;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x5C07;&#x9019;&#x500B;&#x5730;&#x5740;&#x8B8A;&#x6578;&#x7A31;&#x70BA;&#x201C;potato&#x201D;&#xFF0C;&#x4ECD;&#x7136;&#x4EE5;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x4F7F;&#x7528;&#x5B83;&#x3002;&#x540D;&#x7A31;owner&#x53EA;&#x662F;&#x7C21;&#x55AE;&#x660E;&#x77AD;&#x7684;&#x76EE;&#x7684;&#x548C;&#x76EE;&#x7684;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x7136;&#x5F8C;&#xFF0C;&#x4F5C;&#x70BA;&#x5408;&#x7D04;&#x5275;&#x5EFA;&#x4EA4;&#x6613;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x904B;&#x884C;&#x7684;constructor&#x51FD;&#x6578;&#x5C07;msg.sender&#x7684;&#x5730;&#x5740;&#x5206;&#x914D;&#x7D66;owner&#x8B8A;&#x6578;&#x3002;&#x6211;&#x5011;&#x4F7F;&#x7528; withdraw &#x51FD;&#x6578;&#x4E2D;&#x7684; msg.sender &#x4F86; &#x6A19;&#x8B58;&#x63D0;&#x6B3E;&#x8ACB;&#x6C42;&#x7684;&#x4F86;&#x6E90;&#x3002;&#x7136;&#x800C;&#xFF0C;&#x5728;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x4E2D;&#xFF0C;msg.sender&#x662F;&#x7C3D;&#x7F72;&#x5408;&#x7D04;&#x5275;&#x5EFA;&#x4EA4;&#x6613;&#x7684;EOA&#x6216;&#x5408;&#x7D04;&#x5730;&#x5740;&#x3002;&#x9019;&#x662F;&#x4E8B;&#x5BE6;&#xFF0C;&#x56E0;&#x70BA;&#x9019;&#x662F;&#x4E00;&#x500B;&#x69CB;&#x9020;&#x51FD;&#x6578;&#xFF1A;&#x5B83;&#x53EA;&#x904B;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x4E26;&#x4E14;&#x50C5;&#x4F5C;&#x70BA;&#x5408;&#x7D04;&#x5275;&#x5EFA;&#x4EA4;&#x6613;&#x7684;&#x7D50;&#x679C;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x597D;&#x7684;&#xFF0C;&#x73FE;&#x5728;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4E00;&#x500B;&#x51FD;&#x6578;&#x4F86;&#x92B7;&#x71EC;&#x5408;&#x7D04;&#x3002;&#x6211;&#x5011;&#x9700;&#x8981;&#x78BA;&#x4FDD;&#x53EA;&#x6709;&#x6240;&#x6709;&#x8005;&#x624D;&#x80FD;&#x904B;&#x884C;&#x6B64;&#x51FD;&#x6578;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x5011;&#x5C07;&#x4F7F;&#x7528;require&#x8A9E;&#x53E5;&#x4F86;&#x63A7;&#x5236;&#x8A2A;&#x554F;&#x3002;&#x770B;&#x8D77;&#x4F86;&#x50CF;&#x9019;&#x6A23;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Contract destructor
function destroy() public {
    require(msg.sender == owner);
    selfdestruct(owner);
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5982;&#x679C;&#x5176;&#x4ED6;&#x4EBA;&#x7528; owner &#x4EE5;&#x5916;&#x7684;&#x5730;&#x5740;&#x8ABF;&#x7528; destroy &#x51FD;&#x6578;&#xFF0C;&#x5247;&#x5C07;&#x5931;&#x6557;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5982;&#x679C;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x5132;&#x5B58;&#x5728; owner &#x4E2D;&#x7684;&#x5730;&#x5740;&#x8ABF;&#x7528;&#x5B83;&#xFF0C;&#x5408;&#x7D04;&#x5C07;&#x81EA;&#x6BC0;&#xFF0C;&#x4E26;&#x5C07;&#x5269;&#x9918;&#x9918;&#x984D;&#x767C;&#x9001;&#x5230; owner &#x5730;&#x5740;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="___12">&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;</h4>
<div class="paragraph">
<p>Solidity&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7A2E;&#x7A31;&#x70BA;<em>&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;</em>&#x7684;&#x7279;&#x6B8A;&#x985E;&#x578B;&#x7684;&#x51FD;&#x6578;&#x3002;&#x901A;&#x904E;&#x5728;&#x51FD;&#x6578;&#x5BA3;&#x544A;&#x4E2D;&#x6DFB;&#x52A0;&#x4FEE;&#x98FE;&#x5668;&#x540D;&#x7A31;&#xFF0C;&#x53EF;&#x4EE5;&#x5C07;&#x4FEE;&#x98FE;&#x5668;&#x61C9;&#x7528;&#x65BC;&#x51FD;&#x6578;&#x3002;&#x4FEE;&#x98FE;&#x5668;&#x51FD;&#x6578;&#x901A;&#x5E38;&#x7528;&#x65BC;&#x5275;&#x5EFA;&#x9069;&#x7528;&#x65BC;&#x5408;&#x7D04;&#x4E2D;&#x8A31;&#x591A;&#x51FD;&#x6578;&#x7684;&#x689D;&#x4EF6;&#x3002;&#x6211;&#x5011;&#x5DF2;&#x7D93;&#x5728;&#x6211;&#x5011;&#x7684;destroy&#x51FD;&#x6578;&#x4E2D;&#x6709;&#x4E00;&#x500B;&#x8A2A;&#x554F;&#x63A7;&#x5236;&#x8A9E;&#x53E5;&#x3002;&#x8B93;&#x6211;&#x5011;&#x5275;&#x5EFA;&#x4E00;&#x500B;&#x8868;&#x9054;&#x8A72;&#x689D;&#x4EF6;&#x7684;&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#xFF1A;</p>
</div>
<div id="function_modifier_onlyowner" class="listingblock">
<div class="title">onlyOwner function modifier</div>
<div class="content">
<pre>modifier onlyOwner {
    require(msg.sender == owner);
    _;
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5728; <a href="#function_modifier_onlyowner">onlyOwner function modifier</a> &#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x770B;&#x5230;&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#x7684;&#x5BA3;&#x544A;&#xFF0C;&#x540D;&#x70BA;onlyOwner&#x3002;&#x6B64;&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#x70BA;&#x5176;&#x4FEE;&#x98FE;&#x7684;&#x4EFB;&#x4F55;&#x51FD;&#x6578;&#x8A2D;&#x7F6E;&#x689D;&#x4EF6;&#xFF0C;&#x8981;&#x6C42;&#x5132;&#x5B58;&#x70BA;&#x5408;&#x7D04;&#x7684;owner&#x7684;&#x5730;&#x5740;&#x8207;&#x4EA4;&#x6613;&#x7684;msg.sender&#x7684;&#x5730;&#x5740;&#x76F8;&#x540C;&#x3002;&#x9019;&#x662F;&#x8A2A;&#x554F;&#x63A7;&#x5236;&#x7684;&#x57FA;&#x672C;&#x8A2D;&#x8A08;&#x6A21;&#x5F0F;&#xFF0C;&#x53EA;&#x5141;&#x8A31;&#x5408;&#x7D04;&#x7684;&#x6240;&#x6709;&#x8005;&#x57F7;&#x884C;&#x5177;&#x6709;onlyOwner&#x4FEE;&#x98FE;&#x5668;&#x7684;&#x4EFB;&#x4F55;&#x51FD;&#x6578;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4F60;&#x53EF;&#x80FD;&#x5DF2;&#x7D93;&#x6CE8;&#x610F;&#x5230;&#x6211;&#x5011;&#x7684;&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#x5728;&#x5176;&#x4E2D;&#x6709;&#x4E00;&#x500B;&#x7279;&#x6B8A;&#x7684;&#x8A9E;&#x6CD5;&#x201C;&#x4F54;&#x4F4D;&#x7B26;&#x201D;&#xFF0C;&#x4E0B;&#x5283;&#x7DDA;&#x5F8C;&#x8DDF;&#x5206;&#x865F;&#xFF08;_;&#xFF09;&#x3002;&#x6B64;&#x4F54;&#x4F4D;&#x7B26;&#x7531;&#x6B63;&#x5728;&#x4FEE;&#x98FE;&#x7684;&#x51FD;&#x6578;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x66FF;&#x63DB;&#x3002;&#x672C;&#x8CEA;&#x4E0A;&#xFF0C;&#x4FEE;&#x98FE;&#x5668;&#x201C;&#x4FEE;&#x98FE;&#x201D;&#x4FEE;&#x98FE;&#x904E;&#x7684;&#x51FD;&#x6578;&#xFF0C;&#x5C07;&#x5176;&#x7A0B;&#x5F0F;&#x78BC;&#x7F6E;&#x65BC;&#x7531;&#x4E0B;&#x5283;&#x7DDA;&#x5B57;&#x7B26;&#x6A19;&#x8B58;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8981;&#x61C9;&#x7528;&#x4FEE;&#x98FE;&#x5668;&#xFF0C;&#x8ACB;&#x5C07;&#x5176;&#x540D;&#x7A31;&#x6DFB;&#x52A0;&#x5230;&#x51FD;&#x6578;&#x5BA3;&#x544A;&#x4E2D;&#x3002;&#x53EF;&#x4EE5;&#x5C07;&#x591A;&#x500B;&#x4FEE;&#x98FE;&#x5668;&#x61C9;&#x7528;&#x65BC;&#x4E00;&#x500B;&#x51FD;&#x6578;&#xFF0C;&#x4F5C;&#x70BA;&#x9017;&#x865F;&#x5206;&#x9694;&#x7684;&#x5217;&#x8868;&#xFF0C;&#x4EE5;&#x5BA3;&#x544A;&#x7684;&#x9806;&#x5E8F;&#x61C9;&#x7528;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x91CD;&#x65B0;&#x7DE8;&#x5BEB;destroy&#x51FD;&#x6578;&#x4F86;&#x4F7F;&#x7528;onlyOwner&#x4FEE;&#x98FE;&#x5668;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>function destroy() public onlyOwner {
    selfdestruct(owner);
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#x7684;&#x540D;&#x7A31;&#xFF08;onlyOwner&#xFF09;&#x4F4D;&#x65BC;&#x95DC;&#x9375;&#x5B57;public&#x4E4B;&#x5F8C;&#xFF0C;&#x4E26;&#x544A;&#x8A34;&#x6211;&#x5011;destroy&#x51FD;&#x6578;&#x7531;onlyOwner&#x4FEE;&#x98FE;&#x5668;&#x4FEE;&#x98FE;&#x3002;&#x57FA;&#x672C;&#x4E0A;&#x4F60;&#x53EF;&#x4EE5;&#x628A;&#x5B83;&#x5BEB;&#x6210;&#xFF1A;&#x201C;&#x53EA;&#x6709;&#x6240;&#x6709;&#x8005;&#x624D;&#x80FD;&#x92B7;&#x71EC;&#x9019;&#x4EFD;&#x5408;&#x7D04;&#x201D;&#x3002;&#x5BE6;&#x969B;&#x4E0A;&#xFF0C;&#x751F;&#x6210;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x76F8;&#x7576;&#x65BC;&#x7531;onlyOwner &#x201C;&#x5305;&#x88DD;&#x201D; &#x7684;destroy&#x7A0B;&#x5F0F;&#x78BC;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#x662F;&#x4E00;&#x500B;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x5DE5;&#x5177;&#xFF0C;&#x56E0;&#x70BA;&#x5B83;&#x5011;&#x5141;&#x8A31;&#x6211;&#x5011;&#x70BA;&#x51FD;&#x6578;&#x7DE8;&#x5BEB;&#x524D;&#x63D0;&#x689D;&#x4EF6;&#x4E26;&#x4E00;&#x81F4;&#x5730;&#x61C9;&#x7528;&#x5B83;&#x5011;&#xFF0C;&#x4F7F;&#x7A0B;&#x5F0F;&#x78BC;&#x66F4;&#x6613;&#x65BC;&#x95B1;&#x8B80;&#xFF0C;&#x56E0;&#x6B64;&#x66F4;&#x6613;&#x65BC;&#x5BE9;&#x8A08;&#x5B89;&#x5168;&#x554F;&#x984C;&#x3002;&#x5B83;&#x5011;&#x6700;&#x5E38;&#x7528;&#x65BC;&#x8A2A;&#x554F;&#x63A7;&#x5236;&#xFF0C;&#x5982;&#x7BC4;&#x4F8B;&#x4E2D;&#x7684;&#x201C;function_modifier_onlyowner&#x201D;&#xFF0C;&#x4F46;&#x529F;&#x80FD;&#x5F88;&#x591A;&#xFF0C;&#x53EF;&#x7528;&#x65BC;&#x5404;&#x7A2E;&#x5176;&#x4ED6;&#x76EE;&#x7684;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;&#x4FEE;&#x98FE;&#x51FD;&#x6578;&#x5167;&#x90E8;&#xFF0C;&#x53EF;&#x4EE5;&#x8A2A;&#x554F;&#x88AB;&#x4FEE;&#x98FE;&#x7684;&#x51FD;&#x6578;&#x7684;&#x7684;&#x6240;&#x6709;&#x53EF;&#x898B;&#x7B26;&#x865F;&#xFF08;&#x8B8A;&#x6578;&#x548C;&#x53C3;&#x6578;&#xFF09;&#x3002;&#x5728;&#x9019;&#x7A2E;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x8A2A;&#x554F;&#x5728;&#x5408;&#x7D04;&#x4E2D;&#x5BA3;&#x544A;&#x7684;owner&#x8B8A;&#x6578;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x53CD;&#x904E;&#x4F86;&#x4E26;&#x4E0D;&#x6B63;&#x78BA;&#xFF1A;&#x4F60;&#x7121;&#x6CD5;&#x8A2A;&#x554F;&#x4FEE;&#x98FE;&#x51FD;&#x6578;&#x4E2D;&#x7684;&#x4EFB;&#x4F55;&#x8B8A;&#x6578;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="___13">&#x5408;&#x7D04;&#x7E7C;&#x627F;</h4>
<div class="paragraph">
<p>Solidity&#x7684;&#x5408;&#x7D04;&#x7269;&#x4EF6;&#x652F;&#x6301; <em>&#x7E7C;&#x627F;</em>&#xFF0C;&#x9019;&#x662F;&#x4E00;&#x7A2E;&#x7528;&#x9644;&#x52A0;&#x529F;&#x80FD;&#x64F4;&#x5C55;&#x57FA;&#x790E;&#x5408;&#x7D04;&#x7684;&#x6A5F;&#x5236;&#x3002;&#x8981;&#x4F7F;&#x7528;&#x7E7C;&#x627F;&#xFF0C;&#x8ACB;&#x4F7F;&#x7528;&#x95DC;&#x9375;&#x5B57;is&#x6307;&#x5B9A;&#x7236;&#x5408;&#x7D04;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract Child is Parent {
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x901A;&#x904E;&#x9019;&#x500B;&#x69CB;&#x9020;&#xFF0C;Child&#x5408;&#x7D04;&#x7E7C;&#x627F;&#x4E86;Parent&#x7684;&#x6240;&#x6709;&#x65B9;&#x6CD5;&#xFF0C;&#x529F;&#x80FD;&#x548C;&#x8B8A;&#x6578;&#x3002;Solidity&#x9084;&#x652F;&#x6301;&#x591A;&#x91CD;&#x7E7C;&#x627F;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x95DC;&#x9375;&#x5B57;is&#x4E4B;&#x5F8C;&#x7528;&#x9017;&#x865F;&#x5206;&#x9694;&#x7684;&#x5408;&#x7D04;&#x540D;&#x7A31;&#x6307;&#x5B9A;&#x591A;&#x91CD;&#x7E7C;&#x627F;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract Child is Parent1, Parent2 {
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5408;&#x7D04;&#x7E7C;&#x627F;&#x4F7F;&#x6211;&#x5011;&#x80FD;&#x5920;&#x4EE5;&#x5BE6;&#x73FE;&#x6A21;&#x584A;&#x5316;&#xFF0C;&#x53EF;&#x64F4;&#x5C55;&#x6027;&#x548C;&#x91CD;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x7DE8;&#x5BEB;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x3002;&#x6211;&#x5011;&#x5F9E;&#x7C21;&#x55AE;&#x7684;&#x5408;&#x7D04;&#x958B;&#x59CB;&#xFF0C;&#x5BE6;&#x73FE;&#x6700;&#x901A;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x7136;&#x5F8C;&#x901A;&#x904E;&#x5728;&#x66F4;&#x5177;&#x9AD4;&#x7684;&#x5408;&#x7D04;&#x4E2D;&#x7E7C;&#x627F;&#x9019;&#x4E9B;&#x529F;&#x80FD;&#x4F86;&#x64F4;&#x5C55;&#x5B83;&#x5011;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x5408;&#x7D04;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5F15;&#x5165;&#x4E86;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x548C;&#x6790;&#x69CB;&#x51FD;&#x6578;&#xFF0C;&#x4EE5;&#x53CA;&#x70BA;&#x69CB;&#x5EFA;&#x6642;&#x6307;&#x5B9A;&#x7684;owner&#x63D0;&#x4F9B;&#x7684;&#x8A2A;&#x554F;&#x63A7;&#x5236;&#x3002;&#x9019;&#x4E9B;&#x529F;&#x80FD;&#x975E;&#x5E38;&#x901A;&#x7528;&#xFF1A;&#x8A31;&#x591A;&#x5408;&#x7D04;&#x90FD;&#x6709;&#x5B83;&#x5011;&#x3002;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x5C07;&#x5B83;&#x5011;&#x5B9A;&#x7FA9;&#x70BA;&#x901A;&#x7528;&#x5408;&#x7D04;&#xFF0C;&#x7136;&#x5F8C;&#x4F7F;&#x7528;&#x7E7C;&#x627F;&#x5C07;&#x5B83;&#x5011;&#x64F4;&#x5C55;&#x5230;Faucet&#x5408;&#x7D04;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x9996;&#x5148;&#x5B9A;&#x7FA9;&#x4E00;&#x500B;&#x57FA;&#x790E;&#x5408;&#x7D04;owned&#xFF0C;&#x5B83;&#x64C1;&#x6709;&#x4E00;&#x500B;owner&#x8B8A;&#x6578;&#xFF0C;&#x4E26;&#x5728;&#x5408;&#x7D04;&#x7684;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x4E2D;&#x8A2D;&#x7F6E;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract owned {
    address owner;

    // Contract constructor: set owner
    constructor() {
        owner = msg.sender;
    }

    // Access control modifier
    modifier onlyOwner {
        require(msg.sender == owner);
        _;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x63A5;&#x4E0B;&#x4F86;&#xFF0C;&#x6211;&#x5011;&#x5B9A;&#x7FA9;&#x4E00;&#x500B;&#x57FA;&#x672C;&#x5408;&#x7D04; mortal&#xFF0C;&#x7E7C;&#x627F;&#x81EA; owned&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract mortal is owned {
    // Contract destructor
    function destroy() public onlyOwner {
        selfdestruct(owner);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5982;&#x4F60;&#x6240;&#x898B;&#xFF0C;mortal &#x5408;&#x7D04;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5728;owned&#x4E2D;&#x5B9A;&#x7FA9;&#x7684;ownOwner&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#x3002;&#x5B83;&#x9593;&#x63A5;&#x5730;&#x4E5F;&#x4F7F;&#x7528;owner address&#x8B8A;&#x6578;&#x548C;owned&#x4E2D;&#x5B9A;&#x7FA9;&#x7684;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x3002;&#x7E7C;&#x627F;&#x4F7F;&#x6BCF;&#x500B;&#x5408;&#x7D04;&#x8B8A;&#x5F97;&#x66F4;&#x7C21;&#x55AE;&#xFF0C;&#x4E26;&#x5C08;&#x6CE8;&#x65BC;&#x5176;&#x985E;&#x7684;&#x7279;&#x5B9A;&#x529F;&#x80FD;&#xFF0C;&#x4F7F;&#x6211;&#x5011;&#x80FD;&#x5920;&#x4EE5;&#x6A21;&#x7D44;&#x5316;&#x7684;&#x65B9;&#x5F0F;&#x7BA1;&#x7406;&#x7D30;&#x7BC0;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x73FE;&#x5728;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x9032;&#x4E00;&#x6B65;&#x64F4;&#x5C55;owned&#x5408;&#x7D04;&#xFF0C;&#x5728;Faucet&#x4E2D;&#x7E7C;&#x627F;&#x5176;&#x529F;&#x80FD;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract Faucet is mortal {
    // Give out ether to anyone who asks
    function withdraw(uint withdraw_amount) public {
        // Limit withdrawal amount
        require(withdraw_amount &lt;= 100000000000000000);
        // Send the amount to the address that requested it
        msg.sender.transfer(withdraw_amount);
    }
    // Accept any incoming amount
    function () public payable {}
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x901A;&#x904E;&#x7E7C;&#x627F;mortal&#xFF0C;&#x7E7C;&#x800C;&#x7E7C;&#x627F;owned&#xFF0C;Faucet&#x5408;&#x7D04;&#x73FE;&#x5728;&#x5177;&#x6709;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x548C;&#x92B7;&#x71EC;&#x51FD;&#x6578;&#x4EE5;&#x53CA;&#x5B9A;&#x7FA9;&#x7684;owner&#x3002;&#x9019;&#x4E9B;&#x529F;&#x80FD;&#x8207;Faucet&#x4E2D;&#x7684;&#x529F;&#x80FD;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x73FE;&#x5728;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x5728;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x4E2D;&#x91CD;&#x7528;&#x9019;&#x4E9B;&#x529F;&#x80FD;&#x800C;&#x7121;&#x9700;&#x518D;&#x6B21;&#x5BEB;&#x5165;&#x5B83;&#x5011;&#x3002;&#x7A0B;&#x5F0F;&#x78BC;&#x91CD;&#x7528;&#x548C;&#x6A21;&#x584A;&#x5316;&#x4F7F;&#x6211;&#x5011;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x66F4;&#x6E05;&#x6670;&#xFF0C;&#x66F4;&#x6613;&#x65BC;&#x95B1;&#x8B80;&#xFF0C;&#x4E26;&#x4E14;&#x66F4;&#x6613;&#x65BC;&#x5BE9;&#x8A08;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="__assert_require_revert">&#x932F;&#x8AA4;&#x8655;&#x7406;&#xFF08;assert, require, revert&#xFF09;</h4>
<div class="paragraph">
<p>&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x53EF;&#x4EE5;&#x7D42;&#x6B62;&#x4E26;&#x8FD4;&#x56DE;&#x932F;&#x8AA4;&#x3002;Solidity&#x4E2D;&#x7684;&#x932F;&#x8AA4;&#x7531;&#x56DB;&#x500B;&#x51FD;&#x6578;&#x8655;&#x7406;&#xFF1A;assert, require, revert, &#x548C; throw&#xFF08;&#x73FE;&#x5728;&#x5DF2;&#x68C4;&#x7528;&#xFF09;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x7576;&#x5408;&#x7D04;&#x7D42;&#x6B62;&#x4E26;&#x51FA;&#x73FE;&#x932F;&#x8AA4;&#x6642;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x591A;&#x500B;&#x5408;&#x7D04;&#x88AB;&#x8ABF;&#x7528;&#xFF0C;&#x5247;&#x6240;&#x6709;&#x72C0;&#x614B;&#x8B8A;&#x5316;&#xFF08;&#x8B8A;&#x6578;&#xFF0C;&#x9918;&#x984D;&#x7B49;&#x7684;&#x8B8A;&#x5316;&#xFF09;&#x90FD;&#x6703;&#x6062;&#x5FA9;&#xFF0C;&#x76F4;&#x81F3;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x93C8;&#x7684;&#x6E90;&#x982D;&#x3002;&#x9019;&#x78BA;&#x4FDD;&#x4EA4;&#x6613;&#x662F;&#x539F;&#x5B50;&#x7684;&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x5B83;&#x5011;&#x8981;&#x9EBC;&#x6210;&#x529F;&#x5B8C;&#x6210;&#xFF0C;&#x8981;&#x9EBC;&#x5C0D;&#x72C0;&#x614B;&#x6C92;&#x6709;&#x5F71;&#x97FF;&#xFF0C;&#x4E26;&#x5B8C;&#x5168;&#x6062;&#x5FA9;&#x3002;</p>
</div>
<div class="paragraph">
<p>assert&#x548C;require&#x51FD;&#x6578;&#x4EE5;&#x76F8;&#x540C;&#x7684;&#x65B9;&#x5F0F;&#x904B;&#x884C;&#xFF0C;&#x5982;&#x679C;&#x689D;&#x4EF6;&#x70BA;&#x5047;&#xFF0C;&#x5247;&#x8A55;&#x4F30;&#x689D;&#x4EF6;&#x4E26;&#x505C;&#x6B62;&#x57F7;&#x884C;&#x4E26;&#x8FD4;&#x56DE;&#x932F;&#x8AA4;&#x3002;&#x6309;&#x7167;&#x6163;&#x4F8B;&#xFF0C;&#x7576;&#x7D50;&#x679C;&#x9810;&#x671F;&#x70BA;&#x771F;&#x6642;&#x4F7F;&#x7528;assert&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x6211;&#x5011;&#x4F7F;&#x7528;assert&#x4F86;&#x6E2C;&#x8A66;&#x5167;&#x90E8;&#x689D;&#x4EF6;&#x3002;&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;&#xFF0C;&#x5728;&#x6E2C;&#x8A66;&#x8F38;&#x5165;&#xFF08;&#x4F8B;&#x5982;&#x51FD;&#x6578;&#x53C3;&#x6578;&#x6216;&#x4EA4;&#x6613;&#x6B04;&#x4F4D;&#xFF09;&#x6642;&#x4F7F;&#x7528;require&#xFF0C;&#x8A2D;&#x7F6E;&#x6211;&#x5011;&#x5C0D;&#x9019;&#x4E9B;&#x689D;&#x4EF6;&#x7684;&#x671F;&#x671B;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x5728;&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;onlyOwner&#x4E2D;&#x4F7F;&#x7528;&#x4E86;require&#x4F86;&#x6E2C;&#x8A66;&#x6D88;&#x606F;&#x767C;&#x9001;&#x8005;&#x662F;&#x5408;&#x7D04;&#x7684;&#x6240;&#x6709;&#x8005;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>require(msg.sender == owner);</pre>
</div>
</div>
<div class="paragraph">
<p>require &#x51FD;&#x6578;&#x5145;&#x7576;<em>&#x5B88;&#x8B77;&#x689D;&#x4EF6;</em>&#xFF0C;&#x963B;&#x6B62;&#x57F7;&#x884C;&#x51FD;&#x6578;&#x7684;&#x5176;&#x9918;&#x90E8;&#x5206;&#xFF0C;&#x4E26;&#x5728;&#x4E0D;&#x6EFF;&#x8DB3;&#x6642;&#x7522;&#x751F;&#x932F;&#x8AA4;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5F9E;Solidity v.0.4.22&#x958B;&#x59CB;&#xFF0C;require&#x9084;&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x6709;&#x7528;&#x7684;&#x6587;&#x5B57;&#x6D88;&#x606F;&#xFF0C;&#x53EF;&#x7528;&#x65BC;&#x986F;&#x793A;&#x932F;&#x8AA4;&#x7684;&#x539F;&#x56E0;&#x3002;&#x932F;&#x8AA4;&#x6D88;&#x606F;&#x8A18;&#x9304;&#x5728;&#x4EA4;&#x6613;&#x65E5;&#x8A8C;&#x4E2D;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x5728;&#x6211;&#x5011;&#x7684;require&#x51FD;&#x6578;&#x4E2D;&#x6DFB;&#x52A0;&#x4E00;&#x689D;&#x932F;&#x8AA4;&#x6D88;&#x606F;&#x4F86;&#x6539;&#x9032;&#x6211;&#x5011;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>require(msg.sender == owner, &quot;Only the contract owner can call this function&quot;);</pre>
</div>
</div>
<div class="paragraph">
<p>revert &#x548C; throw &#x51FD;&#x6578;&#xFF0C;&#x505C;&#x6B62;&#x57F7;&#x884C;&#x5408;&#x7D04;&#x4E26;&#x9084;&#x539F;&#x4EFB;&#x4F55;&#x72C0;&#x614B;&#x66F4;&#x6539;&#x3002;throw&#x51FD;&#x6578;&#x5DF2;&#x904E;&#x6642;&#xFF0C;&#x5C07;&#x5728;&#x672A;&#x4F86;&#x7248;&#x672C;&#x7684;Solidity&#x4E2D;&#x522A;&#x9664; - &#x4F60;&#x61C9;&#x8A72;&#x4F7F;&#x7528;revert&#x4EE3;&#x66FF;&#x3002;revert&#x51FD;&#x6578;&#x9084;&#x53EF;&#x4EE5;&#x5C07;&#x4F5C;&#x70BA;&#x552F;&#x4E00;&#x53C3;&#x6578;&#x7684;&#x932F;&#x8AA4;&#x6D88;&#x606F;&#x8A18;&#x9304;&#x5728;&#x4EA4;&#x6613;&#x65E5;&#x8A8C;&#x4E2D;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x7121;&#x8AD6;&#x6211;&#x5011;&#x662F;&#x5426;&#x660E;&#x78BA;&#x6AA2;&#x67E5;&#x5B83;&#x5011;&#xFF0C;&#x5408;&#x7D04;&#x4E2D;&#x7684;&#x67D0;&#x4E9B;&#x689D;&#x4EF6;&#x90FD;&#x6703;&#x7522;&#x751F;&#x932F;&#x8AA4;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x5408;&#x7D04;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x4E0D;&#x6AA2;&#x67E5;&#x662F;&#x5426;&#x6709;&#x8DB3;&#x5920;&#x7684;ether&#x4F86;&#x6EFF;&#x8DB3;&#x63D0;&#x6B3E;&#x8ACB;&#x6C42;&#x3002;&#x9019;&#x662F;&#x56E0;&#x70BA;&#x5982;&#x679C;&#x6C92;&#x6709;&#x8DB3;&#x5920;&#x7684;&#x9918;&#x984D;&#x9032;&#x884C;&#x8F49;&#x5E33;&#xFF0C;transfer&#x51FD;&#x6578;&#x5C07;&#x5931;&#x6557;&#x4E26;&#x6062;&#x5FA9;&#x4EA4;&#x6613;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="title">The transfer function will fail if there is an insufficient balance</div>
<div class="content">
<pre>msg.sender.transfer(withdraw_amount);</pre>
</div>
</div>
<div class="paragraph">
<p>&#x4F46;&#x662F;&#xFF0C;&#x6700;&#x597D;&#x660E;&#x78BA;&#x6AA2;&#x67E5;&#xFF0C;&#x4E26;&#x5728;&#x5931;&#x6557;&#x6642;&#x63D0;&#x4F9B;&#x660E;&#x78BA;&#x7684;&#x932F;&#x8AA4;&#x6D88;&#x606F;&#x3002;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x5728;&#x8F49;&#x79FB;&#x4E4B;&#x524D;&#x6DFB;&#x52A0;&#x4E00;&#x500B;require&#x8A9E;&#x53E5;&#x4F86;&#x5BE6;&#x73FE;&#x9019;&#x4E00;&#x9EDE;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>require(this.balance &gt;= withdraw_amount,
    &quot;Insufficient balance in faucet for withdrawal request&quot;);
msg.sender.transfer(withdraw_amount);</pre>
</div>
</div>
<div class="paragraph">
<p>&#x50CF;&#x9019;&#x6A23;&#x7684;&#x5176;&#x4ED6;&#x932F;&#x8AA4;&#x6AA2;&#x67E5;&#x7A0B;&#x5F0F;&#x78BC;&#x6703;&#x7565;&#x5FAE;&#x589E;&#x52A0;gas&#x6D88;&#x8017;&#xFF0C;&#x4F46;&#x5B83;&#x6BD4;&#x4E0D;&#x6AA2;&#x67E5;&#x63D0;&#x4F9B;&#x4E86;&#x66F4;&#x597D;&#x7684;&#x932F;&#x8AA4;&#x5831;&#x544A;&#x3002;&#x5728;gas&#x91CF;&#x548C;&#x8A73;&#x7D30;&#x932F;&#x8AA4;&#x6AA2;&#x67E5;&#x4E4B;&#x9593;&#x53D6;&#x5F97;&#x9069;&#x7576;&#x7684;&#x5E73;&#x8861;&#x662F;&#x4F60;&#x9700;&#x8981;&#x6839;&#x64DA;&#x5408;&#x7D04;&#x7684;&#x9810;&#x671F;&#x7528;&#x9014;&#x4F86;&#x6C7A;&#x5B9A;&#x7684;&#x3002;&#x5728;&#x70BA;&#x6E2C;&#x8A66;&#x7DB2;&#x8DEF;&#x8A2D;&#x8A08;&#x7684;Faucet&#x7684;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x5373;&#x4F7F;&#x984D;&#x5916;&#x5831;&#x544A;&#x6210;&#x672C;&#x66F4;&#x9AD8;&#xFF0C;&#x6211;&#x5011;&#x4E5F;&#x4E0D;&#x5192;&#x96AA;&#x72AF;&#x932F;&#x3002;&#x4E5F;&#x8A31;&#x5C0D;&#x65BC;&#x4E00;&#x500B;&#x4E3B;&#x7DB2;&#x5408;&#x7D04;&#xFF0C;&#x6211;&#x5011;&#x6703;&#x9078;&#x64C7;&#x7BC0;&#x7D04;gas&#x7528;&#x91CF;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="__events">&#x4E8B;&#x4EF6;&#xFF08;Events&#xFF09;</h4>
<div class="paragraph">
<p>&#x4E8B;&#x4EF6;&#x662F;&#x4FBF;&#x65BC;&#x751F;&#x7522;&#x4EA4;&#x6613;&#x65E5;&#x8A8C;&#x7684;Solidity&#x69CB;&#x9020;&#x3002;&#x7576;&#x4E00;&#x500B;&#x4EA4;&#x6613;&#x5B8C;&#x6210;&#xFF08;&#x6210;&#x529F;&#x8207;&#x5426;&#xFF09;&#x6642;&#xFF0C;&#x5B83;&#x6703;&#x7522;&#x751F;&#x4E00;&#x500B; <em>&#x4EA4;&#x6613;&#x6536;&#x64DA;</em> <em>transaction receipt</em>&#xFF0C;&#x5C31;&#x50CF;&#x6211;&#x5011;&#x5728; <a href="#evm">[evm]</a> &#x4E2D;&#x770B;&#x5230;&#x7684;&#x90A3;&#x6A23;&#x3002;&#x4EA4;&#x6613;&#x6536;&#x64DA;&#x5305;&#x542B;<em>log</em>&#x689D;&#x76EE;&#xFF0C;&#x7528;&#x65BC;&#x63D0;&#x4F9B;&#x6709;&#x95DC;&#x5728;&#x57F7;&#x884C;&#x4EA4;&#x6613;&#x671F;&#x9593;&#x767C;&#x751F;&#x7684;&#x64CD;&#x4F5C;&#x7684;&#x8CC7;&#x8A0A;&#x3002;&#x4E8B;&#x4EF6;&#x662F;&#x7528;&#x65BC;&#x69CB;&#x9020;&#x9019;&#x4E9B;&#x65E5;&#x8A8C;&#x7684;Solidity&#x9AD8;&#x7D1A;&#x7269;&#x4EF6;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4E8B;&#x4EF6;&#x5728;&#x8F15;&#x91CF;&#x7D1A;&#x5BA2;&#x6236;&#x7AEF;&#x548C;DApps&#x4E2D;&#x7279;&#x5225;&#x6709;&#x7528;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x201C;&#x76E3;&#x8996;&#x201D;&#x7279;&#x5B9A;&#x4E8B;&#x4EF6;&#x4E26;&#x5C07;&#x5176;&#x5831;&#x544A;&#x7D66;&#x7528;&#x6236;&#x754C;&#x9762;&#xFF0C;&#x6216;&#x5C0D;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x7684;&#x72C0;&#x614B;&#x9032;&#x884C;&#x66F4;&#x6539;&#x4EE5;&#x53CD;&#x6620;&#x5E95;&#x5C64;&#x5408;&#x7D04;&#x4E2D;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4E8B;&#x4EF6;&#x7269;&#x4EF6;&#x63A5;&#x6536;&#x5E8F;&#x5217;&#x5316;&#x7684;&#x53C3;&#x6578;&#x4E26;&#x8A18;&#x9304;&#x5728;&#x5340;&#x584A;&#x93C8;&#x7684;&#x4EA4;&#x6613;&#x65E5;&#x8A8C;&#x4E2D;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x53C3;&#x6578;&#x4E4B;&#x524D;&#x61C9;&#x7528;&#x95DC;&#x9375;&#x5B57;indexed&#xFF0C;&#x4EE5;&#x4F7F;&#x5176;&#x503C;&#x4F5C;&#x70BA;&#x7D22;&#x5F15;&#x8868;&#xFF08;&#x96DC;&#x6E4A;&#x8868;&#xFF09;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;&#x53EF;&#x4EE5;&#x7531;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x641C;&#x7D22;&#x6216;&#x904E;&#x6FFE;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5230;&#x76EE;&#x524D;&#x70BA;&#x6B62;&#xFF0C;&#x6211;&#x5011;&#x9084;&#x6C92;&#x6709;&#x5728;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x4E2D;&#x6DFB;&#x52A0;&#x4EFB;&#x4F55;&#x4E8B;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x8B93;&#x6211;&#x5011;&#x4F86;&#x505A;&#x3002;&#x6211;&#x5011;&#x5C07;&#x6DFB;&#x52A0;&#x5169;&#x500B;&#x4E8B;&#x4EF6;&#xFF0C;&#x4E00;&#x500B;&#x8A18;&#x9304;&#x4EFB;&#x4F55;&#x63D0;&#x6B3E;&#xFF0C;&#x4E00;&#x500B;&#x8A18;&#x9304;&#x4EFB;&#x4F55;&#x5B58;&#x6B3E;&#x3002;&#x6211;&#x5011;&#x5C07;&#x5206;&#x5225;&#x7A31;&#x9019;&#x4E9B;&#x4E8B;&#x4EF6;Withdrawal&#x548C;Deposit&#x3002;&#x9996;&#x5148;&#xFF0C;&#x6211;&#x5011;&#x5728;Faucet&#x5408;&#x7D04;&#x4E2D;&#x5B9A;&#x7FA9;&#x4E8B;&#x4EF6;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract Faucet is mortal {
    event Withdrawal(address indexed to, uint amount);
    event Deposit(address indexed from, uint amount);

    [...]
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x9078;&#x64C7;&#x5C07;&#x5730;&#x5740;&#x6A19;&#x8A18;&#x70BA;indexed&#xFF0C;&#x4EE5;&#x5141;&#x8A31;&#x4EFB;&#x4F55;&#x8A2A;&#x554F;&#x6211;&#x5011;&#x7684;Faucet&#x7684;&#x7528;&#x6236;&#x754C;&#x9762;&#x4E2D;&#x641C;&#x7D22;&#x548C;&#x904E;&#x6FFE;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x63A5;&#x4E0B;&#x4F86;&#xFF0C;&#x6211;&#x5011;&#x4F7F;&#x7528; emit &#x95DC;&#x9375;&#x5B57;&#x5C07;&#x4E8B;&#x4EF6;&#x6578;&#x64DA;&#x5408;&#x4F75;&#x5230;&#x4EA4;&#x6613;&#x65E5;&#x8A8C;&#x4E2D;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>// Give out ether to anyone who asks
function withdraw(uint withdraw_amount) public {
    [...]
    msg.sender.transfer(withdraw_amount);
    emit Withdrawal(msg.sender, withdraw_amount);
}
// Accept any incoming amount
function () public payable {
    emit Deposit(msg.sender, msg.value);
}</pre>
</div>
</div>
<div class="paragraph">
<p>Faucet.sol &#x5408;&#x7D04;&#x73FE;&#x5728;&#x770B;&#x8D77;&#x4F86;&#x50CF;&#xFF1A;</p>
</div>
<div id="Faucet8.sol" class="listingblock">
<div class="title">Faucet8.sol: Revised Faucet contract, with events</div>
<div class="content">
<pre class="highlight"><code class="language-solidity" data-lang="solidity">link:code/Solidity/Faucet8.sol[]
// Version of Solidity compiler this program was written for
pragma solidity ^0.4.22;

contract owned {
    address owner;
    // Contract constructor: set owner
    constructor() {
        owner = msg.sender;
    }
    // Access control modifier
    modifier onlyOwner {
        require(msg.sender == owner, &quot;Only the contract owner can call this function&quot;);
        _;
    }
}

contract mortal is owned {
    // Contract destructor
    function destroy() public onlyOwner {
        selfdestruct(owner);
    }
}

contract Faucet is mortal {
    event Withdrawal(address indexed to, uint amount);
    event Deposit(address indexed from, uint amount);

    // Give out ether to anyone who asks
    function withdraw(uint withdraw_amount) public {
        // Limit withdrawal amount
        require(withdraw_amount &lt;= 0.1 ether);
        require(this.balance &gt;= withdraw_amount,
            &quot;Insufficient balance in faucet for withdrawal request&quot;);
        // Send the amount to the address that requested it
        msg.sender.transfer(withdraw_amount);
        emit Withdrawal(msg.sender, withdraw_amount);
    }
    // Accept any incoming amount
    function () public payable {
        emit Deposit(msg.sender, msg.value);
    }
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="___14">&#x6355;&#x6349;&#x4E8B;&#x4EF6;</h5>
<div class="paragraph">
<p>&#x597D;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5011;&#x5DF2;&#x7D93;&#x5EFA;&#x7ACB;&#x4E86;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x4F86;&#x767C;&#x5E03;&#x4E8B;&#x4EF6;&#x3002;&#x6211;&#x5011;&#x5982;&#x4F55;&#x770B;&#x5230;&#x4EA4;&#x6613;&#x7684;&#x7D50;&#x679C;&#x4E26;&#x201C;&#x6355;&#x6349;&#x201D;&#x4E8B;&#x4EF6;&#xFF1F;web3.js&#x5EAB;&#x63D0;&#x4F9B;&#x4E00;&#x500B;&#x8CC7;&#x6599;&#x7D50;&#x69CB;&#xFF0C;&#x4F5C;&#x70BA;&#x5305;&#x542B;&#x4EA4;&#x6613;&#x65E5;&#x8A8C;&#x7684;&#x4EA4;&#x6613;&#x7684;&#x7D50;&#x679C;&#x3002;&#x5728;&#x90A3;&#x88E1;&#xFF0C;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4EA4;&#x6613;&#x7522;&#x751F;&#x7684;&#x4E8B;&#x4EF6;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x4F7F;&#x7528;truffle&#x5728;&#x4FEE;&#x8A02;&#x7684;Faucet&#x5408;&#x7D04;&#x4E0A;&#x904B;&#x884C;&#x6E2C;&#x8A66;&#x4EA4;&#x6613;&#x3002;&#x6309;&#x7167; <a href="#truffle">[truffle]</a> &#x4E2D;&#x7684;&#x8AAA;&#x660E;&#x8A2D;&#x7F6E;&#x9805;&#x76EE;&#x76EE;&#x9304;&#x4E26;&#x7DE8;&#x8B6F;Faucet&#x7A0B;&#x5F0F;&#x78BC;&#x3002;&#x6E90;&#x7A0B;&#x5F0F;&#x78BC;&#x53EF;&#x4EE5;&#x5728;&#x672C;&#x66F8;&#x7684;GitHub&#x5132;&#x5B58;&#x5EAB;&#x4E2D;&#x627E;&#x5230;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>code/truffle/FaucetEvents</pre>
</div>
</div>
<div id="testing_events_prep" class="listingblock">
<div class="content">
<pre>$ truffle develop
truffle(develop)&gt; compile
truffle(develop)&gt; migrate
Using network &apos;develop&apos;.

Running migration: 1_initial_migration.js
  Deploying Migrations...
  ... 0xb77ceae7c3f5afb7fbe3a6c5974d352aa844f53f955ee7d707ef6f3f8e6b4e61
  Migrations: 0x8cdaf0cd259887258bc13a92c0a6da92698644c0
Saving successful migration to network...
  ... 0xd7bc86d31bee32fa3988f1c1eabce403a1b5d570340a3a9cdba53a472ee8c956
Saving artifacts...
Running migration: 2_deploy_contracts.js
  Deploying Faucet...
  ... 0xfa850d754314c3fb83f43ca1fa6ee20bc9652d891c00a2f63fd43ab5bfb0d781
  Faucet: 0x345ca3e014aaf5dca488057592ee47305d9b3e10
Saving successful migration to network...
  ... 0xf36163615f41ef7ed8f4a8f192149a0bf633fe1a2398ce001bf44c43dc7bdda0
Saving artifacts...

truffle(develop)&gt; Faucet.deployed().then(i =&gt; {FaucetDeployed = i})
truffle(develop)&gt; FaucetDeployed.send(web3.toWei(1, &quot;ether&quot;)).then(res =&gt; { console.log(res.logs[0].event, res.logs[0].args) })
Deposit { from: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  amount: BigNumber { s: 1, e: 18, c: [ 10000 ] } }
truffle(develop)&gt; FaucetDeployed.withdraw(web3.toWei(0.1, &quot;ether&quot;)).then(res =&gt; { console.log(res.logs[0].event, res.logs[0].args) })
Withdrawal { to: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  amount: BigNumber { s: 1, e: 17, c: [ 1000 ] } }</pre>
</div>
</div>
<div class="paragraph">
<p>&#x7528;deployed()&#x51FD;&#x6578;&#x7372;&#x5F97;&#x90E8;&#x7F72;&#x7684;&#x5408;&#x7D04;&#x5F8C;&#xFF0C;&#x6211;&#x5011;&#x57F7;&#x884C;&#x5169;&#x500B;&#x4EA4;&#x6613;&#x3002;&#x7B2C;&#x4E00;&#x7B46;&#x4EA4;&#x6613;&#x662F;&#x4E00;&#x7B46;&#x5B58;&#x6B3E;&#xFF08;&#x4F7F;&#x7528;send&#xFF09;&#xFF0C;&#x5728;&#x4EA4;&#x6613;&#x65E5;&#x8A8C;&#x4E2D;&#x767C;&#x51FA;Deposit&#x4E8B;&#x4EF6;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Deposit { from: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  amount: BigNumber { s: 1, e: 18, c: [ 10000 ] } }</pre>
</div>
</div>
<div class="paragraph">
<p>&#x63A5;&#x4E0B;&#x4F86;&#xFF0C;&#x6211;&#x5011;&#x4F7F;&#x7528;withdraw&#x51FD;&#x6578;&#x9032;&#x884C;&#x63D0;&#x6B3E;&#x3002;&#x9019;&#x6703;&#x767C;&#x51FA;Withdrawal&#x4E8B;&#x4EF6;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Withdrawal { to: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  amount: BigNumber { s: 1, e: 17, c: [ 1000 ] } }</pre>
</div>
</div>
<div class="paragraph">
<p>&#x70BA;&#x4E86;&#x7372;&#x5F97;&#x9019;&#x4E9B;&#x4E8B;&#x4EF6;&#xFF0C;&#x6211;&#x5011;&#x67E5;&#x770B;&#x4E86;&#x4F5C;&#x70BA;&#x7D50;&#x679C;&#xFF08;res&#xFF09;&#x8FD4;&#x56DE;&#x7684;logs&#x9663;&#x5217;&#x3002;&#x7B2C;&#x4E00;&#x500B;&#x65E5;&#x8A8C;&#x689D;&#x76EE;&#xFF08;logs[0]&#xFF09;&#x5305;&#x542B;logs[0].event&#x7684;&#x4E8B;&#x4EF6;&#x540D;&#x7A31;&#x548C;logs[0].args&#x7684;&#x4E8B;&#x4EF6;&#x53C3;&#x6578;&#x3002;&#x901A;&#x904E;&#x5728;&#x63A7;&#x5236;&#x53F0;&#x4E0A;&#x986F;&#x793A;&#x9019;&#x4E9B;&#x8CC7;&#x8A0A;&#xFF0C;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x767C;&#x51FA;&#x7684;&#x4E8B;&#x4EF6;&#x540D;&#x7A31;&#x548C;&#x4E8B;&#x4EF6;&#x53C3;&#x6578;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4E8B;&#x4EF6;&#x662F;&#x4E00;&#x7A2E;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x6A5F;&#x5236;&#xFF0C;&#x4E0D;&#x50C5;&#x9069;&#x7528;&#x65BC;&#x5408;&#x7D04;&#x5167;&#x901A;&#x4FE1;&#xFF0C;&#x9084;&#x9069;&#x7528;&#x65BC;&#x958B;&#x767C;&#x904E;&#x7A0B;&#x4E2D;&#x7684;&#x8ABF;&#x8A66;&#x3002;</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="__call_send_delegatecall_callcode">&#x8ABF;&#x7528;&#x5176;&#x4ED6;&#x5408;&#x7D04; (call, send, delegatecall, callcode)</h4>
<div class="paragraph">
<p>&#x5728;&#x5408;&#x7D04;&#x4E2D;&#x8ABF;&#x7528;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x4F46;&#x6709;&#x6F5B;&#x5728;&#x5371;&#x96AA;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x6211;&#x5011;&#x5C07;&#x7814;&#x7A76;&#x4F60;&#x53EF;&#x4EE5;&#x5BE6;&#x73FE;&#x7684;&#x5404;&#x7A2E;&#x65B9;&#x6CD5;&#x4E26;&#x8A55;&#x4F30;&#x6BCF;&#x7A2E;&#x65B9;&#x6CD5;&#x7684;&#x98A8;&#x96AA;&#x3002;</p>
</div>
<div class="sect4">
<h5 id="___15">&#x5275;&#x5EFA;&#x4E00;&#x500B;&#x65B0;&#x7684;&#x5BE6;&#x4F8B;</h5>
<div class="paragraph">
<p>&#x8ABF;&#x7528;&#x53E6;&#x4E00;&#x4EFD;&#x5408;&#x7D04;&#x6700;&#x5B89;&#x5168;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x4F60;&#x81EA;&#x5DF1;&#x5275;&#x5EFA;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x3002;&#x9019;&#x6A23;&#xFF0C;&#x4F60;&#x5C31;&#x53EF;&#x4EE5;&#x78BA;&#x5B9A;&#x5B83;&#x7684;&#x63A5;&#x53E3;&#x548C;&#x884C;&#x70BA;&#x3002;&#x8981;&#x505A;&#x5230;&#x9019;&#x4E00;&#x9EDE;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x7C21;&#x55AE;&#x5730;&#x4F7F;&#x7528;&#x95DC;&#x9375;&#x5B57;new&#x4F86;&#x5BE6;&#x4F8B;&#x5316;&#x5B83;&#xFF0C;&#x5C31;&#x50CF;&#x4EFB;&#x4F55;&#x7269;&#x4EF6;&#x5C0E;&#x5411;&#x7684;&#x8A9E;&#x8A00;&#x4E00;&#x6A23;&#x3002;&#x5728;Solidity&#x4E2D;&#xFF0C;&#x95DC;&#x9375;&#x5B57;new&#x5C07;&#x5728;&#x5340;&#x584A;&#x93C8;&#x4E0A;&#x5275;&#x5EFA;&#x5408;&#x7D04;&#x4E26;&#x8FD4;&#x56DE;&#x4E00;&#x500B;&#x53EF;&#x7528;&#x65BC;&#x5F15;&#x7528;&#x5B83;&#x7684;&#x7269;&#x4EF6;&#x3002;&#x5047;&#x8A2D;&#x4F60;&#x60F3;&#x5F9E;&#x53E6;&#x4E00;&#x500B;&#x540D;&#x70BA;Token&#x7684;&#x5408;&#x7D04;&#x4E2D;&#x5275;&#x5EFA;&#x4E26;&#x8ABF;&#x7528;Faucet&#x5408;&#x7D04;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract Token is mortal {
    Faucet _faucet;

    constructor() {
        _faucet = new Faucet();
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x9019;&#x7A2E;&#x5408;&#x7D04;&#x5EFA;&#x9020;&#x6A5F;&#x5236;&#x78BA;&#x4FDD;&#x4F60;&#x77E5;&#x9053;&#x5408;&#x7D04;&#x7684;&#x78BA;&#x5207;&#x985E;&#x578B;&#x53CA;&#x5176;&#x63A5;&#x53E3;&#x3002;&#x5408;&#x7D04;Faucet&#x5FC5;&#x9808;&#x5728;Token&#x7BC4;&#x570D;&#x5167;&#x5B9A;&#x7FA9;&#xFF0C;&#x5982;&#x679C;&#x5B9A;&#x7FA9;&#x4F4D;&#x65BC;&#x53E6;&#x4E00;&#x500B;&#x6A94;&#x6848;&#x4E2D;&#xFF0C;&#x4F60;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;import&#x8A9E;&#x53E5;&#x4F86;&#x57F7;&#x884C;&#x6B64;&#x64CD;&#x4F5C;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import &quot;Faucet.sol&quot;

contract Token is mortal {
    Faucet _faucet;

    constructor() {
        _faucet = new Faucet();
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>new&#x95DC;&#x9375;&#x5B57;&#x9084;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x53EF;&#x9078;&#x53C3;&#x6578;&#x4F86;&#x6307;&#x5B9A;&#x5275;&#x5EFA;&#x6642;&#x50B3;&#x8F38;&#x7684;ether+&#x503C;+&#x4EE5;&#x53CA;&#x50B3;&#x905E;&#x7D66;&#x65B0;&#x5408;&#x7D04;&#x69CB;&#x9020;&#x51FD;&#x6578;&#x7684;&#x53C3;&#x6578;&#xFF08;&#x5982;&#x679C;&#x6709;&#xFF09;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import &quot;Faucet.sol&quot;

contract Token is mortal {
    Faucet _faucet;

    constructor() {
        _faucet = (new Faucet).value(0.5 ether)();
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5982;&#x679C;&#x6211;&#x5011;&#x8CE6;&#x4E88;&#x5275;&#x5EFA;&#x7684;Faucet&#x4E00;&#x4E9B;ether&#xFF0C;&#x6211;&#x5011;&#x4E5F;&#x53EF;&#x4EE5;&#x8ABF;&#x7528;Faucet&#x51FD;&#x6578;&#xFF0C;&#x5B83;&#x5011;&#x5C31;&#x50CF;&#x65B9;&#x6CD5;&#x8ABF;&#x7528;&#x4E00;&#x6A23;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x9019;&#x500B;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5F9E;Token&#x7684;destroy&#x51FD;&#x6578;&#x4E2D;&#x8ABF;&#x7528;Faucet&#x7684;destroy&#x51FD;&#x6578;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import &quot;Faucet.sol&quot;

contract Token is mortal {
    Faucet _faucet;

    constructor() {
        _faucet = (new Faucet).value(0.5 ether)();
    }

    function destroy() ownerOnly {
        _faucet.destroy();
    }
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="___16">&#x8A2A;&#x554F;&#x73FE;&#x6709;&#x7684;&#x5BE6;&#x4F8B;</h5>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x8ABF;&#x7528;&#x5408;&#x7D04;&#x7684;&#x53E6;&#x4E00;&#x7A2E;&#x65B9;&#x6CD5;&#x662F;&#x5C07;&#x73FE;&#x6709;&#x5408;&#x7D04;&#x7684;&#x5730;&#x5740;&#x8F49;&#x63DB;&#x70BA;&#x5BE6;&#x4F8B;&#x3002;&#x4F7F;&#x7528;&#x9019;&#x7A2E;&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x5DF2;&#x77E5;&#x63A5;&#x53E3;&#x61C9;&#x7528;&#x65BC;&#x73FE;&#x6709;&#x5BE6;&#x4F8B;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x5011;&#x9700;&#x8981;&#x78BA;&#x5207;&#x5730;&#x77E5;&#x9053;&#xFF0C;&#x6211;&#x5011;&#x6B63;&#x5728;&#x8655;&#x7406;&#x7684;&#x4E8B;&#x4F8B;&#x5BE6;&#x969B;&#x4E0A;&#x8207;&#x6211;&#x5011;&#x6240;&#x5047;&#x8A2D;&#x7684;&#x985E;&#x578B;&#x76F8;&#x540C;&#xFF0C;&#x9019;&#x4E00;&#x9EDE;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x3002;&#x6211;&#x5011;&#x4F86;&#x770B;&#x4E00;&#x500B;&#x4F8B;&#x5B50;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>import &quot;Faucet.sol&quot;

contract Token is mortal {

    Faucet _faucet;

    constructor(address _f) {
        _faucet = Faucet(_f);
        _faucet.withdraw(0.1 ether)
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5728;&#x9019;&#x88E1;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x5730;&#x5740;&#x4F5C;&#x70BA;&#x53C3;&#x6578;&#x63D0;&#x4F9B;&#x7D66;&#x69CB;&#x9020;&#x51FD;&#x6578;&#xFF0C;&#x4E26;&#x5C07;&#x5176;&#x4F5C;&#x70BA;Faucet&#x7269;&#x4EF6;&#x9032;&#x884C;&#x8F49;&#x63DB;&#x3002;&#x9019;&#x6BD4;&#x4EE5;&#x524D;&#x7684;&#x6A5F;&#x5236;&#x98A8;&#x96AA;&#x5927;&#x5F97;&#x591A;&#xFF0C;&#x56E0;&#x70BA;&#x6211;&#x5011;&#x5BE6;&#x969B;&#x4E0A;&#x4E26;&#x4E0D;&#x77E5;&#x9053;&#x8A72;&#x5730;&#x5740;&#x662F;&#x5426;&#x5BE6;&#x969B;&#x4E0A;&#x662F;Faucet&#x7269;&#x4EF6;&#x3002;&#x7576;&#x6211;&#x5011;&#x8ABF;&#x7528;withdraw&#x6642;&#xFF0C;&#x6211;&#x5011;&#x5047;&#x8A2D;&#x5B83;&#x63A5;&#x53D7;&#x76F8;&#x540C;&#x7684;&#x53C3;&#x6578;&#x4E26;&#x57F7;&#x884C;&#x8207;&#x6211;&#x5011;&#x7684;Faucet&#x5BA3;&#x544A;&#x76F8;&#x540C;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0C;&#x4F46;&#x6211;&#x5011;&#x7121;&#x6CD5;&#x78BA;&#x5B9A;&#x3002;&#x5C31;&#x6211;&#x5011;&#x6240;&#x77E5;&#xFF0C;&#x5728;&#x9019;&#x500B;&#x5730;&#x5740;&#x7684;withdraw&#x51FD;&#x6578;&#x53EF;&#x4EE5;&#x57F7;&#x884C;&#x8207;&#x6211;&#x5011;&#x6240;&#x671F;&#x671B;&#x7684;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x5373;&#x4F7F;&#x5B83;&#x7684;&#x547D;&#x540D;&#x76F8;&#x540C;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F7F;&#x7528;&#x4F5C;&#x70BA;&#x8F38;&#x5165;&#x50B3;&#x905E;&#x7684;&#x5730;&#x5740;&#x4E26;&#x5C07;&#x5B83;&#x5011;&#x8F49;&#x63DB;&#x6210;&#x7279;&#x5B9A;&#x7684;&#x7269;&#x4EF6;&#x4E2D;&#x6BD4;&#x81EA;&#x5DF1;&#x5275;&#x5EFA;&#x5408;&#x7D04;&#x8981;&#x5371;&#x96AA;&#x5F97;&#x591A;&#x3002;</p>
</div>
</div>
<div class="sect4">
<h5 id="__delegatecall">&#x539F;&#x59CB;&#x8ABF;&#x7528;, delegatecall</h5>
<div class="paragraph">
<p>Solidity&#x70BA;&#x8ABF;&#x7528;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x66F4;&#x201C;&#x4F4E;&#x7D1A;&#x201D;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5B83;&#x5011;&#x76F4;&#x63A5;&#x5C0D;&#x61C9;&#x65BC;&#x5177;&#x6709;&#x76F8;&#x540C;&#x540D;&#x7A31;&#x7684;EVM&#x64CD;&#x4F5C;&#x78BC;&#xFF0C;&#x4E26;&#x5141;&#x8A31;&#x6211;&#x5011;&#x624B;&#x52D5;&#x69CB;&#x5EFA;&#x5408;&#x7D04;&#x5230;&#x5408;&#x7D04;&#x7684;&#x8ABF;&#x7528;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5B83;&#x5011;&#x4EE3;&#x8868;&#x4E86;&#x8ABF;&#x7528;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#x6700;&#x9748;&#x6D3B;&#x548C;&#x6700;&#x5371;&#x96AA;&#x7684;&#x6A5F;&#x5236;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x4EE5;&#x4E0B;&#x662F;&#x4F7F;&#x7528; call &#x65B9;&#x6CD5;&#x7684;&#x76F8;&#x540C;&#x7BC4;&#x4F8B;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract Token is mortal {
    constructor(address _faucet) {
        _faucet.call(&quot;withdraw&quot;, 0.1 ether);
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>&#x6B63;&#x5982;&#x4F60;&#x6240;&#x770B;&#x5230;&#x7684;&#xFF0C;&#x9019;&#x7A2E;&#x985E;&#x578B;&#x7684;call&#xFF0C;&#x662F;&#x4E00;&#x500B;&#x51FD;&#x6578;&#x7684;<em>&#x76F2;</em> <em>blind</em>&#x8ABF;&#x7528;&#xFF0C;&#x5C31;&#x50CF;&#x69CB;&#x5EFA;&#x4E00;&#x500B;&#x539F;&#x59CB;&#x4EA4;&#x6613;&#x4E00;&#x6A23;&#xFF0C;&#x53EA;&#x662F;&#x5728;&#x5408;&#x7D04;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x3002;&#x5B83;&#x53EF;&#x80FD;&#x6703;&#x4F7F;&#x6211;&#x5011;&#x7684;&#x5408;&#x7D04;&#x9762;&#x81E8;&#x4E00;&#x4E9B;&#x5B89;&#x5168;&#x98A8;&#x96AA;&#xFF0C;&#x6700;&#x91CD;&#x8981;&#x7684;&#x662F; <em>&#x53EF;&#x91CD;&#x5165;&#x6027;</em> <em>reentrancy</em>&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x5728; <a href="#reentrancy">[reentrancy]</a> &#x4E2D;&#x66F4;&#x8A73;&#x7D30;&#x5730;&#x8A0E;&#x8AD6;&#x3002;&#x5982;&#x679C;&#x51FA;&#x73FE;&#x554F;&#x984C;&#xFF0C;call&#x51FD;&#x6578;&#x5C07;&#x8FD4;&#x56DE;false&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x5011;&#x53EF;&#x4EE5;&#x8A55;&#x4F30;&#x8FD4;&#x56DE;&#x503C;&#x4EE5;&#x9032;&#x884C;&#x932F;&#x8AA4;&#x8655;&#x7406;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>contract Token is mortal {
    constructor(address _faucet) {
        if !(_faucet.call(&quot;withdraw&quot;, 0.1 ether)) {
            revert(&quot;Withdrawal from faucet failed&quot;);
        }
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>call&#x7684;&#x53E6;&#x4E00;&#x500B;&#x8B8A;&#x9AD4;&#x662F;delegatecall&#xFF0C;&#x5B83;&#x53D6;&#x4EE3;&#x4E86;&#x66F4;&#x5371;&#x96AA;&#x7684;callcode&#x3002;callcode&#x65B9;&#x6CD5;&#x5F88;&#x5FEB;&#x5C31;&#x6703;&#x88AB;&#x68C4;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x4E0D;&#x61C9;&#x8A72;&#x4F7F;&#x7528;&#x5B83;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6B63;&#x5982;<a href="#solidity_address_object">&#x5730;&#x5740;&#x7269;&#x4EF6;</a>&#x4E2D;&#x63D0;&#x5230;&#x7684;&#xFF0C;delegatecall&#x4E0D;&#x540C;&#x65BC;call&#xFF0C;&#x56E0;&#x70BA;msg&#x4E0A;&#x4E0B;&#x6587;&#x4E0D;&#x6703;&#x6539;&#x8B8A;&#x3002;&#x4F8B;&#x5982;&#xFF0C;call &#x5C07; msg.sender &#x7684;&#x503C;&#x66F4;&#x6539;&#x70BA;&#x767C;&#x8D77;&#x8ABF;&#x7528;&#x7684;&#x5408;&#x7D04;&#xFF0C;&#x800C;delegatecall&#x4FDD;&#x6301;&#x8207;&#x767C;&#x8D77;&#x8ABF;&#x7528;&#x7684;&#x5408;&#x7D04;&#x4E2D;&#x7684;msg.sender&#x76F8;&#x540C;&#x3002;&#x57FA;&#x672C;&#x4E0A;&#xFF0C;delegatecall&#x5728;&#x7576;&#x524D;&#x5408;&#x7D04;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x904B;&#x884C;&#x53E6;&#x4E00;&#x500B;&#x5408;&#x7D04;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x3002;&#x5B83;&#x6700;&#x5E38;&#x7528;&#x65BC;&#x5F9E;library&#x8ABF;&#x7528;&#x7A0B;&#x5F0F;&#x78BC;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x61C9;&#x8A72;&#x8B39;&#x614E;&#x4F7F;&#x7528;delegatecall&#x3002;&#x5B83;&#x53EF;&#x80FD;&#x6703;&#x6709;&#x4E00;&#x4E9B;&#x610F;&#x60F3;&#x4E0D;&#x5230;&#x7684;&#x6548;&#x679C;&#xFF0C;&#x7279;&#x5225;&#x662F;&#x5982;&#x679C;&#x4F60;&#x8ABF;&#x7528;&#x7684;&#x5408;&#x7D04;&#x4E0D;&#x662F;&#x4F5C;&#x70BA;&#x5EAB;&#x8A2D;&#x8A08;&#x7684;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x4F7F;&#x7528;&#x7BC4;&#x4F8B;&#x5408;&#x7D04;&#x4F86;&#x6F14;&#x793A;call&#x548C;delegatecall&#x7528;&#x65BC;&#x8ABF;&#x7528;&#x5EAB;&#x548C;&#x5408;&#x7D04;&#x7684;&#x5404;&#x7A2E;&#x8ABF;&#x7528;&#x8A9E;&#x7FA9;&#x3002;&#x6211;&#x5011;&#x4F7F;&#x7528;&#x4E00;&#x500B;&#x4E8B;&#x4EF6;&#x4F86;&#x8A18;&#x9304;&#x6BCF;&#x500B;&#x8ABF;&#x7528;&#x7684;&#x4F86;&#x6E90;&#xFF0C;&#x4E26;&#x6839;&#x64DA;&#x8ABF;&#x7528;&#x985E;&#x578B;&#x77AD;&#x89E3;&#x8ABF;&#x7528;&#x4E0A;&#x4E0B;&#x6587;&#x5982;&#x4F55;&#x8B8A;&#x5316;&#xFF1A;</p>
</div>
<div id="call_examples_code" class="listingblock">
<div class="title">CallExamples.sol: An example of different call semantics.</div>
<div class="content">
<pre class="highlight"><code class="language-solidity" data-lang="solidity">link:code/truffle/CallExamples/contracts/CallExamples.sol[]

pragma solidity ^0.4.22;

contract calledContract {
    event callEvent(address sender, address origin, address from);
    function calledFunction() public {
        emit callEvent(msg.sender, tx.origin, this);
    }
}

library calledLibrary {
    event callEvent(address sender, address origin,  address from);
    function calledFunction() public {
        emit callEvent(msg.sender, tx.origin, this);
    }
}

contract caller {

    function make_calls(calledContract _calledContract) public {

        // Calling the calledContract and calledLibrary directly
        _calledContract.calledFunction();
        calledLibrary.calledFunction();

        // Low level calls using the address object for calledContract
        require(address(_calledContract).call(bytes4(keccak256(&quot;calledFunction()&quot;))));
        require(address(_calledContract).delegatecall(bytes4(keccak256(&quot;calledFunction()&quot;))));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x7684;&#x4E3B;&#x8981;&#x5408;&#x7D04;&#x662F;caller&#xFF0C;&#x5B83;&#x8ABF;&#x7528;&#x5EAB; calledLibrary &#x548C;&#x5408;&#x7D04; calledContract&#x3002;&#x88AB;&#x8ABF;&#x7528;&#x7684;&#x5EAB;&#x548C;&#x5408;&#x7D04;&#x6709;&#x76F8;&#x540C;&#x7684;&#x51FD;&#x6578; calledFunction&#xFF0C;&#x767C;&#x9001;calledEvent&#x4E8B;&#x4EF6;&#x3002;calledEvent&#x4E8B;&#x4EF6;&#x8A18;&#x9304;&#x4E09;&#x500B;&#x6578;&#x64DA;&#xFF1A;msg.sender, tx.origin, &#x548C; this&#x3002;&#x6BCF;&#x6B21;&#x8ABF;&#x7528;calledFunction&#x6642;&#xFF0C;&#x90FD;&#x6703;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;&#x4E0D;&#x540C;&#x7684; msg.sender&#xFF09;&#x53D6;&#x6C7A;&#x65BC;&#x5B83;&#x662F;&#x76F4;&#x63A5;&#x8ABF;&#x7528;&#x9084;&#x662F;&#x901A;&#x904E; delegatecall &#x8ABF;&#x7528;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;caller&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x9996;&#x5148;&#x76F4;&#x63A5;&#x8ABF;&#x7528;&#x5408;&#x7D04;&#x548C;&#x5EAB;&#x7684;calledFunction()&#x3002;&#x7136;&#x5F8C;&#xFF0C;&#x6211;&#x5011;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x4F4E;&#x7D1A;&#x51FD;&#x6578;call&#x548C;delegatecall&#x8ABF;&#x7528;calledContract.calledFunction&#x3002;&#x89C0;&#x5BDF;&#x591A;&#x7A2E;&#x8ABF;&#x7528;&#x6A5F;&#x5236;&#x7684;&#x884C;&#x70BA;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x5728;truffle&#x958B;&#x767C;&#x74B0;&#x5883;&#x4E2D;&#x904B;&#x884C;&#x4E26;&#x6355;&#x6349;&#x4E8B;&#x4EF6;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>truffle(develop)&gt; migrate
Using network &apos;develop&apos;.
[...]
Saving artifacts...
truffle(develop)&gt; web3.eth.accounts[0]
&apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;
truffle(develop)&gt; caller.address
&apos;0x8f0483125fcb9aaaefa9209d8e9d7b9c8b9fb90f&apos;
truffle(develop)&gt; calledContract.address
&apos;0x345ca3e014aaf5dca488057592ee47305d9b3e10&apos;
truffle(develop)&gt; calledLibrary.address
&apos;0xf25186b5081ff5ce73482ad761db0eb0d25abfbf&apos;
truffle(develop)&gt; caller.deployed().then( i =&gt; { callerDeployed = i })

truffle(develop)&gt; callerDeployed.make_calls(calledContract.address).then(res =&gt; { res.logs.forEach( log =&gt; { console.log(log.args) })})
{ sender: &apos;0x8f0483125fcb9aaaefa9209d8e9d7b9c8b9fb90f&apos;,
  origin: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  from: &apos;0x345ca3e014aaf5dca488057592ee47305d9b3e10&apos; }
{ sender: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  origin: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  from: &apos;0x8f0483125fcb9aaaefa9209d8e9d7b9c8b9fb90f&apos; }
{ sender: &apos;0x8f0483125fcb9aaaefa9209d8e9d7b9c8b9fb90f&apos;,
  origin: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  from: &apos;0x345ca3e014aaf5dca488057592ee47305d9b3e10&apos; }
{ sender: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  origin: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
  from: &apos;0x8f0483125fcb9aaaefa9209d8e9d7b9c8b9fb90f&apos; }</pre>
</div>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x770B;&#x770B;&#x767C;&#x751F;&#x4E86;&#x4EC0;&#x9EBC;&#x3002;&#x6211;&#x5011;&#x8ABF;&#x7528;make_calls&#x51FD;&#x6578;&#x4E26;&#x50B3;&#x905E;calledContract&#x7684;&#x5730;&#x5740;&#xFF0C;&#x7136;&#x5F8C;&#x6355;&#x7372;&#x4E0D;&#x540C;&#x8ABF;&#x7528;&#x767C;&#x51FA;&#x7684;&#x56DB;&#x500B;&#x4E8B;&#x4EF6;&#x3002;&#x67E5;&#x770B;make_calls&#x51FD;&#x6578;&#xFF0C;&#x8B93;&#x6211;&#x5011;&#x9010;&#x6B65;&#x77AD;&#x89E3;&#x6BCF;&#x4E00;&#x6B65;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x7B2C;&#x4E00;&#x500B;&#x8ABF;&#x7528;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>_calledContract.calledFunction();</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5728;&#x9019;&#x88E1;&#xFF0C;&#x6211;&#x5011;&#x76F4;&#x63A5;&#x8ABF;&#x7528;calledContract.calledFunction&#xFF0C;&#x4F7F;&#x7528;&#x7A31;&#x70BA;callFunction&#x7684;&#x9AD8;&#x7D1A;ABI&#x3002;&#x767C;&#x51FA;&#x7684;&#x4E8B;&#x4EF6;&#x662F;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sender: &apos;0x8f0483125fcb9aaaefa9209d8e9d7b9c8b9fb90f&apos;,
origin: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
from: &apos;0x345ca3e014aaf5dca488057592ee47305d9b3e10&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5982;&#x4F60;&#x6240;&#x898B;&#xFF0C;msg.sender&#x662F;caller&#x5408;&#x7D04;&#x7684;&#x5730;&#x5740;&#x3002;tx.origin&#x662F;&#x6211;&#x5011;&#x7684;&#x9322;&#x5305;web3.eth.accounts[0]&#x7684;&#x5730;&#x5740;&#xFF0C;&#x9322;&#x5305;&#x5C07;&#x4EA4;&#x6613;&#x767C;&#x9001;&#x7D66;caller&#x3002;&#x8A72;&#x4E8B;&#x4EF6;&#x7531;calledContract&#x767C;&#x51FA;&#xFF0C;&#x6211;&#x5011;&#x5F9E;&#x4E8B;&#x4EF6;&#x4E2D;&#x7684;&#x6700;&#x5F8C;&#x4E00;&#x500B;&#x53C3;&#x6578;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x3002;</p>
</div>
<div class="paragraph">
<p>make_calls&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x6B21;&#x8ABF;&#x7528;&#x662F;&#x5C0D;&#x5EAB;&#x7684;&#x8ABF;&#x7528;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>calledLibrary.calledFunction();</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5B83;&#x770B;&#x8D77;&#x4F86;&#x8207;&#x6211;&#x5011;&#x8ABF;&#x7528;&#x5408;&#x7D04;&#x7684;&#x65B9;&#x5F0F;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#xFF0C;&#x4F46;&#x884C;&#x70BA;&#x975E;&#x5E38;&#x4E0D;&#x540C;&#x3002;&#x6211;&#x5011;&#x4F86;&#x770B;&#x770B;&#x767C;&#x51FA;&#x7684;&#x7B2C;&#x4E8C;&#x500B;&#x4E8B;&#x4EF6;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sender: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
origin: &apos;0x627306090abab3a6e1400e9345bc60c78a8bef57&apos;,
from: &apos;0x8f0483125fcb9aaaefa9209d8e9d7b9c8b9fb90f&apos;</pre>
</div>
</div>
<div class="paragraph">
<p>&#x9019;&#x4E00;&#x6B21;&#xFF0C;msg.sender&#x4E0D;&#x662F;caller&#x7684;&#x5730;&#x5740;&#x3002;&#x76F8;&#x53CD;&#xFF0C;&#x5B83;&#x662F;&#x6211;&#x5011;&#x9322;&#x5305;&#x7684;&#x5730;&#x5740;&#xFF0C;&#x8207;&#x4EA4;&#x6613;&#x4F86;&#x6E90;&#x76F8;&#x540C;&#x3002;&#x9019;&#x662F;&#x56E0;&#x70BA;&#x7576;&#x4F60;&#x8ABF;&#x7528;&#x4E00;&#x500B;&#x5EAB;&#x6642;&#xFF0C;&#x9019;&#x500B;&#x8ABF;&#x7528;&#x7E3D;&#x662F;delegatecall&#x4E26;&#x4E14;&#x5728;&#x8ABF;&#x7528;&#x8005;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x904B;&#x884C;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x7576;calledLibrary&#x7A0B;&#x5F0F;&#x78BC;&#x904B;&#x884C;&#x6642;&#xFF0C;&#x5B83;&#x7E7C;&#x627F;caller&#x7684;&#x57F7;&#x884C;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x5C31;&#x597D;&#x50CF;&#x5B83;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x5728;caller&#x4E2D;&#x904B;&#x884C;&#x4E00;&#x6A23;&#x3002;&#x8B8A;&#x6578;this&#xFF08;&#x5728;&#x767C;&#x51FA;&#x7684;&#x4E8B;&#x4EF6;&#x4E2D;&#x986F;&#x793A;&#x70BA;from&#xFF09;&#x662F;caller&#x7684;&#x5730;&#x5740;&#xFF0C;&#x5373;&#x4F7F;&#x5B83;&#x662F;&#x5F9E;calledLibrary&#x5167;&#x90E8;&#x8A2A;&#x554F;&#x7684;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x63A5;&#x4E0B;&#x4F86;&#x7684;&#x5169;&#x500B;&#x8ABF;&#x7528;&#xFF0C;&#x4F7F;&#x7528;&#x4F4E;&#x7D1A;call&#x548C;delegatecall&#xFF0C;&#x9A57;&#x8B49;&#x6211;&#x5011;&#x7684;&#x671F;&#x671B;&#xFF0C;&#x767C;&#x51FA;&#x8207;&#x6211;&#x5011;&#x525B;&#x525B;&#x770B;&#x5230;&#x7684;&#x4E8B;&#x4EF6;&#x76F8;&#x540C;&#x7684;&#x7D50;&#x679C;&#x3002;</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="gas_sec">Gas &#x7684;&#x8003;&#x616E;</h3>
<div class="paragraph">
<p>Gas&#x5728; <a href="#gas">[gas]</a> &#x4E00;&#x7BC0;&#x4E2D;&#x6709;&#x66F4;&#x8A73;&#x7D30;&#x7684;&#x63CF;&#x8FF0;&#xFF0C;&#x5728;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7DE8;&#x7A0B;&#x4E2D;&#x662F;&#x4E00;&#x500B;&#x975E;&#x5E38;&#x91CD;&#x8981;&#x7684;&#x8003;&#x616E;&#x56E0;&#x7D20;&#x3002;gas&#x662F;&#x9650;&#x5236;&#x4EE5;&#x592A;&#x574A;&#x5141;&#x8A31;&#x4EA4;&#x6613;&#x6D88;&#x8017;&#x7684;&#x6700;&#x5927;&#x8A08;&#x7B97;&#x91CF;&#x7684;&#x8CC7;&#x6E90;&#x3002;&#x5982;&#x679C;&#x5728;&#x8A08;&#x7B97;&#x904E;&#x7A0B;&#x4E2D;&#x8D85;&#x904E;&#x4E86;gas&#x9650;&#x5236;&#xFF0C;&#x5247;&#x6703;&#x767C;&#x751F;&#x4EE5;&#x4E0B;&#x4E00;&#x7CFB;&#x5217;&#x4E8B;&#x4EF6;&#xFF1A;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#x5F15;&#x767C;&#x201C;out of gas&#x201D;&#x7570;&#x5E38;&#x3002;</p>
</li>
<li>
<p>&#x51FD;&#x6578;&#x57F7;&#x884C;&#x524D;&#x7684;&#x5408;&#x7D04;&#x72C0;&#x614B;&#x88AB;&#x6062;&#x5FA9;&#x3002;</p>
</li>
<li>
<p>&#x5168;&#x90E8;gas&#x4F5C;&#x70BA;&#x4EA4;&#x6613;&#x8CBB;&#x7528;&#x4EA4;&#x7D66;&#x7926;&#x5DE5;&#xFF0C;&#x4E0D;&#x4E88;&#x9000;&#x9084;&#x3002;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#x7531;&#x65BC;gas&#x7531;&#x5275;&#x5EFA;&#x8A72;&#x4EA4;&#x6613;&#x7684;&#x7528;&#x6236;&#x652F;&#x4ED8;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x9F13;&#x52F5;&#x7528;&#x6236;&#x8ABF;&#x7528;gas&#x6210;&#x672C;&#x9AD8;&#x7684;&#x51FD;&#x6578;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x958B;&#x767C;&#x8005;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x6E1B;&#x5C11;&#x5408;&#x7D04;&#x51FD;&#x6578;&#x7684;gas&#x6210;&#x672C;&#x3002;&#x70BA;&#x6B64;&#xFF0C;&#x5728;&#x69CB;&#x5EFA;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x6642;&#x5EFA;&#x8B70;&#x63A1;&#x7528;&#x67D0;&#x4E9B;&#x505A;&#x6CD5;&#xFF0C;&#x4EE5;&#x5118;&#x91CF;&#x6E1B;&#x5C11;&#x51FD;&#x6578;&#x8ABF;&#x7528;&#x7684;gas&#x6210;&#x672C;&#x3002;</p>
</div>
<div class="sect3">
<h4 id="___17">&#x907F;&#x514D;&#x52D5;&#x614B;&#x5927;&#x5C0F;&#x7684;&#x9663;&#x5217;</h4>
<div class="paragraph">
<p>&#x51FD;&#x6578;&#x4E2D;&#x4EFB;&#x4F55;&#x52D5;&#x614B;&#x5927;&#x5C0F;&#x7684;&#x9663;&#x5217;&#x8FF4;&#x5708;&#xFF0C;&#x5C0D;&#x6BCF;&#x500B;&#x5143;&#x7D20;&#x57F7;&#x884C;&#x64CD;&#x4F5C;&#x6216;&#x641C;&#x7D22;&#x7279;&#x5B9A;&#x5143;&#x7D20;&#x6703;&#x5F15;&#x5165;&#x4F7F;&#x7528;&#x904E;&#x591A;gas&#x7684;&#x98A8;&#x96AA;&#x3002;&#x5728;&#x627E;&#x5230;&#x6240;&#x9700;&#x7D50;&#x679C;&#x4E4B;&#x524D;&#xFF0C;&#x6216;&#x5728;&#x5C0D;&#x6BCF;&#x500B;&#x5143;&#x7D20;&#x63A1;&#x53D6;&#x884C;&#x52D5;&#x4E4B;&#x524D;&#xFF0C;&#x5408;&#x7D04;&#x53EF;&#x80FD;&#x6703;&#x7528;&#x76E1;gas&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="___18">&#x907F;&#x514D;&#x8ABF;&#x7528;&#x5176;&#x4ED6;&#x5408;&#x7D04;</h4>
<div class="paragraph">
<p>&#x8ABF;&#x7528;&#x5176;&#x4ED6;&#x5408;&#x7D04;&#xFF0C;&#x5C24;&#x5176;&#x662F;&#x5728;&#x5176;&#x51FD;&#x6578;&#x7684;gas&#x6210;&#x672C;&#x672A;&#x77E5;&#x7684;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x6703;&#x5C0E;&#x81F4;&#x7528;&#x76E1;gas&#x7684;&#x98A8;&#x96AA;&#x3002;&#x907F;&#x514D;&#x4F7F;&#x7528;&#x672A;&#x7D93;&#x904E;&#x826F;&#x597D;&#x6E2C;&#x8A66;&#x548C;&#x5EE3;&#x6CDB;&#x4F7F;&#x7528;&#x7684;&#x5EAB;&#x3002;&#x5EAB;&#x5F9E;&#x5176;&#x4ED6;&#x958B;&#x767C;&#x8005;&#x6536;&#x5230;&#x7684;&#x5BE9;&#x67E5;&#x8D8A;&#x5C11;&#xFF0C;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x98A8;&#x96AA;&#x5C31;&#x8D8A;&#x5927;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="__gas">&#x4F30;&#x7B97;gas&#x6210;&#x672C;</h4>
<div class="paragraph">
<p>&#x4F8B;&#x5982;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x6839;&#x64DA;&#x8ABF;&#x7528;&#x53C3;&#x6578;&#x4F30;&#x8A08;&#x57F7;&#x884C;&#x67D0;&#x7A2E;&#x5408;&#x7D04;&#x51FD;&#x6578;&#x6240;&#x9700;&#x7684;gas&#xFF0C;&#x5247;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x904E;&#x7A0B;;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-JavaScript" data-lang="JavaScript"><span class="hljs-keyword">var</span> contract = web3.eth.contract(abi).at(address);
<span class="hljs-keyword">var</span> gasEstimate = contract.myAweSomeMethod.estimateGas(arg1, arg2, {<span class="hljs-keyword">from</span>: account});</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>gasEstimate</strong> &#x6703;&#x544A;&#x8A34;&#x6211;&#x5011;&#x57F7;&#x884C;&#x9700;&#x8981;&#x7684;gas&#x55AE;&#x4F4D;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x70BA;&#x4E86;&#x7372;&#x5F97;&#x7DB2;&#x8DEF;&#x7684; <strong>gas&#x50F9;&#x683C;</strong> &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-JavaScript" data-lang="JavaScript"><span class="hljs-keyword">var</span> gasPrice = web3.eth.getGasPrice();</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x7136;&#x5F8C;&#x4F30;&#x7B97; <strong>gas&#x6210;&#x672C;</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-JavaScript" data-lang="JavaScript"><span class="hljs-keyword">var</span> gasCostInEther = web3.fromWei((gasEstimate * gasPrice), <span class="hljs-string">&apos;ether&apos;</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#x8B93;&#x6211;&#x5011;&#x61C9;&#x7528;&#x6211;&#x5011;&#x7684;&#x5929;&#x7136;&#x6C23;&#x4F30;&#x7B97;&#x51FD;&#x6578;&#x4F86;&#x4F30;&#x8A08;&#x6211;&#x5011;&#x7684;Faucet&#x7BC4;&#x4F8B;&#x7684;&#x5929;&#x7136;&#x6C23;&#x6210;&#x672C;&#xFF0C;&#x4F7F;&#x7528;&#x6B64;&#x66F8;&#x7A0B;&#x5F0F;&#x78BC;&#x5EAB;&#x4E2D;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>code/truffle/FaucetEvents</pre>
</div>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x4EE5;&#x958B;&#x767C;&#x6A21;&#x5F0F;&#x555F;&#x52D5;truffle&#xFF0C;&#x4E26;&#x57F7;&#x884C;&#x4E00;&#x500B;JavaScript&#x6A94;&#x6848;gas_estimates.js&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="title">gas_estimates.js: Using the estimateGas function</div>
<div class="content">
<pre class="highlight"><code class="language-JavaScript" data-lang="JavaScript"><span class="hljs-keyword">var</span> FaucetContract = artifacts.require(<span class="hljs-string">&quot;./Faucet.sol&quot;</span>);

FaucetContract.web3.eth.getGasPrice(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, result</span>) </span>{
    <span class="hljs-keyword">var</span> gasPrice = <span class="hljs-built_in">Number</span>(result);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Gas Price is &quot;</span> + gasPrice + <span class="hljs-string">&quot; wei&quot;</span>); <span class="hljs-comment">// &quot;10000000000000&quot;</span>

    <span class="hljs-comment">// Get the contract instance</span>
    FaucetContract.deployed().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">FaucetContractInstance</span>) </span>{

        <span class="hljs-comment">// Use the keyword &apos;estimateGas&apos; after the function name to get the gas estimation for this particular function (aprove)</span>
        FaucetContractInstance.send(web3.toWei(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ether&quot;</span>));
        <span class="hljs-keyword">return</span> FaucetContractInstance.withdraw.estimateGas(web3.toWei(<span class="hljs-number">0.1</span>, <span class="hljs-string">&quot;ether&quot;</span>));

    }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">result</span>) </span>{
        <span class="hljs-keyword">var</span> gas = <span class="hljs-built_in">Number</span>(result);

        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;gas estimation = &quot;</span> + gas + <span class="hljs-string">&quot; units&quot;</span>);
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;gas cost estimation = &quot;</span> + (gas * gasPrice) + <span class="hljs-string">&quot; wei&quot;</span>);
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;gas cost estimation = &quot;</span> + FaucetContract.web3.fromWei((gas * gasPrice), <span class="hljs-string">&apos;ether&apos;</span>) + <span class="hljs-string">&quot; ether&quot;</span>);
    });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>truffle&#x958B;&#x767C;&#x63A7;&#x5236;&#x53F0;&#x986F;&#x793A;&#xFF1A;</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ truffle develop

truffle(develop)&gt; exec gas_estimates.js
Using network &apos;develop&apos;.

Gas Price is 20000000000 wei
gas estimation = 31397 units
gas cost estimation = 627940000000000 wei
gas cost estimation = 0.00062794 ether</pre>
</div>
</div>
<div class="paragraph">
<p>&#x5EFA;&#x8B70;&#x4F60;&#x5C07;&#x51FD;&#x6578;&#x7684;gas&#x6210;&#x672C;&#x8A55;&#x4F30;&#x4F5C;&#x70BA;&#x958B;&#x767C;&#x5DE5;&#x4F5C;&#x6D41;&#x7A0B;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x9032;&#x884C;&#xFF0C;&#x4EE5;&#x907F;&#x514D;&#x5C07;&#x5408;&#x7D04;&#x90E8;&#x7F72;&#x5230;&#x4E3B;&#x7DB2;&#x6642;&#x51FA;&#x73FE;&#x610F;&#x5916;&#x3002;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="security_sec">&#x5B89;&#x5168;&#x8003;&#x616E;</h3>
<div class="paragraph">
<p>&#x5728;&#x7DE8;&#x5BEB;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x6642;&#xFF0C;&#x5B89;&#x5168;&#x662F;&#x6700;&#x91CD;&#x8981;&#x7684;&#x8003;&#x616E;&#x56E0;&#x7D20;&#x4E4B;&#x4E00;&#x3002;&#x8207;&#x5176;&#x4ED6;&#x7A0B;&#x5F0F;&#x4E00;&#x6A23;&#xFF0C;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x5C07;&#x5B8C;&#x5168;&#x6309;&#x5BEB;&#x5165;&#x7684;&#x5167;&#x5BB9;&#x57F7;&#x884C;&#xFF0C;&#x9019;&#x4E26;&#x4E0D;&#x7E3D;&#x662F;&#x958B;&#x767C;&#x8005;&#x6240;&#x671F;&#x671B;&#x7684;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x6240;&#x6709;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x90FD;&#x662F;&#x516C;&#x958B;&#x7684;&#xFF0C;&#x4EFB;&#x4F55;&#x7528;&#x6236;&#x90FD;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x5275;&#x5EFA;&#x4EA4;&#x6613;&#x4F86;&#x8207;&#x4ED6;&#x5011;&#x9032;&#x884C;&#x4EA4;&#x4E92;&#x3002;&#x4EFB;&#x4F55;&#x6F0F;&#x6D1E;&#x90FD;&#x53EF;&#x4EE5;&#x88AB;&#x5229;&#x7528;&#xFF0C;&#x640D;&#x5931;&#x5E7E;&#x4E4E;&#x7E3D;&#x662F;&#x7121;&#x6CD5;&#x6062;&#x5FA9;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7DE8;&#x7A0B;&#x9818;&#x57DF;&#xFF0C;&#x932F;&#x8AA4;&#x4EE3;&#x50F9;&#x9AD8;&#x6602;&#x4E14;&#x5BB9;&#x6613;&#x88AB;&#x5229;&#x7528;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x9075;&#x5FAA;&#x6700;&#x4F73;&#x5BE6;&#x8E10;&#x4E26;&#x4F7F;&#x7528;&#x7D93;&#x904E;&#x826F;&#x597D;&#x6E2C;&#x8A66;&#x7684;&#x8A2D;&#x8A08;&#x6A21;&#x5F0F;&#x81F3;&#x95DC;&#x91CD;&#x8981;&#x3002;</p>
</div>
<div class="paragraph">
<p><em>&#x9632;&#x79A6;&#x6027;&#x7DE8;&#x7A0B;</em> <em>Defensive programming</em>&#x662F;&#x4E00;&#x7A2E;&#x7DE8;&#x7A0B;&#x98A8;&#x683C;&#xFF0C;&#x7279;&#x5225;&#x9069;&#x7528;&#x65BC;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7DE8;&#x7A0B;&#xFF0C;&#x5177;&#x6709;&#x4EE5;&#x4E0B;&#x7279;&#x9EDE;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">&#x6975;&#x7C21;/&#x7C21;&#x7D04;</dt>
<dd>
<p>&#x8907;&#x96DC;&#x6027;&#x662F;&#x5B89;&#x5168;&#x7684;&#x6575;&#x4EBA;&#x3002;&#x7A0B;&#x5F0F;&#x78BC;&#x8D8A;&#x7C21;&#x55AE;&#xFF0C;&#x7A0B;&#x5F0F;&#x78BC;&#x8D8A;&#x5C11;&#xFF0C;&#x767C;&#x751F;&#x932F;&#x8AA4;&#x6216;&#x7121;&#x6CD5;&#x9810;&#x6599;&#x7684;&#x6548;&#x679C;&#x7684;&#x53EF;&#x80FD;&#x6027;&#x5C31;&#x8D8A;&#x5C0F;&#x3002;&#x7576;&#x7B2C;&#x4E00;&#x6B21;&#x53C3;&#x8207;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7DE8;&#x7A0B;&#x6642;&#xFF0C;&#x958B;&#x767C;&#x4EBA;&#x54E1;&#x8A66;&#x5716;&#x7DE8;&#x5BEB;&#x5927;&#x91CF;&#x7A0B;&#x5F0F;&#x78BC;&#x3002;&#x76F8;&#x53CD;&#xFF0C;&#x4F60;&#x61C9;&#x8A72;&#x4ED4;&#x7D30;&#x67E5;&#x770B;&#x4F60;&#x7684;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0C;&#x4E26;&#x5617;&#x8A66;&#x627E;&#x5230;&#x66F4;&#x5C11;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F7F;&#x7528;&#x66F4;&#x5C11;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x884C;&#xFF0C;&#x66F4;&#x5C11;&#x7684;&#x8907;&#x96DC;&#x6027;&#x548C;&#x66F4;&#x5C11;&#x7684;&#x201C;&#x529F;&#x80FD;&#x201D;&#x3002;&#x5982;&#x679C;&#x6709;&#x4EBA;&#x544A;&#x8A34;&#x4F60;&#x4ED6;&#x5011;&#x7684;&#x9805;&#x76EE;&#x7522;&#x751F;&#x4E86;&#x201C;&#x6578;&#x5343;&#x884C;&#x7A0B;&#x5F0F;&#x78BC;&#x201D;&#xFF0C;&#x90A3;&#x9EBC;&#x4F60;&#x61C9;&#x8A72;&#x8CEA;&#x7591;&#x8A72;&#x9805;&#x76EE;&#x7684;&#x5B89;&#x5168;&#x6027;&#x3002;&#x66F4;&#x7C21;&#x55AE;&#x66F4;&#x5B89;&#x5168;&#x3002;</p>
</dd>
<dt class="hdlist1">&#x7A0B;&#x5F0F;&#x78BC;&#x91CD;&#x7528;</dt>
<dd>
<p>&#x5118;&#x53EF;&#x80FD;&#x4E0D;&#x8981;&#x201C;&#x91CD;&#x65B0;&#x767C;&#x660E;&#x8F2A;&#x5B50;&#x201D;&#x3002;&#x5982;&#x679C;&#x5EAB;&#x6216;&#x5408;&#x7D04;&#x5DF2;&#x7D93;&#x5B58;&#x5728;&#xFF0C;&#x53EF;&#x4EE5;&#x6EFF;&#x8DB3;&#x4F60;&#x7684;&#x5927;&#x90E8;&#x5206;&#x9700;&#x6C42;&#xFF0C;&#x8ACB;&#x91CD;&#x65B0;&#x4F7F;&#x7528;&#x5B83;&#x3002;&#x5728;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x4E2D;&#xFF0C;&#x9075;&#x5FAA;DRY&#x539F;&#x5247;&#xFF1A;&#x4E0D;&#x8981;&#x91CD;&#x8907;&#x81EA;&#x5DF1;&#x3002;&#x5982;&#x679C;&#x4F60;&#x770B;&#x5230;&#x4EFB;&#x4F55;&#x7A0B;&#x5F0F;&#x78BC;&#x7247;&#x6BB5;&#x91CD;&#x8907;&#x591A;&#x6B21;&#xFF0C;&#x8ACB;&#x554F;&#x81EA;&#x5DF1;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x5C07;&#x5176;&#x4F5C;&#x70BA;&#x51FD;&#x6578;&#x6216;&#x5EAB;&#x9032;&#x884C;&#x7DE8;&#x5BEB;&#x4E26;&#x91CD;&#x65B0;&#x4F7F;&#x7528;&#x3002;&#x5DF2;&#x88AB;&#x5EE3;&#x6CDB;&#x4F7F;&#x7528;&#x548C;&#x6E2C;&#x8A66;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x53EF;&#x80FD;&#x6BD4;&#x4F60;&#x7DE8;&#x5BEB;&#x7684;&#x4EFB;&#x4F55;&#x65B0;&#x7A0B;&#x5F0F;&#x78BC;&#x66F4;&#x5B89;&#x5168;&#x3002;&#x8B39;&#x9632;&#x201C;Not-Invented-Here&#x201D;&#x7684;&#x614B;&#x5EA6;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x8A66;&#x5716;&#x901A;&#x904E;&#x5F9E;&#x982D;&#x958B;&#x59CB;&#x69CB;&#x5EFA;&#x201C;&#x6539;&#x9032;&#x201D;&#x67D0;&#x500B;&#x529F;&#x80FD;&#x6216;&#x7D44;&#x4EF6;&#x3002;&#x5B89;&#x5168;&#x98A8;&#x96AA;&#x901A;&#x5E38;&#x5927;&#x65BC;&#x6539;&#x9032;&#x503C;&#x3002;</p>
</dd>
<dt class="hdlist1">&#x7A0B;&#x5F0F;&#x78BC;&#x8CEA;&#x91CF;</dt>
<dd>
<p>&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7A0B;&#x5F0F;&#x78BC;&#x662F;&#x7121;&#x60C5;&#x7684;&#x3002;&#x6BCF;&#x500B;&#x932F;&#x8AA4;&#x90FD;&#x53EF;&#x80FD;&#x5C0E;&#x81F4;&#x7D93;&#x6FDF;&#x640D;&#x5931;&#x3002;&#x4F60;&#x4E0D;&#x61C9;&#x8A72;&#x50CF;&#x901A;&#x7528;&#x7DE8;&#x7A0B;&#x4E00;&#x6A23;&#x5C0D;&#x5F85;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7DE8;&#x7A0B;&#x3002;&#x76F8;&#x53CD;&#xFF0C;&#x4F60;&#x61C9;&#x8A72;&#x63A1;&#x7528;&#x56B4;&#x8B39;&#x7684;&#x5DE5;&#x7A0B;&#x548C;&#x8EDF;&#x9AD4;&#x958B;&#x767C;&#x65B9;&#x6CD5;&#x8AD6;&#xFF0C;&#x985E;&#x4F3C;&#x65BC;&#x822A;&#x7A7A;&#x822A;&#x5929;&#x5DE5;&#x7A0B;&#x6216;&#x985E;&#x4F3C;&#x7684;&#x4E0D;&#x5BB9;&#x6A02;&#x89C0;&#x7684;&#x5DE5;&#x7A0B;&#x5B78;&#x79D1;&#x3002;&#x4E00;&#x65E6;&#x4F60;&#x201C;&#x555F;&#x52D5;&#x201D;&#x4F60;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0C;&#x4F60;&#x5C31;&#x7121;&#x6CD5;&#x89E3;&#x6C7A;&#x4EFB;&#x4F55;&#x554F;&#x984C;&#x3002;</p>
</dd>
<dt class="hdlist1">&#x53EF;&#x8B80;&#x6027;/&#x53EF;&#x5BE9;&#x6838;&#x6027;</dt>
<dd>
<p>&#x4F60;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#x61C9;&#x6613;&#x65BC;&#x7406;&#x89E3;&#x548C;&#x6E05;&#x6670;&#x3002;&#x95B1;&#x8B80;&#x8D8A;&#x5BB9;&#x6613;&#xFF0C;&#x5BE9;&#x8A08;&#x8D8A;&#x5BB9;&#x6613;&#x3002;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x662F;&#x516C;&#x958B;&#x7684;&#xFF0C;&#x56E0;&#x70BA;&#x4EFB;&#x4F55;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x5C0D; Bytecode &#x9032;&#x884C;&#x9006;&#x5411;&#x5DE5;&#x7A0B;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F60;&#x61C9;&#x8A72;&#x4F7F;&#x7528;&#x5354;&#x4F5C;&#x548C;&#x958B;&#x6E90;&#x65B9;&#x6CD5;&#x5728;&#x516C;&#x958B;&#x5834;&#x5408;&#x958B;&#x767C;&#x4F60;&#x7684;&#x5DE5;&#x4F5C;&#x3002;&#x4F60;&#x61C9;&#x8A72;&#x7DE8;&#x5BEB;&#x6587;&#x4EF6;&#x826F;&#x597D;&#xFF0C;&#x6613;&#x65BC;&#x95B1;&#x8B80;&#x7684;&#x7A0B;&#x5F0F;&#x78BC;&#xFF0C;&#x9075;&#x5FAA;&#x4F5C;&#x70BA;&#x4EE5;&#x592A;&#x574A;&#x793E;&#x5340;&#x4E00;&#x90E8;&#x5206;&#x7684;&#x6A23;&#x5F0F;&#x7D04;&#x5B9A;&#x548C;&#x547D;&#x540D;&#x7D04;&#x5B9A;&#x3002;</p>
</dd>
<dt class="hdlist1">&#x6E2C;&#x8A66;&#x8986;&#x84CB;</dt>
<dd>
<p>&#x6E2C;&#x8A66;&#x4F60;&#x53EF;&#x4EE5;&#x6E2C;&#x8A66;&#x7684;&#x6240;&#x6709;&#x5167;&#x5BB9;&#x3002;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x904B;&#x884C;&#x5728;&#x516C;&#x5171;&#x57F7;&#x884C;&#x74B0;&#x5883;&#x4E2D;&#xFF0C;&#x4EFB;&#x4F55;&#x4EBA;&#x90FD;&#x53EF;&#x4EE5;&#x7528;&#x4ED6;&#x5011;&#x60F3;&#x8981;&#x7684;&#x4EFB;&#x4F55;&#x8F38;&#x5165;&#x57F7;&#x884C;&#x5B83;&#x5011;&#x3002;&#x4F60;&#x7D55;&#x4E0D;&#x61C9;&#x8A72;&#x5047;&#x5B9A;&#x8F38;&#x5165;&#xFF08;&#x6BD4;&#x5982;&#x51FD;&#x6578;&#x53C3;&#x6578;&#xFF09;&#x662F;&#x6B63;&#x78BA;&#x7684;&#xFF0C;&#x4E26;&#x4E14;&#x6709;&#x4E00;&#x500B;&#x826F;&#x6027;&#x7684;&#x76EE;&#x7684;&#x3002;&#x6E2C;&#x8A66;&#x6240;&#x6709;&#x53C3;&#x6578;&#x4EE5;&#x78BA;&#x4FDD;&#x5B83;&#x5011;&#x5728;&#x9810;&#x671F;&#x7684;&#x7BC4;&#x570D;&#x5167;&#x4E26;&#x4E14;&#x683C;&#x5F0F;&#x6B63;&#x78BA;&#x3002;</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="___19">&#x5E38;&#x898B;&#x7684;&#x5B89;&#x5168;&#x98A8;&#x96AA;</h4>
<div class="paragraph">
<p>&#x667A;&#x80FD;&#x5408;&#x7D04;&#x958B;&#x767C;&#x8005;&#x61C9;&#x8A72;&#x719F;&#x6089;&#x8A31;&#x591A;&#x6700;&#x5E38;&#x898B;&#x7684;&#x5B89;&#x5168;&#x98A8;&#x96AA;&#xFF0C;&#x4EE5;&#x4FBF;&#x80FD;&#x5920;&#x6AA2;&#x6E2C;&#x548C;&#x907F;&#x514D;&#x4F7F;&#x4ED6;&#x5011;&#x9762;&#x81E8;&#x9019;&#x4E9B;&#x98A8;&#x96AA;&#x7684;&#x7DE8;&#x7A0B;&#x6A21;&#x5F0F;&#x3002;</p>
</div>
<div class="sect4">
<h5 id="__re_entrancy">&#x91CD;&#x5165; Re-entrancy</h5>
<div class="paragraph">
<p>&#x91CD;&#x5165;&#x662F;&#x7DE8;&#x7A0B;&#x4E2D;&#x7684;&#x4E00;&#x7A2E;&#x73FE;&#x8C61;&#xFF0C;&#x51FD;&#x6578;&#x6216;&#x7A0B;&#x5F0F;&#x88AB;&#x4E2D;&#x65B7;&#xFF0C;&#x7136;&#x5F8C;&#x5728;&#x5148;&#x524D;&#x8ABF;&#x7528;&#x5B8C;&#x6210;&#x4E4B;&#x524D;&#x518D;&#x6B21;&#x8ABF;&#x7528;&#x3002;&#x5728;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7DE8;&#x7A0B;&#x7684;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x7576;&#x5408;&#x7D04;A&#x8ABF;&#x7528;&#x5408;&#x7D04;B&#x4E2D;&#x7684;&#x4E00;&#x500B;&#x51FD;&#x6578;&#x6642;&#xFF0C;&#x53EF;&#x80FD;&#x6703;&#x767C;&#x751F;&#x91CD;&#x5165;&#xFF0C;&#x5408;&#x7D04;B&#x53C8;&#x8ABF;&#x7528;&#x5408;&#x7D04;A&#x4E2D;&#x7684;&#x76F8;&#x540C;&#x51FD;&#x6578;&#xFF0C;&#x5C0E;&#x81F4;&#x905E;&#x8FF4;&#x57F7;&#x884C;&#x3002;&#x5728;&#x5408;&#x7D04;&#x72C0;&#x614B;&#x5728;&#x95DC;&#x9375;&#x6027;&#x8ABF;&#x7528;&#x7D50;&#x675F;&#x4E4B;&#x5F8C;&#x624D;&#x66F4;&#x65B0;&#x7684;&#x60C5;&#x6CC1;&#x4E0B;&#xFF0C;&#x9019;&#x53EF;&#x80FD;&#x662F;&#x7279;&#x5225;&#x5371;&#x96AA;&#x7684;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x70BA;&#x4E86;&#x7406;&#x89E3;&#x9019;&#x4E00;&#x9EDE;&#xFF0C;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#x901A;&#x904E;&#x9322;&#x5305;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x9280;&#x884C;&#x5408;&#x7D04;&#x7684;&#x63D0;&#x73FE;&#x64CD;&#x4F5C;&#x3002;&#x5408;&#x7D04;A&#x5728;&#x5408;&#x7D04;B&#x4E2D;&#x8ABF;&#x7528;&#x63D0;&#x73FE;&#x529F;&#x80FD;&#xFF0C;&#x8A66;&#x5716;&#x63D0;&#x53D6;&#x91D1;&#x984D;X&#x3002;&#x9019;&#x7A2E;&#x60C5;&#x6CC1;&#x5C07;&#x6D89;&#x53CA;&#x4EE5;&#x4E0B;&#x64CD;&#x4F5C;&#xFF1A;</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>&#x5408;&#x7D04;B&#x6AA2;&#x67E5;A&#x662F;&#x5426;&#x6709;&#x5FC5;&#x8981;&#x7684;&#x9918;&#x984D;&#x4F86;&#x63D0;&#x53D6;X&#x3002;</p>
</li>
<li>
<p>B&#x5C07;X&#x50B3;&#x9001;&#x5230;A&#x7684;&#x5730;&#x5740;&#xFF08;&#x904B;&#x884C;A&#x7684;payable fallback&#x51FD;&#x6578;&#xFF09;</p>
</li>
<li>
<p>B&#x66F4;&#x65B0;A&#x7684;&#x9918;&#x984D;&#x4EE5;&#x53CD;&#x6620;&#x6B64;&#x6B21;&#x63D0;&#x73FE;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>&#x7121;&#x8AD6;&#x4F55;&#x6642;&#x5411;&#x5408;&#x7D04;&#x767C;&#x9001;&#x4ED8;&#x6B3E;&#xFF08;&#x5982;&#x672C;&#x4F8B;&#x4E2D;&#xFF09;&#xFF0C;&#x63A5;&#x6536;&#x65B9;&#x5408;&#x7D04;&#xFF08;A&#xFF09;&#x90FD;&#x6709;&#x6A5F;&#x6703;&#x57F7;&#x884C;<em>payable</em>&#x51FD;&#x6578;&#xFF0C;&#x4F8B;&#x5982;&#x9810;&#x8A2D;&#x7684;fallback&#x51FD;&#x6578;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x60E1;&#x610F;&#x653B;&#x64CA;&#x8005;&#x53EF;&#x4EE5;&#x5229;&#x7528;&#x9019;&#x7A2E;&#x57F7;&#x884C;&#x3002;&#x60F3;&#x8C61;&#x4E00;&#x4E0B;&#xFF0C;&#x5728;A&#x7684;payable fallback&#x4E2D;&#xFF0C;&#x5408;&#x7D04;A_&#x518D;&#x6B21;_&#x8ABF;&#x7528;B&#x9280;&#x884C;&#x7684;&#x63D0;&#x6B3E;&#x529F;&#x80FD;&#x3002;B&#x7684;&#x63D0;&#x73FE;&#x529F;&#x80FD;&#x73FE;&#x5728;&#x5C07;&#x7D93;&#x6B77;&#x91CD;&#x5165;&#xFF0C;&#x56E0;&#x70BA;&#x73FE;&#x5728;&#x76F8;&#x540C;&#x7684;&#x521D;&#x59CB;&#x4EA4;&#x6613;&#x6B63;&#x5728;&#x5F15;&#x767C;&#x8FF4;&#x5708;&#x8ABF;&#x7528;&#x3002;</p>
</div>
<div class="paragraph">
<p>&quot;(1) A &#x8ABF;&#x7528; B  (2) B &#x8ABF;&#x7528; A &#x7684; payable &#x51FD;&#x6578; (1) A &#x518D;&#x6B21;&#x8ABF;&#x7528; B &quot;</p>
</div>
<div class="paragraph">
<p>&#x5728;B&#x7684;&#x9000;&#x51FA;&#x63D0;&#x73FE;&#x51FD;&#x6578;&#x7684;&#x7B2C;&#x4E8C;&#x6B21;&#x8FED;&#x4EE3;&#x4E2D;&#xFF0C;B&#x5C07;&#x518D;&#x6B21;&#x6AA2;&#x67E5;A&#x662F;&#x5426;&#x6709;&#x53EF;&#x7528;&#x9918;&#x984D;&#x3002;&#x7531;&#x65BC;&#x6B65;&#x9A5F;3&#xFF08;&#x5176;&#x66F4;&#x65B0;&#x4E86;A&#x7684;&#x9918;&#x984D;&#xFF09;&#x5C1A;&#x672A;&#x57F7;&#x884C;&#xFF0C;&#x6240;&#x4EE5;&#x5C0D;&#x65BC;B&#x4F86;&#x8AAA;&#xFF0C;&#x7121;&#x8AD6;&#x8A72;&#x51FD;&#x6578;&#x88AB;&#x91CD;&#x65B0;&#x8ABF;&#x7528;&#x591A;&#x5C11;&#x6B21;&#xFF0C;A&#x4ECD;&#x7136;&#x5177;&#x6709;&#x53EF;&#x7528;&#x8CC7;&#x91D1;&#x4F86;&#x63D0;&#x73FE;&#x3002;&#x53EA;&#x8981;&#x6709;gas&#x53EF;&#x4EE5;&#x7E7C;&#x7E8C;&#x904B;&#x884C;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x91CD;&#x8907;&#x8A72;&#x8FF4;&#x5708;&#x3002;&#x7576;A&#x6AA2;&#x6E2C;&#x5230;gas&#x91CF;&#x4E0D;&#x8DB3;&#x6642;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5728;payable&#x51FD;&#x6578;&#x4E2D;&#x505C;&#x6B62;&#x547C;&#x53EB;B. B&#x5C07;&#x6700;&#x7D42;&#x57F7;&#x884C;&#x6B65;&#x9A5F;3&#xFF0C;&#x5F9E;A&#x7684;&#x9918;&#x984D;&#x4E2D;&#x6263;&#x9664;X. &#x7136;&#x800C;&#xFF0C;&#x9019;&#x6642;&#xFF0C;B&#x53EF;&#x80FD;&#x5DF2;&#x7D93;&#x57F7;&#x884C;&#x4E86;&#x6578;&#x767E;&#x6B21;&#x8F49;&#x5E33;&#xFF0C;&#x4E26;&#x4E14;&#x53EA;&#x6263;&#x9664;&#x4E86;&#x4E00;&#x6B21;&#x8CBB;&#x7528;&#x3002;&#x5728;&#x9019;&#x6B21;&#x8972;&#x64CA;&#x4E2D;&#xFF0C;A&#x6709;&#x6548;&#x5730;&#x6D17;&#x52AB;&#x4E86;B&#x7684;&#x8CC7;&#x91D1;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x9019;&#x500B;&#x6F0F;&#x6D1E;&#x56E0;&#x5176;&#x8207;DAO&#x653B;&#x64CA;&#x7684;&#x76F8;&#x95DC;&#x6027;&#x800C;&#x7279;&#x5225;&#x51FA;&#x540D;&#x3002;&#x7528;&#x6236;&#x5229;&#x7528;&#x4E86;&#x9019;&#x6A23;&#x4E00;&#x500B;&#x4E8B;&#x5BE6;&#xFF0C;&#x5373;&#x5728;&#x8ABF;&#x7528;&#x8F49;&#x79FB;&#x4E26;&#x63D0;&#x53D6;&#x50F9;&#x503C;&#x6578;&#x767E;&#x842C;&#x7F8E;&#x5143;&#x7684;ether&#x5F8C;&#xFF0C;&#x5408;&#x7D04;&#x4E2D;&#x7684;&#x9918;&#x984D;&#x624D;&#x767C;&#x751F;&#x8B8A;&#x5316;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x70BA;&#x4E86;&#x9632;&#x6B62;&#x91CD;&#x5165;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x505A;&#x6CD5;&#x662F;&#x8B93;&#x958B;&#x767C;&#x8005;&#x4F7F;&#x7528;<em>Checks-Effects-Interactions</em>&#x6A21;&#x5F0F;&#xFF0C;&#x5728;&#x9032;&#x884C;&#x8ABF;&#x7528;&#x4E4B;&#x524D;&#x61C9;&#x7528;&#x51FD;&#x6578;&#x8ABF;&#x7528;&#x7684;&#x5F71;&#x97FF;&#xFF08;&#x4F8B;&#x5982;&#x6E1B;&#x5C11;&#x9918;&#x984D;&#xFF09;&#x3002;&#x5728;&#x6211;&#x5011;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x5207;&#x63DB;&#x6B65;&#x9A5F;3&#x548C;2&#xFF1A;&#x5728;&#x50B3;&#x8F38;&#x4E4B;&#x524D;&#x66F4;&#x65B0;&#x7528;&#x6236;&#x7684;&#x9918;&#x984D;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;&#x4EE5;&#x592A;&#x574A;&#xFF0C;&#x9019;&#x662F;&#x5B8C;&#x5168;&#x6C92;&#x554F;&#x984C;&#x7684;&#xFF0C;&#x56E0;&#x70BA;&#x4EA4;&#x6613;&#x7684;&#x6240;&#x6709;&#x5F71;&#x97FF;&#x90FD;&#x662F;&#x539F;&#x5B50;&#x7684;&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x5728;&#x6C92;&#x6709;&#x652F;&#x4ED8;&#x7D66;&#x7528;&#x6236;&#x7684;&#x60C5;&#x6CC1;&#x4E0B;&#x66F4;&#x65B0;&#x9918;&#x984D;&#x662F;&#x4E0D;&#x53EF;&#x80FD;&#x7684;&#x3002;&#x8981;&#x9EBC;&#x90FD;&#x767C;&#x751F;&#xFF0C;&#x8981;&#x9EBC;&#x62CB;&#x51FA;&#x7570;&#x5E38;&#xFF0C;&#x90FD;&#x4E0D;&#x6703;&#x767C;&#x751F;&#x3002;&#x9019;&#x6A23;&#x53EF;&#x4EE5;&#x9632;&#x6B62;&#x91CD;&#x5165;&#x653B;&#x64CA;&#xFF0C;&#x56E0;&#x70BA;&#x6240;&#x6709;&#x5F8C;&#x7E8C;&#x8ABF;&#x7528;&#x539F;&#x59CB;&#x63D0;&#x73FE;&#x51FD;&#x6578;&#x7684;&#x64CD;&#x4F5C;&#x90FD;&#x6703;&#x9047;&#x5230;&#x6B63;&#x78BA;&#x7684;&#x4FEE;&#x6539;&#x5F8C;&#x9918;&#x984D;&#x3002;&#x901A;&#x904E;&#x5207;&#x63DB;&#x9019;&#x5169;&#x500B;&#x6B65;&#x9A5F;&#xFF0C;&#x53EF;&#x4EE5;&#x9632;&#x6B62;A&#x7684;&#x63D0;&#x73FE;&#x91D1;&#x984D;&#x8D85;&#x904E;&#x5176;&#x9918;&#x984D;&#x3002;</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="design_patterns_sec">&#x8A2D;&#x8A08;&#x6A21;&#x5F0F;</h4>
<div class="paragraph">
<p>&#x4EFB;&#x4F55;&#x7DE8;&#x7A0B;&#x7BC4;&#x5F0F;&#x7684;&#x8EDF;&#x9AD4;&#x958B;&#x767C;&#x4EBA;&#x54E1;&#x901A;&#x5E38;&#x90FD;&#x6703;&#x9047;&#x5230;&#x4EE5;&#x884C;&#x70BA;&#xFF0C;&#x7D50;&#x69CB;&#xFF0C;&#x4EA4;&#x4E92;&#x548C;&#x5275;&#x5EFA;&#x70BA;&#x4E3B;&#x984C;&#x7684;&#x91CD;&#x8907;&#x8A2D;&#x8A08;&#x6311;&#x6230;&#x3002;&#x901A;&#x5E38;&#x9019;&#x4E9B;&#x554F;&#x984C;&#x53EF;&#x4EE5;&#x6982;&#x62EC;&#x4E26;&#x91CD;&#x65B0;&#x61C9;&#x7528;&#x65BC;&#x672A;&#x4F86;&#x985E;&#x4F3C;&#x6027;&#x8CEA;&#x7684;&#x554F;&#x984C;&#x3002;&#x7576;&#x7D66;&#x5B9A;&#x6B63;&#x5F0F;&#x7D50;&#x69CB;&#x6642;&#xFF0C;&#x9019;&#x4E9B;&#x6982;&#x62EC;&#x7A31;&#x70BA;<strong>&#x8A2D;&#x8A08;&#x6A21;&#x5F0F;</strong>&#x3002;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x4E00;&#x7CFB;&#x5217;&#x91CD;&#x8907;&#x51FA;&#x73FE;&#x7684;&#x8A2D;&#x8A08;&#x554F;&#x984C;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x63CF;&#x8FF0;&#x7684;&#x4E00;&#x4E9B;&#x6A21;&#x5F0F;&#x4F86;&#x89E3;&#x6C7A;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x767C;&#x5C55;&#x4E2D;&#x5B58;&#x5728;&#x8457;&#x7121;&#x6578;&#x7684;&#x8A2D;&#x8A08;&#x554F;&#x984C;&#xFF0C;&#x56E0;&#x6B64;&#x7121;&#x6CD5;&#x8A0E;&#x8AD6;&#x6240;&#x6709;&#x9019;&#x4E9B;&#x554F;&#x984C;
&#x9019;&#x88E1;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x672C;&#x7BC0;&#x5C07;&#x91CD;&#x9EDE;&#x8A0E;&#x8AD6;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x8A2D;&#x8A08;&#x4E2D;&#x6700;&#x5E38;&#x898B;&#x7684;&#x4E09;&#x985E;&#x554F;&#x984C;&#x5206;&#x985E;&#xFF1A;<strong>&#x8A2A;&#x554F;&#x63A7;&#x5236;&#xFF08;access control&#xFF09;</strong>&#xFF0C;<strong>&#x72C0;&#x614B;&#x6D41;&#xFF08;state flow&#xFF09;</strong>&#x548C;<strong>&#x8CC7;&#x91D1;&#x652F;&#x51FA;&#xFF08;fund disbursement&#xFF09;</strong>&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;&#x672C;&#x7BC0;&#x4E2D;&#xFF0C;&#x6211;&#x5011;&#x5C07;&#x5236;&#x5B9A;&#x4E00;&#x4EFD;&#x5408;&#x7D04;&#xFF0C;&#x6700;&#x7D42;&#x5C07;&#x5305;&#x542B;&#x6240;&#x6709;&#x9019;&#x4E09;&#x7A2E;&#x8A2D;&#x8A08;&#x6A21;&#x5F0F;&#x3002;&#x8A72;&#x5408;&#x7D04;&#x5C07;&#x904B;&#x884C;&#x6295;&#x7968;&#x7CFB;&#x7D71;&#xFF0C;&#x5141;&#x8A31;&#x7528;&#x6236;&#x5C0D;&#x201C;&#x771F;&#x76F8;&#x201D;&#x9032;&#x884C;&#x6295;&#x7968;&#x3002;&#x8A72;&#x5408;&#x7D04;&#x5C07;&#x63D0;&#x51FA;&#x4E00;&#x9805;&#x5BA3;&#x544A;&#xFF0C;&#x4F8B;&#x5982;&#x201C;&#x5C0F;&#x718A;&#x968A;&#x8D0F;&#x5F97;&#x4E16;&#x754C;&#x7CFB;&#x5217;&#x8CFD;&#x201D;&#x3002;&#x6216;&#x8005;&#x201C;&#x7D10;&#x7D04;&#x5E02;&#x6B63;&#x5728;&#x4E0B;&#x96E8;&#x201D;&#xFF0C;&#x7136;&#x5F8C;&#x7528;&#x6236;&#x6703;&#x6709;&#x6A5F;&#x6703;&#x9078;&#x64C7;&#x771F;&#x6216;&#x5047;&#x3002;&#x5982;&#x679C;&#x5927;&#x591A;&#x6578;&#x53C3;&#x8207;&#x8005;&#x6295;&#x7968;&#x8D0A;&#x6210;&quot;&#x771F;&quot;&#x5408;&#x7D04;&#x5C31;&#x8A8D;&#x70BA;&#x8A72;&#x5BA3;&#x544A;&#x70BA;&#x771F;&#xFF0C;&#x5982;&#x679C;&#x5927;&#x591A;&#x6578;&#x53C3;&#x8207;&#x8005;&#x6295;&#x7968;&#x8D0A;&#x6210;&#x201C;&#x5047;&#x201D;&#xFF0C;&#x5247;&#x5408;&#x7D04;&#x5C07;&#x8A8D;&#x70BA;&#x8A72;&#x5BA3;&#x544A;&#x70BA;&#x201C;&#x5047;&#x201D;&#x3002;&#x70BA;&#x4E86;&#x6FC0;&#x52F5;&#x771F;&#x5BE6;&#x6027;&#xFF0C;&#x6BCF;&#x6B21;&#x6295;&#x7968;&#x5FC5;&#x9808;&#x5411;&#x5408;&#x7D04;&#x767C;&#x9001;100 ether&#xFF0C;&#x800C;&#x5931;&#x6557;&#x7684;&#x5C11;&#x6578;&#x6D3E;&#x51FA;&#x7684;&#x8CC7;&#x91D1;&#x5C07;&#x5206;&#x7D66;&#x5927;&#x591A;&#x6578;&#x3002;&#x5927;&#x591A;&#x6578;&#x53C3;&#x8207;&#x8005;&#x5C07;&#x5F9E;&#x5C11;&#x6578;&#x4EBA;&#x4E2D;&#x7372;&#x5F97;&#x4ED6;&#x5011;&#x7684;&#x90E8;&#x5206;&#x734E;&#x91D1;&#x4EE5;&#x53CA;&#x4ED6;&#x5011;&#x7684;&#x521D;&#x59CB;&#x6295;&#x8CC7;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x9019;&#x500B;&#x201C;&#x771F;&#x76F8;&#x6295;&#x7968;&#x201D;&#x7CFB;&#x7D71;&#x5BE6;&#x969B;&#x4E0A;&#x662F;Gnosis&#x7684;&#x57FA;&#x790E;&#xFF0C;Gnosis&#x662F;&#x4E00;&#x500B;&#x5EFA;&#x7ACB;&#x5728;&#x4EE5;&#x592A;&#x574A;&#x4E4B;&#x4E0A;&#x7684;&#x9810;&#x6E2C;&#x5DE5;&#x5177;&#x3002;&#x6709;&#x95DC;Gnosis&#x7684;&#x66F4;&#x591A;&#x8CC7;&#x8A0A;&#xFF0C;&#x8ACB;&#x8A2A;&#x554F;&#xFF1A;https://gnosis.pm/</p>
</div>
<div class="sect4">
<h5 id="access_control_sec">&#x8A2A;&#x554F;&#x63A7;&#x5236; Access control</h5>
<div class="paragraph">
<p>&#x8A2A;&#x554F;&#x63A7;&#x5236;&#x9650;&#x5236;&#x54EA;&#x4E9B;&#x7528;&#x6236;&#x53EF;&#x4EE5;&#x8ABF;&#x7528;&#x5408;&#x7D04;&#x529F;&#x80FD;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x771F;&#x76F8;&#x6295;&#x7968;&#x5408;&#x7D04;&#x7684;&#x6240;&#x6709;&#x8005;&#x53EF;&#x80FD;&#x6C7A;&#x5B9A;&#x9650;&#x5236;&#x90A3;&#x4E9B;&#x53EF;&#x4EE5;&#x53C3;&#x8207;&#x6295;&#x7968;&#x7684;&#x4EBA;&#x3002;
&#x70BA;&#x4E86;&#x9054;&#x5230;&#x9019;&#x500B;&#x76EE;&#x6A19;&#xFF0C;&#x5408;&#x7D04;&#x5FC5;&#x9808;&#x65BD;&#x52A0;&#x5169;&#x500B;&#x8A2A;&#x554F;&#x9650;&#x5236;&#xFF1A;</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>&#x53EA;&#x6709;&#x5408;&#x7D04;&#x7684;&#x6240;&#x6709;&#x8005;&#x53EF;&#x4EE5;&#x5C07;&#x65B0;&#x7528;&#x6236;&#x6DFB;&#x52A0;&#x5230;&#x201C;&#x5141;&#x8A31;&#x7684;&#x9078;&#x6C11;&#x201D;&#x5217;&#x8868;&#x4E2D;</p>
</li>
<li>
<p>&#x53EA;&#x6709;&#x5141;&#x8A31;&#x7684;&#x9078;&#x6C11;&#x53EF;&#x4EE5;&#x6295;&#x7968;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Solidity&#x51FD;&#x6578;&#x4FEE;&#x98FE;&#x5668;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x500B;&#x7C21;&#x6F54;&#x7684;&#x65B9;&#x5F0F;&#x4F86;&#x5BE6;&#x73FE;&#x9019;&#x4E9B;&#x9650;&#x5236;&#x3002;</p>
</div>
<div class="paragraph">
<p>_Note: &#x4EE5;&#x4E0B;&#x7BC4;&#x4F8B;&#x5728;&#x4FEE;&#x6539;&#x5668;&#x4E3B;&#x9AD4;&#x5167;&#x4F7F;&#x7528;&#x4E0B;&#x5283;&#x7DDA;&#x5206;&#x865F;&#x3002;&#x9019;&#x662F;Solidity&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x7528;&#x65BC;&#x544A;&#x77E5;&#x7DE8;&#x8B6F;&#x5668;&#x4F55;&#x6642;&#x904B;&#x884C;&#x88AB;&#x4FEE;&#x98FE;&#x7684;&#x51FD;&#x6578;&#x7684;&#x4E3B;&#x9AD4;&#x3002;&#x958B;&#x767C;&#x4EBA;&#x54E1;&#x53EF;&#x4EE5;&#x8A8D;&#x70BA;&#x88AB;&#x4FEE;&#x98FE;&#x7684;&#x51FD;&#x6578;&#x7684;&#x4E3B;&#x9AD4;&#x5C07;&#x88AB;&#x8907;&#x5236;&#x5230;&#x4E0B;&#x5283;&#x7DDA;&#x7684;&#x4F4D;&#x7F6E;&#x3002;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-solidity" data-lang="solidity">pragma solidity ^0.4.21;

contract TruthVote {

    address public owner = msg.sender;

    address[] true_votes;
    address[] false_votes;
    mapping (address =&gt; bool) voters;
    mapping (address =&gt; bool) hasVoted;

    uint VOTE_COST = 100;

    modifier onlyOwner() {
        require(msg.sender == owner);
        _;
    }

    modifier onlyVoter() {
        require(voters[msg.sender] != false);
        _;
    }

    modifier hasNotVoted() {
        require(hasVoted[msg.sender] == false);
        _;
    }

    function addVoter(address voter)
        public
        onlyOwner()
    {
        voters[voter] = true;
    }

    function vote(bool val)
        public
        payable
        onlyVoter()
        hasNotVoted()
    {
        if (msg.value &gt;= VOTE_COST) {
            if (val) {
                true_votes.push(msg.sender);
            } else {
                false_votes.push(msg.sender);
            }
            hasVoted[msg.sender] = true;
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>&#x4FEE;&#x98FE;&#x5668;&#x548C;&#x51FD;&#x6578;&#x7684;&#x8AAA;&#x660E;&#xFF1A;</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>onlyOwner</strong>: &#x9019;&#x500B;&#x4FEE;&#x98FE;&#x5668;&#x53EF;&#x4EE5;&#x4FEE;&#x98FE;&#x4E00;&#x500B;&#x51FD;&#x6578;&#xFF0C;&#x4F7F;&#x5F97;&#x51FD;&#x6578;&#x53EA;&#x80FD;&#x88AB;&#x5730;&#x5740;&#x8207;<strong>owner</strong>&#x76F8;&#x540C;&#x7684;&#x767C;&#x9001;&#x8005;&#x8ABF;&#x7528;&#x3002;</p>
</li>
<li>
<p><strong>onlyVoter</strong>: &#x9019;&#x500B;&#x4FEE;&#x98FE;&#x5668;&#x53EF;&#x4EE5;&#x4FEE;&#x98FE;&#x4E00;&#x500B;&#x51FD;&#x6578;&#xFF0C;&#x4F7F;&#x5F97;&#x51FD;&#x6578;&#x53EA;&#x80FD;&#x88AB;&#x5DF2;&#x767B;&#x8A18;&#x7684;&#x9078;&#x8209;&#x4EBA;&#x8ABF;&#x7528;&#x3002;</p>
</li>
<li>
<p><strong>addVoter(voter)</strong>: &#x6B64;&#x51FD;&#x6578;&#x7528;&#x65BC;&#x5C07;&#x9078;&#x6C11;&#x6DFB;&#x52A0;&#x5230;&#x9078;&#x6C11;&#x5217;&#x8868;&#x3002;&#x8A72;&#x529F;&#x80FD;&#x4F7F;&#x7528;<strong>onlyOwner</strong>&#x4FEE;&#x98FE;&#x5668;&#xFF0C;&#x56E0;&#x6B64;&#x53EA;&#x6709;&#x8A72;&#x5408;&#x7D04;&#x7684;&#x6240;&#x6709;&#x8005;&#x53EF;&#x4EE5;&#x8ABF;&#x7528;&#x5B83;&#x3002;</p>
</li>
<li>
<p><strong>vote(val)</strong>: &#x9019;&#x500B;&#x51FD;&#x6578;&#x88AB;&#x6295;&#x7968;&#x8005;&#x7528;&#x4F86;&#x5C0D;&#x6240;&#x63D0;&#x51FA;&#x7684;&#x547D;&#x984C;&#x6295;&#x4E0B;&#x771F;&#x6216;&#x5047;&#x3002;&#x5B83;&#x7528;<strong>onlyVoter</strong>&#x4FEE;&#x98FE;&#x5668;&#x88DD;&#x98FE;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x6709;&#x5DF2;&#x767B;&#x8A18;&#x7684;&#x9078;&#x6C11;&#x53EF;&#x4EE5;&#x8ABF;&#x7528;&#x5B83;&#x3002;</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="state_flow_sec">&#x72C0;&#x614B;&#x6D41; State flow</h5>
<div class="paragraph">
<p>&#x8A31;&#x591A;&#x5408;&#x7D04;&#x5C07;&#x9700;&#x8981;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x72C0;&#x614B;&#x7684;&#x6982;&#x5FF5;&#x3002;&#x5408;&#x7D04;&#x7684;&#x72C0;&#x614B;&#x5C07;&#x6C7A;&#x5B9A;&#x5408;&#x7D04;&#x7684;&#x884C;&#x70BA;&#x65B9;&#x5F0F;&#x4EE5;&#x53CA;&#x5728;&#x7D66;&#x5B9A;&#x7684;&#x6642;&#x9593;&#x9EDE;&#x63D0;&#x4F9B;&#x7684;&#x64CD;&#x4F5C;&#x3002;&#x8B93;&#x6211;&#x5011;&#x56DE;&#x5230;&#x6211;&#x5011;&#x7684;&#x771F;&#x5BE6;&#x6295;&#x7968;&#x7CFB;&#x7D71;&#x4F86;&#x7372;&#x5F97;&#x66F4;&#x5177;&#x9AD4;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x6211;&#x5011;&#x6295;&#x7968;&#x7CFB;&#x7D71;&#x7684;&#x904B;&#x4F5C;&#x53EF;&#x4EE5;&#x5206;&#x70BA;&#x4E09;&#x500B;&#x4E0D;&#x540C;&#x7684;&#x72C0;&#x614B;&#x3002;</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Register</strong>: &#x670D;&#x52D9;&#x5DF2;&#x5275;&#x5EFA;&#xFF0C;&#x6240;&#x6709;&#x8005;&#x73FE;&#x5728;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x9078;&#x6C11;&#x3002;</p>
</li>
<li>
<p><strong>Vote</strong>: &#x6240;&#x6709;&#x9078;&#x6C11;&#x6295;&#x7968;&#x3002;</p>
</li>
<li>
<p><strong>Disperse</strong>: &#x6295;&#x7968;&#x4ED8;&#x6B3E;&#x88AB;&#x5206;&#x7D66;&#x5927;&#x591A;&#x6578;&#x53C3;&#x8207;&#x8005;&#x3002;</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>&#x4EE5;&#x4E0B;&#x7A0B;&#x5F0F;&#x78BC;&#x7E7C;&#x7E8C;&#x5EFA;&#x7ACB;&#x5728;&#x8A2A;&#x554F;&#x63A7;&#x5236;&#x7A0B;&#x5F0F;&#x78BC;&#x7684;&#x57FA;&#x790E;&#x4E0A;&#xFF0C;&#x4F46;&#x9032;&#x4E00;&#x6B65;&#x5C07;&#x529F;&#x80FD;&#x9650;&#x5236;&#x5728;&#x7279;&#x5B9A;&#x72C0;&#x614B;&#x3002;
&#x5728;Solidity&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x679A;&#x8209;&#x503C;&#x4F86;&#x8868;&#x793A;&#x72C0;&#x614B;&#x662F;&#x53F8;&#x7A7A;&#x898B;&#x6163;&#x7684;&#x4E8B;&#x60C5;&#x3002;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-solidity" data-lang="solidity">pragma solidity ^0.4.21;

contract TruthVote {
    enum States {
        REGISTER,
        VOTE,
        DISPERSE
    }

    address public owner = msg.sender;

    uint voteCost;

    address[] trueVotes;
    address[] falseVotes;


    mapping (address =&gt; bool) voters;
    mapping (address =&gt; bool) hasVoted;

    uint VOTE_COST = 100;

    States state;

    modifier onlyOwner() {
        require(msg.sender == owner);
        _;
    }

    modifier onlyVoter() {
        require(voters[msg.sender] != false);
        _;
    }

    modifier isCurrentState(States _stage) {
        require(state == _stage);
        _;
    }

    modifier hasNotVoted() {
        require(hasVoted[msg.sender] == false);
        _;
    }

    function startVote()
        public
        onlyOwner()
        isCurrentState(States.REGISTER)
    {
        goToNextState();
    }

    function goToNextState() internal {
        state = States(uint(state) + 1);
    }

    modifier pretransition() {
        goToNextState();
        _;
    }

    function addVoter(address voter)
        public
        onlyOwner()
        isCurrentState(States.REGISTER)
    {
        voters[voter] = true;
    }

    function vote(bool val)
        public
        payable
        isCurrentState(States.VOTE)
        onlyVoter()
        hasNotVoted()
    {
        if (msg.value &gt;= VOTE_COST) {
            if (val) {
                trueVotes.push(msg.sender);
            } else {
                falseVotes.push(msg.sender);
            }
            hasVoted[msg.sender] = true;
        }
    }

    function disperse(bool val)
        public
        onlyOwner()
        isCurrentState(States.VOTE)
        pretransition()
    {
        address[] memory winningGroup;
        uint winningCompensation;
        if (trueVotes.length &gt; falseVotes.length) {
            winningGroup = trueVotes;
            winningCompensation = VOTE_COST + (VOTE_COST*falseVotes.length) / trueVotes.length;
        } else if (trueVotes.length &lt; falseVotes.length) {
            winningGroup = falseVotes;
            winningCompensation = VOTE_COST + (VOTE_COST*trueVotes.length) / falseVotes.length;
        } else {
            winningGroup = trueVotes;
            winningCompensation = VOTE_COST;
            for (uint i = 0; i &lt; falseVotes.length; i++) {
                falseVotes[i].transfer(winningCompensation);
            }
        }

        for (uint j = 0; j &lt; winningGroup.length; j++) {
            winningGroup[j].transfer(winningCompensation);
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>&#x4FEE;&#x98FE;&#x5668;&#x548C;&#x51FD;&#x6578;&#x7684;&#x8AAA;&#x660E;&#xFF1A;</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>isCurrentState</strong>: &#x5728;&#x7E7C;&#x7E8C;&#x57F7;&#x884C;&#x88DD;&#x98FE;&#x51FD;&#x6578;&#x4E4B;&#x524D;&#xFF0C;&#x6B64;&#x4FEE;&#x98FE;&#x5668;&#x5C07;&#x8981;&#x6C42;&#x5408;&#x7D04;&#x8655;&#x65BC;&#x6307;&#x5B9A;&#x72C0;&#x614B;&#x3002;</p>
</li>
<li>
<p><strong>pretransition</strong>: &#x5728;&#x57F7;&#x884C;&#x88DD;&#x98FE;&#x51FD;&#x6578;&#x7684;&#x5176;&#x9918;&#x90E8;&#x5206;&#x4E4B;&#x524D;&#xFF0C;&#x6B64;&#x4FEE;&#x98FE;&#x5668;&#x5C07;&#x8F49;&#x63DB;&#x5230;&#x4E0B;&#x4E00;&#x500B;&#x72C0;&#x614B;</p>
</li>
<li>
<p><strong>goToNextState</strong>: &#x5C07;&#x5408;&#x7D04;&#x8F49;&#x63DB;&#x5230;&#x4E0B;&#x4E00;&#x500B;&#x72C0;&#x614B;&#x7684;&#x51FD;&#x6578;</p>
</li>
<li>
<p><strong>disperse</strong>: &#x8A08;&#x7B97;&#x5927;&#x591A;&#x6578;&#x4EE5;&#x53CA;&#x76F8;&#x61C9;&#x7684;&#x74DC;&#x5206;&#x734E;&#x91D1;&#x7684;&#x529F;&#x80FD;&#x3002;&#x53EA;&#x6709;owner&#x53EF;&#x4EE5;&#x8ABF;&#x7528;&#x9019;&#x500B;&#x51FD;&#x6578;&#x4F86;&#x6B63;&#x5F0F;&#x7D50;&#x675F;&#x6295;&#x7968;&#x3002;</p>
</li>
<li>
<p><strong>startVote</strong>: &#x6240;&#x6709;&#x8005;&#x53EF;&#x7528;&#x65BC;&#x958B;&#x59CB;&#x6295;&#x7968;&#x7684;&#x529F;&#x80FD;&#x3002;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#x6CE8;&#x610F;&#x5230;&#x5141;&#x8A31;&#x6240;&#x6709;&#x8005;&#x96A8;&#x610F;&#x95DC;&#x9589;&#x6295;&#x7968;&#x6D41;&#x7A0B;&#x53EF;&#x80FD;&#x6703;&#x5C0E;&#x81F4;&#x5408;&#x7D04;&#x7684;&#x6FEB;&#x7528;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x5728;&#x66F4;&#x771F;&#x5BE6;&#x7684;&#x5BE6;&#x73FE;&#x4E2D;&#xFF0C;&#x6295;&#x7968;&#x671F;&#x61C9;&#x5728;&#x516C;&#x773E;&#x7406;&#x89E3;&#x7684;&#x6642;&#x9593;&#x6BB5;&#x5F8C;&#x7D50;&#x675F;&#x3002;&#x5C0D;&#x65BC;&#x9019;&#x500B;&#x4F8B;&#x5B50;&#xFF0C;&#x9019;&#x6C92;&#x554F;&#x984C;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x73FE;&#x5728;&#x589E;&#x52A0;&#x7684;&#x5167;&#x5BB9;&#x78BA;&#x4FDD;&#x53EA;&#x6709;&#x5728;owner&#x6C7A;&#x5B9A;&#x958B;&#x59CB;&#x6295;&#x7968;&#x968E;&#x6BB5;&#x6642;&#x624D;&#x5141;&#x8A31;&#x6295;&#x7968;&#xFF0C;&#x7528;&#x6236;&#x53EA;&#x80FD;&#x5728;&#x6295;&#x7968;&#x524D;&#x7531;owner&#x8A3B;&#x518A;&#xFF0C;&#x4E26;&#x4E14;&#x5728;&#x6295;&#x7968;&#x7D50;&#x675F;&#x5F8C;&#x624D;&#x80FD;&#x5206;&#x914D;&#x8CC7;&#x91D1;&#x3002;</p>
</div>
</div>
<div class="sect4">
<h5 id="withdraw_sec">&#x63D0;&#x73FE; Withdraw</h5>
<div class="paragraph">
<p>&#x8A31;&#x591A;&#x5408;&#x7D04;&#x5C07;&#x70BA;&#x7528;&#x6236;&#x5F9E;&#x4E2D;&#x63D0;&#x53D6;&#x8CC7;&#x91D1;&#x63D0;&#x4F9B;&#x4E00;&#x4E9B;&#x65B9;&#x6CD5;&#x3002;&#x5728;&#x6211;&#x5011;&#x7684;&#x7BC4;&#x4F8B;&#x4E2D;&#xFF0C;&#x5C6C;&#x65BC;&#x5927;&#x591A;&#x6578;&#x7684;&#x7528;&#x6236;&#x5728;&#x5408;&#x7D04;&#x958B;&#x59CB;&#x5206;&#x914D;&#x8CC7;&#x91D1;&#x6642;&#x76F4;&#x63A5;&#x63A5;&#x6536;&#x8CC7;&#x91D1;&#x3002;&#x96D6;&#x7136;&#x9019;&#x770B;&#x8D77;&#x4F86;&#x6709;&#x6548;&#xFF0C;&#x4F46;&#x5B83;&#x662F;&#x4E00;&#x7A2E;&#x6B20;&#x8003;&#x616E;&#x7684;&#x89E3;&#x6C7A;&#x65B9;&#x6848;&#x3002;&#x5728;<strong>disperse</strong>&#x4E2D;<strong>addr.send()</strong>&#x8ABF;&#x7528;&#x7684;&#x63A5;&#x6536;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x500B;&#x5408;&#x7D04;&#xFF0C;&#x5177;&#x6709;&#x4E00;&#x500B;&#x6703;&#x5931;&#x6557;&#x7684;fallback&#x51FD;&#x6578;&#xFF0C;&#x6703;&#x6253;&#x65B7;<strong>disperse</strong>&#x3002;&#x9019;&#x6709;&#x6548;&#x5730;&#x963B;&#x6B62;&#x4E86;&#x66F4;&#x591A;&#x7684;&#x53C3;&#x8207;&#x8005;&#x63A5;&#x6536;&#x4ED6;&#x5011;&#x7684;&#x6536;&#x5165;&#x3002;
&#x4E00;&#x500B;&#x66F4;&#x597D;&#x7684;&#x89E3;&#x6C7A;&#x65B9;&#x6848;&#x662F;&#x63D0;&#x4F9B;&#x4E00;&#x500B;&#x7528;&#x6236;&#x53EF;&#x4EE5;&#x8ABF;&#x7528;&#x4F86;&#x6536;&#x53D6;&#x6536;&#x5165;&#x7684;&#x63D0;&#x6B3E;&#x529F;&#x80FD;&#x3002;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-solidity" data-lang="solidity">...

enum States {
    REGISTER,
    VOTE,
    DETERMINE,
    WITHDRAW
}

mapping (address =&gt; bool) votes;
uint trueCount;
uint falseCount;

bool winner;
uint winningCompensation;

modifier posttransition() {
    _;
    goToNextState();
}

function vote(bool val)
    public
    onlyVoter()
    isCurrentStage(State.VOTE)
{
    if (votes[msg.sender] == address(0) &amp;&amp; msg.value &gt;= VOTE_COST) {
        votes[msg.sender] = val;
        if (val) {
            trueCount++;
        } else {
            falseCount++;
        }
    }
}

function determine(bool val)
    public
    onlyOwner()
    isCurrentState(State.VOTE)
    pretransition()
    posttransition()
{
    if (trueCount &gt; falseCount) {
        winner = true;
        winningCompensation = VOTE_COST + (VOTE_COST*false_votes.length) / true_votes.length;
    } else if (falseCount &gt; trueCount) {
        winner = false;
        winningCompensation = VOTE_COST + (VOTE_COST*true_votes.length) / false_votes.length;
    } else {
        winningCompensation = VOTE_COST;
    }
}

function withdraw()
    public
    onlyVoter()
    isCurrentState(State.WITHDRAW)
{
    if (votes[msg.sender] != address(0)) {
        if (votes[msg.sender] == winner) {
            msg.sender.transfer(winningCompensation);
        }
    }
}

...</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>&#x4FEE;&#x98FE;&#x5668;&#x548C;&#xFF08;&#x66F4;&#x65B0;&#xFF09;&#x529F;&#x80FD;&#x7684;&#x8AAA;&#x660E;&#xFF1A;</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>posttransition</strong>: &#x51FD;&#x6578;&#x8ABF;&#x7528;&#x5F8C;&#x8F49;&#x63DB;&#x5230;&#x4E0B;&#x4E00;&#x500B;&#x72C0;&#x614B;&#x3002;</p>
</li>
<li>
<p><strong>determine</strong>: &#x6B64;&#x529F;&#x80FD;&#x8207;&#x4EE5;&#x524D;&#x7684;<strong>disperse</strong>&#x529F;&#x80FD;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#xFF0C;&#x9664;&#x4E86;&#x73FE;&#x5728;&#x53EA;&#x8A08;&#x7B97;&#x8D0F;&#x5BB6;&#x548C;&#x7372;&#x52DD;&#x8CE0;&#x511F;&#x91D1;&#x984D;&#xFF0C;&#x5BE6;&#x969B;&#x4E0A;&#x4E26;&#x672A;&#x767C;&#x9001;&#x4EFB;&#x4F55;&#x8CC7;&#x91D1;&#x3002;</p>
</li>
<li>
<p><strong>vote</strong>: &#x6295;&#x7968;&#x73FE;&#x5728;&#x88AB;&#x6DFB;&#x52A0;&#x5230;votes mapping&#xFF0C;&#x4E26;&#x4F7F;&#x7528;&#x771F;/&#x5047;&#x8A08;&#x6578;&#x5668;&#x3002;</p>
</li>
<li>
<p><strong>withdraw</strong>: &#x5141;&#x8A31;&#x6295;&#x7968;&#x8005;&#x63D0;&#x53D6;&#x52DD;&#x5229;&#x679C;&#x5BE6;&#xFF08;&#x5982;&#x679C;&#x6709;&#xFF09;&#x3002;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#x9019;&#x6A23;&#xFF0C;&#x5982;&#x679C;&#x767C;&#x9001;&#x5931;&#x6557;&#xFF0C;&#x5247;&#x53EA;&#x5728;&#x4E00;&#x500B;&#x7279;&#x5B9A;&#x7684;&#x8ABF;&#x7528;&#x8005;&#x4E0A;&#x5931;&#x6557;&#xFF0C;&#x4E0D;&#x5F71;&#x97FF;&#x5176;&#x4ED6;&#x7528;&#x6236;&#x63D0;&#x53D6;&#x4ED6;&#x5011;&#x7684;&#x52DD;&#x5229;&#x679C;&#x5BE6;&#x3002;</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="contract_libraries_sec">&#x5408;&#x7D04;&#x5EAB;</h4>
<div class="paragraph">
<p>Github link: <a href="https://github.com/ethpm" class="bare" target="_blank">https://github.com/ethpm</a></p>
</div>
<div class="paragraph">
<p>Repository link: <a href="https://www.ethpm.com/registry" class="bare" target="_blank">https://www.ethpm.com/registry</a></p>
</div>
<div class="paragraph">
<p>Website: <a href="https://www.ethpm.com/" class="bare" target="_blank">https://www.ethpm.com/</a></p>
</div>
<div class="paragraph">
<p>Documentation: <a href="https://www.ethpm.com/docs/integration-guide" class="bare" target="_blank">https://www.ethpm.com/docs/integration-guide</a></p>
</div>
</div>
<div class="sect3">
<h4 id="security_best_practices_sec">&#x5B89;&#x5168;&#x6700;&#x4F73;&#x5BE6;&#x8E10;</h4>
<div class="paragraph">
<p>Github: <a href="https://github.com/ConsenSys/smart-contract-best-practices/" class="bare" target="_blank">https://github.com/ConsenSys/smart-contract-best-practices/</a></p>
</div>
<div class="paragraph">
<p>Docs: <a href="https://consensys.github.io/smart-contract-best-practices/" class="bare" target="_blank">https://consensys.github.io/smart-contract-best-practices/</a></p>
</div>
<div class="paragraph">
<p><a href="https://blog.zeppelin.solutions/onward-with-ethereum-smart-contract-security-97a827e47702" class="bare" target="_blank">https://blog.zeppelin.solutions/onward-with-ethereum-smart-contract-security-97a827e47702</a></p>
</div>
<div class="paragraph">
<p><a href="https://medium.com/zeppelin-blog/the-hitchhikers-guide-to-smart-contracts-in-ethereum-848f08001f05#.cox40d2ut" class="bare" target="_blank">https://medium.com/zeppelin-blog/the-hitchhikers-guide-to-smart-contracts-in-ethereum-848f08001f05#.cox40d2ut</a></p>
</div>
<div class="paragraph">
<p>&#x4E5F;&#x8A31;&#x6700;&#x57FA;&#x672C;&#x7684;&#x8EDF;&#x9AD4;&#x5B89;&#x5168;&#x539F;&#x5247;&#x662F;&#x6700;&#x5927;&#x9650;&#x5EA6;&#x5730;&#x91CD;&#x7528;&#x53EF;&#x4FE1;&#x7A0B;&#x5F0F;&#x78BC;&#x3002;&#x5728;&#x5340;&#x584A;&#x93C8;&#x6280;&#x8853;&#x4E2D;&#xFF0C;&#x9019;&#x751A;&#x81F3;&#x6703;&#x51DD;&#x7D50;&#x6210;&#x4E00;&#x53E5;&#x683C;&#x8A00;&#xFF1A;&#x201C;Do not roll your own crypto&#x201D;&#x3002;&#x5C31;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x800C;&#x8A00;&#xFF0C;&#x9019;&#x610F;&#x5473;&#x8457;&#x5118;&#x53EF;&#x80FD;&#x591A;&#x5730;&#x5F9E;&#x7D93;&#x793E;&#x5340;&#x5FB9;&#x5E95;&#x5BE9;&#x67E5;&#x7684;&#x514D;&#x8CBB;&#x5EAB;&#x4E2D;&#x7372;&#x76CA;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x5728;Ethereum&#x4E2D;&#xFF0C;&#x4F7F;&#x7528;&#x6700;&#x5EE3;&#x6CDB;&#x7684;&#x89E3;&#x6C7A;&#x65B9;&#x6848;&#x662F;https://openzeppelin.org/[OpenZeppelin]&#x5957;&#x4EF6;&#xFF0C;&#x5F9E;ERC20&#x548C;ERC721&#x7684;Token&#x5BE6;&#x73FE;&#xFF0C;&#x5230;&#x773E;&#x591A;&#x773E;&#x5305;&#x6A21;&#x578B;&#xFF0C;&#x5230;&#x5E38;&#x898B;&#x65BC;&#x201C;Ownable&#x201D;&#xFF0C;&#x201C;Pausable&#x201D;&#x6216;&#x201C;LimitBalance&#x201D;&#x7B49;&#x5408;&#x7D04;&#x4E2D;&#x7684;&#x7C21;&#x55AE;&#x884C;&#x70BA;&#x3002;&#x8A72;&#x5132;&#x5B58;&#x5EAB;&#x4E2D;&#x7684;&#x5408;&#x7D04;&#x5DF2;&#x7D93;&#x904E;&#x5EE3;&#x6CDB;&#x7684;&#x6E2C;&#x8A66;&#xFF0C;&#x4E26;&#x4E14;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x6CC1;&#x4E0B;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x7528;&#x4F5C;<em>de facto</em>&#x6A19;&#x6E96;&#x5BE6;&#x73FE;&#x3002;&#x5B83;&#x5011;&#x53EF;&#x4EE5;&#x514D;&#x8CBB;&#x4F7F;&#x7528;&#xFF0C;&#x4E26;&#x4E14;&#x7531;https://zeppelin.solutions[Zeppelin]&#x548C;&#x4E0D;&#x65B7;&#x589E;&#x9577;&#x7684;&#x5916;&#x90E8;&#x8CA2;&#x737B;&#x8005;&#x5217;&#x8868;&#x69CB;&#x5EFA;&#x548C;&#x4FEE;&#x5FA9;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x540C;&#x6A23;&#x4F86;&#x81EA;Zeppelin&#x7684;&#x662F;https://zeppelinos.org/[zeppelin_os]&#xFF0C;&#x4E00;&#x500B;&#x7528;&#x65BC;&#x5B89;&#x5168;&#x5730;&#x958B;&#x767C;&#x548C;&#x7BA1;&#x7406;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x7684;&#x670D;&#x52D9;&#x548C;&#x5DE5;&#x5177;&#x7684;&#x958B;&#x6E90;&#x5E73;&#x81FA;&#x3002;zeppelin_os&#x5728;EVM&#x4E4B;&#x4E0A;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x500B;&#x5C64;&#xFF0C;&#x4F7F;&#x958B;&#x767C;&#x4EBA;&#x54E1;&#x53EF;&#x4EE5;&#x8F15;&#x9B06;&#x767C;&#x4F48;&#x53EF;&#x5347;&#x7D1A;&#x7684;DApp&#xFF0C;&#x5B83;&#x5011;&#x8207;&#x7D93;&#x904E;&#x826F;&#x597D;&#x6E2C;&#x8A66;&#x7684;&#x53EF;&#x81EA;&#x884C;&#x5347;&#x7D1A;&#x7684;&#x93C8;&#x4E0A;&#x5408;&#x7D04;&#x5EAB;&#x93C8;&#x63A5;&#x3002;&#x9019;&#x4E9B;&#x5EAB;&#x7684;&#x4E0D;&#x540C;&#x7248;&#x672C;&#x53EF;&#x4EE5;&#x5171;&#x5B58;&#x65BC;&#x5340;&#x584A;&#x93C8;&#x4E2D;&#xFF0C;&#x6191;&#x8B49;&#x7CFB;&#x7D71;&#x5141;&#x8A31;&#x7528;&#x6236;&#x5728;&#x4E0D;&#x540C;&#x65B9;&#x5411;&#x4E0A;&#x63D0;&#x51FA;&#x6216;&#x63A8;&#x52D5;&#x6539;&#x9032;&#x3002;&#x8A72;&#x5E73;&#x81FA;&#x9084;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x5957;&#x7528;&#x65BC;&#x8ABF;&#x8A66;&#xFF0C;&#x6E2C;&#x8A66;&#xFF0C;&#x90E8;&#x7F72;&#x548C;&#x76E3;&#x63A7;DApp&#x7684;&#x812B;&#x93C8;&#x5DE5;&#x5177;&#x3002;</p>
</div>
</div>
<div class="sect3">
<h4 id="further_reading_sec">&#x9032;&#x4E00;&#x6B65;&#x95B1;&#x8B80;</h4>
<div class="paragraph">
<p>&#x61C9;&#x7528;&#x7A0B;&#x5F0F;&#x4E8C;&#x9032;&#x5236;&#x63A5;&#x53E3;&#xFF08;ABI&#xFF09;&#x662F;&#x5F37;&#x985E;&#x578B;&#x7684;&#xFF0C;&#x5728;&#x7DE8;&#x8B6F;&#x6642;&#x548C;&#x975C;&#x614B;&#x6642;&#x90FD;&#x662F;&#x5DF2;&#x77E5;&#x7684;&#x3002;&#x6240;&#x6709;&#x5408;&#x7D04;&#x90FD;&#x6709;&#x4ED6;&#x5011;&#x6253;&#x7B97;&#x5728;&#x7DE8;&#x8B6F;&#x6642;&#x8ABF;&#x7528;&#x7684;&#x4EFB;&#x4F55;&#x5408;&#x7D04;&#x7684;&#x63A5;&#x53E3;&#x5B9A;&#x7FA9;&#x3002;</p>
</div>
<div class="paragraph">
<p>&#x95DC;&#x65BC;Ethereum ABI&#x7684;&#x66F4;&#x56B4;&#x683C;&#x548C;&#x66F4;&#x6DF1;&#x5165;&#x7684;&#x89E3;&#x91CB;&#x53EF;&#x4EE5;&#x5728;&#x9019;&#x627E;&#x5230;&#xFF1A;
<code>https://solidity.readthedocs.io/en/develop/abi-spec.html</code>.
&#x8A72;&#x93C8;&#x63A5;&#x5305;&#x62EC;&#x6709;&#x95DC;&#x7DE8;&#x78BC;&#x7684;&#x6B63;&#x5F0F;&#x8AAA;&#x660E;&#x548C;&#x5404;&#x7A2E;&#x6709;&#x7528;&#x7BC4;&#x4F8B;&#x7684;&#x8A73;&#x7D30;&#x8CC7;&#x8A0A;&#x3002;</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deploying_smart_contracts_sec">&#x90E8;&#x7F72;&#x667A;&#x80FD;&#x5408;&#x7D04;</h3>

</div>
<div class="sect2">
<h3 id="testing_frameworks">&#x6E2C;&#x8A66;&#x667A;&#x80FD;&#x5408;&#x7D04;</h3>
<div class="sect3">
<h4 id="testing_frameworks_sec">&#x6E2C;&#x8A66;&#x6846;&#x67B6;</h4>
<div class="paragraph">
<p>&#x6709;&#x5E7E;&#x500B;&#x5E38;&#x7528;&#x7684;&#x6E2C;&#x8A66;&#x6846;&#x67B6;&#xFF08;&#x6C92;&#x6709;&#x7279;&#x5B9A;&#x7684;&#x9806;&#x5E8F;&#xFF09;&#xFF1A;</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Truffle Test</dt>
<dd>
<p>Truffle&#x6846;&#x67B6;&#x7684;&#x4E00;&#x90E8;&#x5206;&#xFF0C;Truffle&#x5141;&#x8A31;&#x4F7F;&#x7528;JavaScript&#xFF08;&#x57FA;&#x65BC;Mocha&#xFF09;&#x6216;Solidity&#x7DE8;&#x5BEB;&#x55AE;&#x5143;&#x6E2C;&#x8A66;&#x3002;&#x9019;&#x4E9B;&#x6E2C;&#x8A66;&#x662F;&#x91DD;&#x5C0D;TestRPC/Ganache&#x904B;&#x884C;&#x7684;&#x3002;&#x7DE8;&#x5BEB;&#x9019;&#x4E9B;&#x6E2C;&#x8A66;&#x7684;&#x66F4;&#x591A;&#x7D30;&#x7BC0;&#x4F4D;&#x65BC; <a href="#truffle">[truffle]</a>&#x3002;</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Embark Framework Testing</dt>
<dd>
<p>Embark&#x8207;Mocha&#x96C6;&#x6210;&#xFF0C;&#x904B;&#x884C;&#x7528;JavaScript&#x7DE8;&#x5BEB;&#x7684;&#x55AE;&#x5143;&#x6E2C;&#x8A66;&#x3002;&#x9019;&#x4E9B;&#x6E2C;&#x8A66;&#x4F7F;&#x7528;&#x5728;TestRPC/Ganache&#x4E0A;&#x90E8;&#x7F72;&#x7684;&#x5408;&#x7D04;&#x57F7;&#x884C;&#x3002;Embark&#x6846;&#x67B6;&#x81EA;&#x52D5;&#x90E8;&#x7F72;&#x667A;&#x80FD;&#x5408;&#x7D04;&#xFF0C;&#x4E26;&#x5728;&#x5408;&#x7D04;&#x88AB;&#x66F4;&#x6539;&#x6642;&#x81EA;&#x52D5;&#x91CD;&#x65B0;&#x90E8;&#x7F72;&#x5B83;&#x5011;&#x3002;&#x5B83;&#x9084;&#x8DDF;&#x8E64;&#x5DF2;&#x90E8;&#x7F72;&#x7684;&#x5408;&#x7D04;&#xFF0C;&#x4E26;&#x5728;&#x771F;&#x6B63;&#x9700;&#x8981;&#x6642;&#x90E8;&#x7F72;&#x5408;&#x7D04;&#x3002;Embark&#x5305;&#x62EC;&#x4E00;&#x500B;&#x6E2C;&#x8A66;&#x5EAB;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5728;EVM&#x4E2D;&#x5FEB;&#x901F;&#x904B;&#x884C;&#x548C;&#x6E2C;&#x8A66;&#x4F60;&#x7684;&#x5408;&#x7D04;&#xFF0C;&#x4E26;&#x4F7F;&#x7528;assert.equal()&#x7B49;&#x51FD;&#x6578;&#x3002;Embark&#x6E2C;&#x8A66;&#x5C07;&#x5728;&#x76EE;&#x9304;&#x6E2C;&#x8A66;&#x4E0B;&#x904B;&#x884C;&#x4EFB;&#x4F55;&#x6E2C;&#x8A66;&#x6A94;&#x6848;&#x3002;</p>
</dd>
<dt class="hdlist1">DApp</dt>
<dd>
<p>DApp&#x4F7F;&#x7528;&#x672C;&#x5730;Solidity&#x7A0B;&#x5F0F;&#x78BC;&#xFF08;&#x4E00;&#x500B;&#x540D;&#x70BA;ds-test&#x7684;&#x5EAB;&#xFF09;&#x548C;&#x4E00;&#x500B;Parity&#x69CB;&#x5EFA;&#x7684;Rust&#x5EAB;&#xFF08;&#x7A31;&#x70BA;Ethrun&#xFF09;&#x57F7;&#x884C;&#x4EE5;&#x592A;&#x574A; Bytecode &#xFF0C;&#x7136;&#x5F8C;&#x65B7;&#x8A00;&#x6B63;&#x78BA;&#x6027;&#x3002;ds-test&#x5EAB;&#x63D0;&#x4F9B;&#x7528;&#x65BC;&#x9A57;&#x8B49;&#x63A7;&#x5236;&#x53F0;&#x4E2D;&#x6578;&#x64DA;&#x8A18;&#x9304;&#x7684;&#x6B63;&#x78BA;&#x6027;&#x548C;&#x4E8B;&#x4EF6;&#x7684;&#x65B7;&#x8A00;&#x529F;&#x80FD;&#x3002;</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>&#x65B7;&#x8A00;&#x51FD;&#x6578;&#x5305;&#x62EC;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>assert(bool condition)
assertEq(address a, address b)
assertEq(bytes32 a, bytes32 b)
assertEq(int a, int b)
assertEq(uint a, uint b)
assertEq0(bytes a, bytes b)
expectEventsExact(address target)</pre>
</div>
</div>
<div class="paragraph">
<p>&#x65E5;&#x8A8C;&#x4E8B;&#x4EF6;&#x5C07;&#x8CC7;&#x8A0A;&#x8A18;&#x9304;&#x5230;&#x63A7;&#x5236;&#x53F0;&#xFF0C;&#x4F7F;&#x5176;&#x6613;&#x65BC;&#x8ABF;&#x8A66;&#x3002;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>logs(bytes)
log_bytes32(bytes32)
log_named_bytes32(bytes32 key, bytes32 val)
log_named_address(bytes32 key, address val)
log_named_int(bytes32 key, int val)
log_named_uint(bytes32 key, uint val)
log_named_decimal_int(bytes32 key, int val, uint decimals)
log_named_decimal_uint(bytes32 key, uint val, uint decimals)</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Populus</dt>
<dd>
<p>Populus&#x4F7F;&#x7528;python&#x548C;&#x81EA;&#x5DF1;&#x7684;&#x93C8;&#x4EFF;&#x771F;&#x5668;&#x4F86;&#x904B;&#x884C;&#x7528;Solidity&#x7DE8;&#x5BEB;&#x7684;&#x5408;&#x7D04;&#x3002;&#x55AE;&#x5143;&#x6E2C;&#x8A66;&#x662F;&#x7528;pytest&#x5EAB;&#x7DE8;&#x5BEB;&#x7684;&#x3002;Populus&#x652F;&#x6301;&#x5C08;&#x9580;&#x7528;&#x65BC;&#x6E2C;&#x8A66;&#x7684;&#x66F8;&#x9762;&#x5408;&#x7D04;&#x3002;&#x9019;&#x4E9B;&#x5408;&#x7D04;&#x6A94;&#x6848;&#x540D;&#x61C9;&#x8A72;&#x8207;glob&#x6A21;&#x5F0F; <code>Test*.sol</code> &#x5339;&#x914D;&#xFF0C;&#x4E26;&#x4E14;&#x4F4D;&#x65BC;&#x9805;&#x76EE;&#x6E2C;&#x8A66;&#x76EE;&#x9304;<code>./tests/</code>&#x4E0B;&#x7684;&#x4EFB;&#x4F55;&#x4F4D;&#x7F6E;&#x3002;</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Framework</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Language(s)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testing Framework</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chain Emulator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Website</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Truffle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript/Solidity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mocha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TestRPC/Ganache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">truffleframework.com</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Embark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mocha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TestRPC/Ganache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">embark.readthedocs.io</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DApp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solidity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ds-test (custom)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ethrun (Parity)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">dapp.readthedocs.io</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Populus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python chain emulator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">populus.readthedocs.io</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="on_blockchain_testing_sec">&#x5728;&#x5340;&#x584A;&#x93C8;&#x4E0A;&#x6E2C;&#x8A66;</h4>
<div class="paragraph">
<p>&#x5118;&#x7BA1;&#x5927;&#x591A;&#x6578;&#x6E2C;&#x8A66;&#x4E0D;&#x61C9;&#x767C;&#x751F;&#x5728;&#x90E8;&#x7F72;&#x7684;&#x5408;&#x7D04;&#x4E0A;&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x901A;&#x904E;&#x4EE5;&#x592A;&#x574A;&#x5BA2;&#x6236;&#x7AEF;&#x6AA2;&#x67E5;&#x5408;&#x7D04;&#x7684;&#x884C;&#x70BA;&#x3002;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x53EF;&#x7528;&#x65BC;&#x8A55;&#x4F30;&#x667A;&#x80FD;&#x5408;&#x7D04;&#x7684;&#x72C0;&#x614B;&#x3002;&#x9019;&#x4E9B;&#x547D;&#x4EE4;&#x61C9;&#x8A72;&#x5728;&apos;geth&apos;&#x7D42;&#x7AEF;&#x8F38;&#x5165;&#xFF0C;&#x5118;&#x7BA1;&#x4EFB;&#x4F55;web3&#x8ABF;&#x7528;&#x4E5F;&#x6703;&#x652F;&#x6301;&#x9019;&#x4E9B;&#x547D;&#x4EE4;&#x3002;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>eth.getTransactionReceipt(txhash);</pre>
</div>
</div>
<div class="paragraph">
<p>&#x53EF;&#x7528;&#x65BC;&#x7372;&#x5F97;&#x5728;<code>txhash</code>&#x8655;&#x7684;&#x5408;&#x7D04;&#x5730;&#x5740;&#x3002;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>eth.getCode(contractaddress)</pre>
</div>
</div>
<div class="paragraph">
<p>&#x7372;&#x53D6;&#x90E8;&#x7F72;&#x5728;<code>contractaddress</code>&#x7684;&#x5408;&#x7D04;&#x7A0B;&#x5F0F;&#x78BC;&#x3002;&#x9019;&#x53EF;&#x4EE5;&#x7528;&#x4F86;&#x9A57;&#x8B49;&#x6B63;&#x78BA;&#x7684;&#x90E8;&#x7F72;&#x3002;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>eth.getPastLogs(options)</pre>
</div>
</div>
<div class="paragraph">
<p>&#x7372;&#x53D6;&#x4F4D;&#x65BC;&#x5730;&#x5740;&#x7684;&#x5408;&#x7D04;&#x7684;&#x5B8C;&#x6574;&#x65E5;&#x8A8C;&#xFF0C;&#x5728;&#x9078;&#x9805;&#x4E2D;&#x6307;&#x5B9A;&#x3002;&#x9019;&#x6709;&#x52A9;&#x65BC;&#x67E5;&#x770B;&#x5408;&#x7D04;&#x8ABF;&#x7528;&#x7684;&#x6B77;&#x53F2;&#x8A18;&#x9304;&#x3002;</p>
</div>
<div class="literalblock">
<div class="content">
<pre>eth.getStorageAt(address, position)</pre>
</div>
</div>
<div class="paragraph">
<p>&#x7372;&#x53D6;&#x4F4D;&#x65BC; address &#x7684;&#x5132;&#x5B58;&#xFF0C;&#x4E26;&#x4F7F;&#x7528; position &#x7684;&#x504F;&#x79FB;&#x91CF;&#x986F;&#x793A;&#x8A72;&#x5408;&#x7D04;&#x4E2D;&#x5132;&#x5B58;&#x7684;&#x6578;&#x64DA;&#x3002;</p>
</div>
<div class="paragraph">
<p>&lt;&lt;&#x7B2C;&#x4E5D;&#x7AE0;#,&#x4E0B;&#x4E00;&#x7AE0;&#xFF1A;&#x958B;&#x767C;&#x5DE5;&#x5177;&#xFF0C;&#x6846;&#x67B6;&#x548C;&#x5EAB;&gt;&gt;</p>
</div>
</div>
</div>
</div>
</div>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="第七章.html" class="navigation navigation-prev " aria-label="Previous page: 第七章交易">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="第九章.html" class="navigation navigation-next " aria-label="Next page: 第九章開發工具，框架和庫">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"第八章智能合約","level":"1.11","depth":1,"next":{"title":"第九章開發工具，框架和庫","level":"1.12","depth":1,"path":"第九章.asciidoc","ref":"第九章.asciidoc","articles":[]},"previous":{"title":"第七章交易","level":"1.10","depth":1,"path":"第七章.asciidoc","ref":"第七章.asciidoc","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["mathjax","livereload"],"pluginsConfig":{"mathjax":{"forceSVG":false,"version":"2.6-latest"},"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"第八章.asciidoc","mtime":"2019-08-31T19:01:54.962Z","type":"asciidoc"},"gitbook":{"version":"3.2.3","time":"2019-08-31T19:12:09.953Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

